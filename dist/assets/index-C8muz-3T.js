(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))r(d);new MutationObserver(d=>{for(const f of d)if(f.type==="childList")for(const h of f.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&r(h)}).observe(document,{childList:!0,subtree:!0});function i(d){const f={};return d.integrity&&(f.integrity=d.integrity),d.referrerPolicy&&(f.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?f.credentials="include":d.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function r(d){if(d.ep)return;d.ep=!0;const f=i(d);fetch(d.href,f)}})();function zm(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}var Ac={exports:{}},Sl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fh;function xp(){if(Fh)return Sl;Fh=1;var l=Symbol.for("react.transitional.element"),s=Symbol.for("react.fragment");function i(r,d,f){var h=null;if(f!==void 0&&(h=""+f),d.key!==void 0&&(h=""+d.key),"key"in d){f={};for(var g in d)g!=="key"&&(f[g]=d[g])}else f=d;return d=f.ref,{$$typeof:l,type:r,key:h,ref:d!==void 0?d:null,props:f}}return Sl.Fragment=s,Sl.jsx=i,Sl.jsxs=i,Sl}var em;function yp(){return em||(em=1,Ac.exports=xp()),Ac.exports}var c=yp(),Oc={exports:{}},Ce={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tm;function wp(){if(tm)return Ce;tm=1;var l=Symbol.for("react.transitional.element"),s=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),f=Symbol.for("react.consumer"),h=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),b=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),S=Symbol.for("react.activity"),j=Symbol.iterator;function T(x){return x===null||typeof x!="object"?null:(x=j&&x[j]||x["@@iterator"],typeof x=="function"?x:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},q=Object.assign,L={};function W(x,H,$){this.props=x,this.context=H,this.refs=L,this.updater=$||C}W.prototype.isReactComponent={},W.prototype.setState=function(x,H){if(typeof x!="object"&&typeof x!="function"&&x!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,x,H,"setState")},W.prototype.forceUpdate=function(x){this.updater.enqueueForceUpdate(this,x,"forceUpdate")};function Z(){}Z.prototype=W.prototype;function k(x,H,$){this.props=x,this.context=H,this.refs=L,this.updater=$||C}var te=k.prototype=new Z;te.constructor=k,q(te,W.prototype),te.isPureReactComponent=!0;var he=Array.isArray;function fe(){}var ae={H:null,A:null,T:null,S:null},we=Object.prototype.hasOwnProperty;function be(x,H,$){var J=$.ref;return{$$typeof:l,type:x,key:H,ref:J!==void 0?J:null,props:$}}function ke(x,H){return be(x.type,H,x.props)}function Te(x){return typeof x=="object"&&x!==null&&x.$$typeof===l}function se(x){var H={"=":"=0",":":"=2"};return"$"+x.replace(/[=:]/g,function($){return H[$]})}var me=/\/+/g;function je(x,H){return typeof x=="object"&&x!==null&&x.key!=null?se(""+x.key):H.toString(36)}function ne(x){switch(x.status){case"fulfilled":return x.value;case"rejected":throw x.reason;default:switch(typeof x.status=="string"?x.then(fe,fe):(x.status="pending",x.then(function(H){x.status==="pending"&&(x.status="fulfilled",x.value=H)},function(H){x.status==="pending"&&(x.status="rejected",x.reason=H)})),x.status){case"fulfilled":return x.value;case"rejected":throw x.reason}}throw x}function A(x,H,$,J,ce){var ve=typeof x;(ve==="undefined"||ve==="boolean")&&(x=null);var ye=!1;if(x===null)ye=!0;else switch(ve){case"bigint":case"string":case"number":ye=!0;break;case"object":switch(x.$$typeof){case l:case s:ye=!0;break;case y:return ye=x._init,A(ye(x._payload),H,$,J,ce)}}if(ye)return ce=ce(x),ye=J===""?"."+je(x,0):J,he(ce)?($="",ye!=null&&($=ye.replace(me,"$&/")+"/"),A(ce,H,$,"",function(ie){return ie})):ce!=null&&(Te(ce)&&(ce=ke(ce,$+(ce.key==null||x&&x.key===ce.key?"":(""+ce.key).replace(me,"$&/")+"/")+ye)),H.push(ce)),1;ye=0;var qe=J===""?".":J+":";if(he(x))for(var Ue=0;Ue<x.length;Ue++)J=x[Ue],ve=qe+je(J,Ue),ye+=A(J,H,$,ve,ce);else if(Ue=T(x),typeof Ue=="function")for(x=Ue.call(x),Ue=0;!(J=x.next()).done;)J=J.value,ve=qe+je(J,Ue++),ye+=A(J,H,$,ve,ce);else if(ve==="object"){if(typeof x.then=="function")return A(ne(x),H,$,J,ce);throw H=String(x),Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(x).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.")}return ye}function R(x,H,$){if(x==null)return x;var J=[],ce=0;return A(x,J,"","",function(ve){return H.call($,ve,ce++)}),J}function re(x){if(x._status===-1){var H=x._result;H=H(),H.then(function($){(x._status===0||x._status===-1)&&(x._status=1,x._result=$)},function($){(x._status===0||x._status===-1)&&(x._status=2,x._result=$)}),x._status===-1&&(x._status=0,x._result=H)}if(x._status===1)return x._result.default;throw x._result}var K=typeof reportError=="function"?reportError:function(x){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var H=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof x=="object"&&x!==null&&typeof x.message=="string"?String(x.message):String(x),error:x});if(!window.dispatchEvent(H))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",x);return}console.error(x)},oe={map:R,forEach:function(x,H,$){R(x,function(){H.apply(this,arguments)},$)},count:function(x){var H=0;return R(x,function(){H++}),H},toArray:function(x){return R(x,function(H){return H})||[]},only:function(x){if(!Te(x))throw Error("React.Children.only expected to receive a single React element child.");return x}};return Ce.Activity=S,Ce.Children=oe,Ce.Component=W,Ce.Fragment=i,Ce.Profiler=d,Ce.PureComponent=k,Ce.StrictMode=r,Ce.Suspense=b,Ce.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ae,Ce.__COMPILER_RUNTIME={__proto__:null,c:function(x){return ae.H.useMemoCache(x)}},Ce.cache=function(x){return function(){return x.apply(null,arguments)}},Ce.cacheSignal=function(){return null},Ce.cloneElement=function(x,H,$){if(x==null)throw Error("The argument must be a React element, but you passed "+x+".");var J=q({},x.props),ce=x.key;if(H!=null)for(ve in H.key!==void 0&&(ce=""+H.key),H)!we.call(H,ve)||ve==="key"||ve==="__self"||ve==="__source"||ve==="ref"&&H.ref===void 0||(J[ve]=H[ve]);var ve=arguments.length-2;if(ve===1)J.children=$;else if(1<ve){for(var ye=Array(ve),qe=0;qe<ve;qe++)ye[qe]=arguments[qe+2];J.children=ye}return be(x.type,ce,J)},Ce.createContext=function(x){return x={$$typeof:h,_currentValue:x,_currentValue2:x,_threadCount:0,Provider:null,Consumer:null},x.Provider=x,x.Consumer={$$typeof:f,_context:x},x},Ce.createElement=function(x,H,$){var J,ce={},ve=null;if(H!=null)for(J in H.key!==void 0&&(ve=""+H.key),H)we.call(H,J)&&J!=="key"&&J!=="__self"&&J!=="__source"&&(ce[J]=H[J]);var ye=arguments.length-2;if(ye===1)ce.children=$;else if(1<ye){for(var qe=Array(ye),Ue=0;Ue<ye;Ue++)qe[Ue]=arguments[Ue+2];ce.children=qe}if(x&&x.defaultProps)for(J in ye=x.defaultProps,ye)ce[J]===void 0&&(ce[J]=ye[J]);return be(x,ve,ce)},Ce.createRef=function(){return{current:null}},Ce.forwardRef=function(x){return{$$typeof:g,render:x}},Ce.isValidElement=Te,Ce.lazy=function(x){return{$$typeof:y,_payload:{_status:-1,_result:x},_init:re}},Ce.memo=function(x,H){return{$$typeof:p,type:x,compare:H===void 0?null:H}},Ce.startTransition=function(x){var H=ae.T,$={};ae.T=$;try{var J=x(),ce=ae.S;ce!==null&&ce($,J),typeof J=="object"&&J!==null&&typeof J.then=="function"&&J.then(fe,K)}catch(ve){K(ve)}finally{H!==null&&$.types!==null&&(H.types=$.types),ae.T=H}},Ce.unstable_useCacheRefresh=function(){return ae.H.useCacheRefresh()},Ce.use=function(x){return ae.H.use(x)},Ce.useActionState=function(x,H,$){return ae.H.useActionState(x,H,$)},Ce.useCallback=function(x,H){return ae.H.useCallback(x,H)},Ce.useContext=function(x){return ae.H.useContext(x)},Ce.useDebugValue=function(){},Ce.useDeferredValue=function(x,H){return ae.H.useDeferredValue(x,H)},Ce.useEffect=function(x,H){return ae.H.useEffect(x,H)},Ce.useEffectEvent=function(x){return ae.H.useEffectEvent(x)},Ce.useId=function(){return ae.H.useId()},Ce.useImperativeHandle=function(x,H,$){return ae.H.useImperativeHandle(x,H,$)},Ce.useInsertionEffect=function(x,H){return ae.H.useInsertionEffect(x,H)},Ce.useLayoutEffect=function(x,H){return ae.H.useLayoutEffect(x,H)},Ce.useMemo=function(x,H){return ae.H.useMemo(x,H)},Ce.useOptimistic=function(x,H){return ae.H.useOptimistic(x,H)},Ce.useReducer=function(x,H,$){return ae.H.useReducer(x,H,$)},Ce.useRef=function(x){return ae.H.useRef(x)},Ce.useState=function(x){return ae.H.useState(x)},Ce.useSyncExternalStore=function(x,H,$){return ae.H.useSyncExternalStore(x,H,$)},Ce.useTransition=function(){return ae.H.useTransition()},Ce.version="19.2.4",Ce}var am;function Fc(){return am||(am=1,Oc.exports=wp()),Oc.exports}var N=Fc();const _p=zm(N);var kc={exports:{}},jl={},Cc={exports:{}},Rc={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sm;function Sp(){return sm||(sm=1,(function(l){function s(A,R){var re=A.length;A.push(R);e:for(;0<re;){var K=re-1>>>1,oe=A[K];if(0<d(oe,R))A[K]=R,A[re]=oe,re=K;else break e}}function i(A){return A.length===0?null:A[0]}function r(A){if(A.length===0)return null;var R=A[0],re=A.pop();if(re!==R){A[0]=re;e:for(var K=0,oe=A.length,x=oe>>>1;K<x;){var H=2*(K+1)-1,$=A[H],J=H+1,ce=A[J];if(0>d($,re))J<oe&&0>d(ce,$)?(A[K]=ce,A[J]=re,K=J):(A[K]=$,A[H]=re,K=H);else if(J<oe&&0>d(ce,re))A[K]=ce,A[J]=re,K=J;else break e}}return R}function d(A,R){var re=A.sortIndex-R.sortIndex;return re!==0?re:A.id-R.id}if(l.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var f=performance;l.unstable_now=function(){return f.now()}}else{var h=Date,g=h.now();l.unstable_now=function(){return h.now()-g}}var b=[],p=[],y=1,S=null,j=3,T=!1,C=!1,q=!1,L=!1,W=typeof setTimeout=="function"?setTimeout:null,Z=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;function te(A){for(var R=i(p);R!==null;){if(R.callback===null)r(p);else if(R.startTime<=A)r(p),R.sortIndex=R.expirationTime,s(b,R);else break;R=i(p)}}function he(A){if(q=!1,te(A),!C)if(i(b)!==null)C=!0,fe||(fe=!0,se());else{var R=i(p);R!==null&&ne(he,R.startTime-A)}}var fe=!1,ae=-1,we=5,be=-1;function ke(){return L?!0:!(l.unstable_now()-be<we)}function Te(){if(L=!1,fe){var A=l.unstable_now();be=A;var R=!0;try{e:{C=!1,q&&(q=!1,Z(ae),ae=-1),T=!0;var re=j;try{t:{for(te(A),S=i(b);S!==null&&!(S.expirationTime>A&&ke());){var K=S.callback;if(typeof K=="function"){S.callback=null,j=S.priorityLevel;var oe=K(S.expirationTime<=A);if(A=l.unstable_now(),typeof oe=="function"){S.callback=oe,te(A),R=!0;break t}S===i(b)&&r(b),te(A)}else r(b);S=i(b)}if(S!==null)R=!0;else{var x=i(p);x!==null&&ne(he,x.startTime-A),R=!1}}break e}finally{S=null,j=re,T=!1}R=void 0}}finally{R?se():fe=!1}}}var se;if(typeof k=="function")se=function(){k(Te)};else if(typeof MessageChannel<"u"){var me=new MessageChannel,je=me.port2;me.port1.onmessage=Te,se=function(){je.postMessage(null)}}else se=function(){W(Te,0)};function ne(A,R){ae=W(function(){A(l.unstable_now())},R)}l.unstable_IdlePriority=5,l.unstable_ImmediatePriority=1,l.unstable_LowPriority=4,l.unstable_NormalPriority=3,l.unstable_Profiling=null,l.unstable_UserBlockingPriority=2,l.unstable_cancelCallback=function(A){A.callback=null},l.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):we=0<A?Math.floor(1e3/A):5},l.unstable_getCurrentPriorityLevel=function(){return j},l.unstable_next=function(A){switch(j){case 1:case 2:case 3:var R=3;break;default:R=j}var re=j;j=R;try{return A()}finally{j=re}},l.unstable_requestPaint=function(){L=!0},l.unstable_runWithPriority=function(A,R){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var re=j;j=A;try{return R()}finally{j=re}},l.unstable_scheduleCallback=function(A,R,re){var K=l.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?K+re:K):re=K,A){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=re+oe,A={id:y++,callback:R,priorityLevel:A,startTime:re,expirationTime:oe,sortIndex:-1},re>K?(A.sortIndex=re,s(p,A),i(b)===null&&A===i(p)&&(q?(Z(ae),ae=-1):q=!0,ne(he,re-K))):(A.sortIndex=oe,s(b,A),C||T||(C=!0,fe||(fe=!0,se()))),A},l.unstable_shouldYield=ke,l.unstable_wrapCallback=function(A){var R=j;return function(){var re=j;j=R;try{return A.apply(this,arguments)}finally{j=re}}}})(Rc)),Rc}var nm;function jp(){return nm||(nm=1,Cc.exports=Sp()),Cc.exports}var Dc={exports:{}},Et={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lm;function Np(){if(lm)return Et;lm=1;var l=Fc();function s(b){var p="https://react.dev/errors/"+b;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)p+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+b+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var r={d:{f:i,r:function(){throw Error(s(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},d=Symbol.for("react.portal");function f(b,p,y){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:d,key:S==null?null:""+S,children:b,containerInfo:p,implementation:y}}var h=l.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(b,p){if(b==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Et.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Et.createPortal=function(b,p){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(s(299));return f(b,p,null,y)},Et.flushSync=function(b){var p=h.T,y=r.p;try{if(h.T=null,r.p=2,b)return b()}finally{h.T=p,r.p=y,r.d.f()}},Et.preconnect=function(b,p){typeof b=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,r.d.C(b,p))},Et.prefetchDNS=function(b){typeof b=="string"&&r.d.D(b)},Et.preinit=function(b,p){if(typeof b=="string"&&p&&typeof p.as=="string"){var y=p.as,S=g(y,p.crossOrigin),j=typeof p.integrity=="string"?p.integrity:void 0,T=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;y==="style"?r.d.S(b,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:S,integrity:j,fetchPriority:T}):y==="script"&&r.d.X(b,{crossOrigin:S,integrity:j,fetchPriority:T,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Et.preinitModule=function(b,p){if(typeof b=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var y=g(p.as,p.crossOrigin);r.d.M(b,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&r.d.M(b)},Et.preload=function(b,p){if(typeof b=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var y=p.as,S=g(y,p.crossOrigin);r.d.L(b,y,{crossOrigin:S,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Et.preloadModule=function(b,p){if(typeof b=="string")if(p){var y=g(p.as,p.crossOrigin);r.d.m(b,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else r.d.m(b)},Et.requestFormReset=function(b){r.d.r(b)},Et.unstable_batchedUpdates=function(b,p){return b(p)},Et.useFormState=function(b,p,y){return h.H.useFormState(b,p,y)},Et.useFormStatus=function(){return h.H.useHostTransitionStatus()},Et.version="19.2.4",Et}var im;function Ep(){if(im)return Dc.exports;im=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(s){console.error(s)}}return l(),Dc.exports=Np(),Dc.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rm;function Tp(){if(rm)return jl;rm=1;var l=jp(),s=Fc(),i=Ep();function r(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function d(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function f(e){var t=e,a=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(a=t.return),e=t.return;while(e)}return t.tag===3?a:null}function h(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function g(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function b(e){if(f(e)!==e)throw Error(r(188))}function p(e){var t=e.alternate;if(!t){if(t=f(e),t===null)throw Error(r(188));return t!==e?null:e}for(var a=e,n=t;;){var o=a.return;if(o===null)break;var u=o.alternate;if(u===null){if(n=o.return,n!==null){a=n;continue}break}if(o.child===u.child){for(u=o.child;u;){if(u===a)return b(o),e;if(u===n)return b(o),t;u=u.sibling}throw Error(r(188))}if(a.return!==n.return)a=o,n=u;else{for(var m=!1,v=o.child;v;){if(v===a){m=!0,a=o,n=u;break}if(v===n){m=!0,n=o,a=u;break}v=v.sibling}if(!m){for(v=u.child;v;){if(v===a){m=!0,a=u,n=o;break}if(v===n){m=!0,n=u,a=o;break}v=v.sibling}if(!m)throw Error(r(189))}}if(a.alternate!==n)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?e:t}function y(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=y(e),t!==null)return t;e=e.sibling}return null}var S=Object.assign,j=Symbol.for("react.element"),T=Symbol.for("react.transitional.element"),C=Symbol.for("react.portal"),q=Symbol.for("react.fragment"),L=Symbol.for("react.strict_mode"),W=Symbol.for("react.profiler"),Z=Symbol.for("react.consumer"),k=Symbol.for("react.context"),te=Symbol.for("react.forward_ref"),he=Symbol.for("react.suspense"),fe=Symbol.for("react.suspense_list"),ae=Symbol.for("react.memo"),we=Symbol.for("react.lazy"),be=Symbol.for("react.activity"),ke=Symbol.for("react.memo_cache_sentinel"),Te=Symbol.iterator;function se(e){return e===null||typeof e!="object"?null:(e=Te&&e[Te]||e["@@iterator"],typeof e=="function"?e:null)}var me=Symbol.for("react.client.reference");function je(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===me?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case q:return"Fragment";case W:return"Profiler";case L:return"StrictMode";case he:return"Suspense";case fe:return"SuspenseList";case be:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case C:return"Portal";case k:return e.displayName||"Context";case Z:return(e._context.displayName||"Context")+".Consumer";case te:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ae:return t=e.displayName||null,t!==null?t:je(e.type)||"Memo";case we:t=e._payload,e=e._init;try{return je(e(t))}catch{}}return null}var ne=Array.isArray,A=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,R=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re={pending:!1,data:null,method:null,action:null},K=[],oe=-1;function x(e){return{current:e}}function H(e){0>oe||(e.current=K[oe],K[oe]=null,oe--)}function $(e,t){oe++,K[oe]=e.current,e.current=t}var J=x(null),ce=x(null),ve=x(null),ye=x(null);function qe(e,t){switch($(ve,t),$(ce,e),$(J,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?_h(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=_h(t),e=Sh(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}H(J),$(J,e)}function Ue(){H(J),H(ce),H(ve)}function ie(e){e.memoizedState!==null&&$(ye,e);var t=J.current,a=Sh(t,e.type);t!==a&&($(ce,e),$(J,a))}function de(e){ce.current===e&&(H(J),H(ce)),ye.current===e&&(H(ye),xl._currentValue=re)}var Q,G;function w(e){if(Q===void 0)try{throw Error()}catch(a){var t=a.stack.trim().match(/\n( *(at )?)/);Q=t&&t[1]||"",G=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Q+e+G}var M=!1;function ge(e,t){if(!e||M)return"";M=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var n={DetermineComponentFrameRoot:function(){try{if(t){var ee=function(){throw Error()};if(Object.defineProperty(ee.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ee,[])}catch(V){var B=V}Reflect.construct(e,[],ee)}else{try{ee.call()}catch(V){B=V}e.call(ee.prototype)}}else{try{throw Error()}catch(V){B=V}(ee=e())&&typeof ee.catch=="function"&&ee.catch(function(){})}}catch(V){if(V&&B&&typeof V.stack=="string")return[V.stack,B.stack]}return[null,null]}};n.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var o=Object.getOwnPropertyDescriptor(n.DetermineComponentFrameRoot,"name");o&&o.configurable&&Object.defineProperty(n.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var u=n.DetermineComponentFrameRoot(),m=u[0],v=u[1];if(m&&v){var _=m.split(`
`),z=v.split(`
`);for(o=n=0;n<_.length&&!_[n].includes("DetermineComponentFrameRoot");)n++;for(;o<z.length&&!z[o].includes("DetermineComponentFrameRoot");)o++;if(n===_.length||o===z.length)for(n=_.length-1,o=z.length-1;1<=n&&0<=o&&_[n]!==z[o];)o--;for(;1<=n&&0<=o;n--,o--)if(_[n]!==z[o]){if(n!==1||o!==1)do if(n--,o--,0>o||_[n]!==z[o]){var X=`
`+_[n].replace(" at new "," at ");return e.displayName&&X.includes("<anonymous>")&&(X=X.replace("<anonymous>",e.displayName)),X}while(1<=n&&0<=o);break}}}finally{M=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?w(a):""}function Y(e,t){switch(e.tag){case 26:case 27:case 5:return w(e.type);case 16:return w("Lazy");case 13:return e.child!==t&&t!==null?w("Suspense Fallback"):w("Suspense");case 19:return w("SuspenseList");case 0:case 15:return ge(e.type,!1);case 11:return ge(e.type.render,!1);case 1:return ge(e.type,!0);case 31:return w("Activity");default:return""}}function F(e){try{var t="",a=null;do t+=Y(e,a),a=e,e=e.return;while(e);return t}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}var le=Object.prototype.hasOwnProperty,D=l.unstable_scheduleCallback,I=l.unstable_cancelCallback,pe=l.unstable_shouldYield,ze=l.unstable_requestPaint,Ye=l.unstable_now,Xe=l.unstable_getCurrentPriorityLevel,Ie=l.unstable_ImmediatePriority,vt=l.unstable_UserBlockingPriority,Mt=l.unstable_NormalPriority,Cs=l.unstable_LowPriority,kn=l.unstable_IdlePriority,t0=l.log,a0=l.unstable_setDisableYieldValue,Cn=null,Lt=null;function Ua(e){if(typeof t0=="function"&&a0(e),Lt&&typeof Lt.setStrictMode=="function")try{Lt.setStrictMode(Cn,e)}catch{}}var qt=Math.clz32?Math.clz32:l0,s0=Math.log,n0=Math.LN2;function l0(e){return e>>>=0,e===0?32:31-(s0(e)/n0|0)|0}var ql=256,Bl=262144,Hl=4194304;function rs(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function $l(e,t,a){var n=e.pendingLanes;if(n===0)return 0;var o=0,u=e.suspendedLanes,m=e.pingedLanes;e=e.warmLanes;var v=n&134217727;return v!==0?(n=v&~u,n!==0?o=rs(n):(m&=v,m!==0?o=rs(m):a||(a=v&~e,a!==0&&(o=rs(a))))):(v=n&~u,v!==0?o=rs(v):m!==0?o=rs(m):a||(a=n&~e,a!==0&&(o=rs(a)))),o===0?0:t!==0&&t!==o&&(t&u)===0&&(u=o&-o,a=t&-t,u>=a||u===32&&(a&4194048)!==0)?t:o}function Rn(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function i0(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function au(){var e=Hl;return Hl<<=1,(Hl&62914560)===0&&(Hl=4194304),e}function gr(e){for(var t=[],a=0;31>a;a++)t.push(e);return t}function Dn(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function r0(e,t,a,n,o,u){var m=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var v=e.entanglements,_=e.expirationTimes,z=e.hiddenUpdates;for(a=m&~a;0<a;){var X=31-qt(a),ee=1<<X;v[X]=0,_[X]=-1;var B=z[X];if(B!==null)for(z[X]=null,X=0;X<B.length;X++){var V=B[X];V!==null&&(V.lane&=-536870913)}a&=~ee}n!==0&&su(e,n,0),u!==0&&o===0&&e.tag!==0&&(e.suspendedLanes|=u&~(m&~t))}function su(e,t,a){e.pendingLanes|=t,e.suspendedLanes&=~t;var n=31-qt(t);e.entangledLanes|=t,e.entanglements[n]=e.entanglements[n]|1073741824|a&261930}function nu(e,t){var a=e.entangledLanes|=t;for(e=e.entanglements;a;){var n=31-qt(a),o=1<<n;o&t|e[n]&t&&(e[n]|=t),a&=~o}}function lu(e,t){var a=t&-t;return a=(a&42)!==0?1:pr(a),(a&(e.suspendedLanes|t))!==0?0:a}function pr(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function br(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function iu(){var e=R.p;return e!==0?e:(e=window.event,e===void 0?32:Kh(e.type))}function ru(e,t){var a=R.p;try{return R.p=e,t()}finally{R.p=a}}var za=Math.random().toString(36).slice(2),xt="__reactFiber$"+za,Ot="__reactProps$"+za,Rs="__reactContainer$"+za,vr="__reactEvents$"+za,o0="__reactListeners$"+za,c0="__reactHandles$"+za,ou="__reactResources$"+za,Un="__reactMarker$"+za;function xr(e){delete e[xt],delete e[Ot],delete e[vr],delete e[o0],delete e[c0]}function Ds(e){var t=e[xt];if(t)return t;for(var a=e.parentNode;a;){if(t=a[Rs]||a[xt]){if(a=t.alternate,t.child!==null||a!==null&&a.child!==null)for(e=kh(e);e!==null;){if(a=e[xt])return a;e=kh(e)}return t}e=a,a=e.parentNode}return null}function Us(e){if(e=e[xt]||e[Rs]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function zn(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(r(33))}function zs(e){var t=e[ou];return t||(t=e[ou]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function pt(e){e[Un]=!0}var cu=new Set,uu={};function os(e,t){Ms(e,t),Ms(e+"Capture",t)}function Ms(e,t){for(uu[e]=t,e=0;e<t.length;e++)cu.add(t[e])}var u0=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),du={},fu={};function d0(e){return le.call(fu,e)?!0:le.call(du,e)?!1:u0.test(e)?fu[e]=!0:(du[e]=!0,!1)}function Il(e,t,a){if(d0(t))if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var n=t.toLowerCase().slice(0,5);if(n!=="data-"&&n!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+a)}}function Vl(e,t,a){if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+a)}}function ma(e,t,a,n){if(n===null)e.removeAttribute(a);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(t,a,""+n)}}function Qt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function hu(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function f0(e,t,a){var n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,u=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(m){a=""+m,u.call(this,m)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return a},setValue:function(m){a=""+m},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function yr(e){if(!e._valueTracker){var t=hu(e)?"checked":"value";e._valueTracker=f0(e,t,""+e[t])}}function mu(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var a=t.getValue(),n="";return e&&(n=hu(e)?e.checked?"true":"false":e.value),e=n,e!==a?(t.setValue(e),!0):!1}function Gl(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var h0=/[\n"\\]/g;function Jt(e){return e.replace(h0,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function wr(e,t,a,n,o,u,m,v){e.name="",m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"?e.type=m:e.removeAttribute("type"),t!=null?m==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Qt(t)):e.value!==""+Qt(t)&&(e.value=""+Qt(t)):m!=="submit"&&m!=="reset"||e.removeAttribute("value"),t!=null?_r(e,m,Qt(t)):a!=null?_r(e,m,Qt(a)):n!=null&&e.removeAttribute("value"),o==null&&u!=null&&(e.defaultChecked=!!u),o!=null&&(e.checked=o&&typeof o!="function"&&typeof o!="symbol"),v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?e.name=""+Qt(v):e.removeAttribute("name")}function gu(e,t,a,n,o,u,m,v){if(u!=null&&typeof u!="function"&&typeof u!="symbol"&&typeof u!="boolean"&&(e.type=u),t!=null||a!=null){if(!(u!=="submit"&&u!=="reset"||t!=null)){yr(e);return}a=a!=null?""+Qt(a):"",t=t!=null?""+Qt(t):a,v||t===e.value||(e.value=t),e.defaultValue=t}n=n??o,n=typeof n!="function"&&typeof n!="symbol"&&!!n,e.checked=v?e.checked:!!n,e.defaultChecked=!!n,m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(e.name=m),yr(e)}function _r(e,t,a){t==="number"&&Gl(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function Ls(e,t,a,n){if(e=e.options,t){t={};for(var o=0;o<a.length;o++)t["$"+a[o]]=!0;for(a=0;a<e.length;a++)o=t.hasOwnProperty("$"+e[a].value),e[a].selected!==o&&(e[a].selected=o),o&&n&&(e[a].defaultSelected=!0)}else{for(a=""+Qt(a),t=null,o=0;o<e.length;o++){if(e[o].value===a){e[o].selected=!0,n&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function pu(e,t,a){if(t!=null&&(t=""+Qt(t),t!==e.value&&(e.value=t),a==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=a!=null?""+Qt(a):""}function bu(e,t,a,n){if(t==null){if(n!=null){if(a!=null)throw Error(r(92));if(ne(n)){if(1<n.length)throw Error(r(93));n=n[0]}a=n}a==null&&(a=""),t=a}a=Qt(t),e.defaultValue=a,n=e.textContent,n===a&&n!==""&&n!==null&&(e.value=n),yr(e)}function qs(e,t){if(t){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=t;return}}e.textContent=t}var m0=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function vu(e,t,a){var n=t.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?n?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":n?e.setProperty(t,a):typeof a!="number"||a===0||m0.has(t)?t==="float"?e.cssFloat=a:e[t]=(""+a).trim():e[t]=a+"px"}function xu(e,t,a){if(t!=null&&typeof t!="object")throw Error(r(62));if(e=e.style,a!=null){for(var n in a)!a.hasOwnProperty(n)||t!=null&&t.hasOwnProperty(n)||(n.indexOf("--")===0?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="");for(var o in t)n=t[o],t.hasOwnProperty(o)&&a[o]!==n&&vu(e,o,n)}else for(var u in t)t.hasOwnProperty(u)&&vu(e,u,t[u])}function Sr(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var g0=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),p0=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Yl(e){return p0.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function ga(){}var jr=null;function Nr(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Bs=null,Hs=null;function yu(e){var t=Us(e);if(t&&(e=t.stateNode)){var a=e[Ot]||null;e:switch(e=t.stateNode,t.type){case"input":if(wr(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),t=a.name,a.type==="radio"&&t!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Jt(""+t)+'"][type="radio"]'),t=0;t<a.length;t++){var n=a[t];if(n!==e&&n.form===e.form){var o=n[Ot]||null;if(!o)throw Error(r(90));wr(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name)}}for(t=0;t<a.length;t++)n=a[t],n.form===e.form&&mu(n)}break e;case"textarea":pu(e,a.value,a.defaultValue);break e;case"select":t=a.value,t!=null&&Ls(e,!!a.multiple,t,!1)}}}var Er=!1;function wu(e,t,a){if(Er)return e(t,a);Er=!0;try{var n=e(t);return n}finally{if(Er=!1,(Bs!==null||Hs!==null)&&(Ri(),Bs&&(t=Bs,e=Hs,Hs=Bs=null,yu(t),e)))for(t=0;t<e.length;t++)yu(e[t])}}function Mn(e,t){var a=e.stateNode;if(a===null)return null;var n=a[Ot]||null;if(n===null)return null;a=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(r(231,t,typeof a));return a}var pa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Tr=!1;if(pa)try{var Ln={};Object.defineProperty(Ln,"passive",{get:function(){Tr=!0}}),window.addEventListener("test",Ln,Ln),window.removeEventListener("test",Ln,Ln)}catch{Tr=!1}var Ma=null,Ar=null,Kl=null;function _u(){if(Kl)return Kl;var e,t=Ar,a=t.length,n,o="value"in Ma?Ma.value:Ma.textContent,u=o.length;for(e=0;e<a&&t[e]===o[e];e++);var m=a-e;for(n=1;n<=m&&t[a-n]===o[u-n];n++);return Kl=o.slice(e,1<n?1-n:void 0)}function Xl(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ql(){return!0}function Su(){return!1}function kt(e){function t(a,n,o,u,m){this._reactName=a,this._targetInst=o,this.type=n,this.nativeEvent=u,this.target=m,this.currentTarget=null;for(var v in e)e.hasOwnProperty(v)&&(a=e[v],this[v]=a?a(u):u[v]);return this.isDefaultPrevented=(u.defaultPrevented!=null?u.defaultPrevented:u.returnValue===!1)?Ql:Su,this.isPropagationStopped=Su,this}return S(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Ql)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Ql)},persist:function(){},isPersistent:Ql}),t}var cs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Jl=kt(cs),qn=S({},cs,{view:0,detail:0}),b0=kt(qn),Or,kr,Bn,Zl=S({},qn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Rr,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Bn&&(Bn&&e.type==="mousemove"?(Or=e.screenX-Bn.screenX,kr=e.screenY-Bn.screenY):kr=Or=0,Bn=e),Or)},movementY:function(e){return"movementY"in e?e.movementY:kr}}),ju=kt(Zl),v0=S({},Zl,{dataTransfer:0}),x0=kt(v0),y0=S({},qn,{relatedTarget:0}),Cr=kt(y0),w0=S({},cs,{animationName:0,elapsedTime:0,pseudoElement:0}),_0=kt(w0),S0=S({},cs,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),j0=kt(S0),N0=S({},cs,{data:0}),Nu=kt(N0),E0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},T0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},A0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function O0(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=A0[e])?!!t[e]:!1}function Rr(){return O0}var k0=S({},qn,{key:function(e){if(e.key){var t=E0[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Xl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?T0[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Rr,charCode:function(e){return e.type==="keypress"?Xl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Xl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),C0=kt(k0),R0=S({},Zl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Eu=kt(R0),D0=S({},qn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Rr}),U0=kt(D0),z0=S({},cs,{propertyName:0,elapsedTime:0,pseudoElement:0}),M0=kt(z0),L0=S({},Zl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),q0=kt(L0),B0=S({},cs,{newState:0,oldState:0}),H0=kt(B0),$0=[9,13,27,32],Dr=pa&&"CompositionEvent"in window,Hn=null;pa&&"documentMode"in document&&(Hn=document.documentMode);var I0=pa&&"TextEvent"in window&&!Hn,Tu=pa&&(!Dr||Hn&&8<Hn&&11>=Hn),Au=" ",Ou=!1;function ku(e,t){switch(e){case"keyup":return $0.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Cu(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var $s=!1;function V0(e,t){switch(e){case"compositionend":return Cu(t);case"keypress":return t.which!==32?null:(Ou=!0,Au);case"textInput":return e=t.data,e===Au&&Ou?null:e;default:return null}}function G0(e,t){if($s)return e==="compositionend"||!Dr&&ku(e,t)?(e=_u(),Kl=Ar=Ma=null,$s=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Tu&&t.locale!=="ko"?null:t.data;default:return null}}var Y0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ru(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Y0[e.type]:t==="textarea"}function Du(e,t,a,n){Bs?Hs?Hs.push(n):Hs=[n]:Bs=n,t=Bi(t,"onChange"),0<t.length&&(a=new Jl("onChange","change",null,a,n),e.push({event:a,listeners:t}))}var $n=null,In=null;function K0(e){ph(e,0)}function Pl(e){var t=zn(e);if(mu(t))return e}function Uu(e,t){if(e==="change")return t}var zu=!1;if(pa){var Ur;if(pa){var zr="oninput"in document;if(!zr){var Mu=document.createElement("div");Mu.setAttribute("oninput","return;"),zr=typeof Mu.oninput=="function"}Ur=zr}else Ur=!1;zu=Ur&&(!document.documentMode||9<document.documentMode)}function Lu(){$n&&($n.detachEvent("onpropertychange",qu),In=$n=null)}function qu(e){if(e.propertyName==="value"&&Pl(In)){var t=[];Du(t,In,e,Nr(e)),wu(K0,t)}}function X0(e,t,a){e==="focusin"?(Lu(),$n=t,In=a,$n.attachEvent("onpropertychange",qu)):e==="focusout"&&Lu()}function Q0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Pl(In)}function J0(e,t){if(e==="click")return Pl(t)}function Z0(e,t){if(e==="input"||e==="change")return Pl(t)}function P0(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Bt=typeof Object.is=="function"?Object.is:P0;function Vn(e,t){if(Bt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var a=Object.keys(e),n=Object.keys(t);if(a.length!==n.length)return!1;for(n=0;n<a.length;n++){var o=a[n];if(!le.call(t,o)||!Bt(e[o],t[o]))return!1}return!0}function Bu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Hu(e,t){var a=Bu(e);e=0;for(var n;a;){if(a.nodeType===3){if(n=e+a.textContent.length,e<=t&&n>=t)return{node:a,offset:t-e};e=n}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Bu(a)}}function $u(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?$u(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Iu(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Gl(e.document);t instanceof e.HTMLIFrameElement;){try{var a=typeof t.contentWindow.location.href=="string"}catch{a=!1}if(a)e=t.contentWindow;else break;t=Gl(e.document)}return t}function Mr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var W0=pa&&"documentMode"in document&&11>=document.documentMode,Is=null,Lr=null,Gn=null,qr=!1;function Vu(e,t,a){var n=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;qr||Is==null||Is!==Gl(n)||(n=Is,"selectionStart"in n&&Mr(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Gn&&Vn(Gn,n)||(Gn=n,n=Bi(Lr,"onSelect"),0<n.length&&(t=new Jl("onSelect","select",null,t,a),e.push({event:t,listeners:n}),t.target=Is)))}function us(e,t){var a={};return a[e.toLowerCase()]=t.toLowerCase(),a["Webkit"+e]="webkit"+t,a["Moz"+e]="moz"+t,a}var Vs={animationend:us("Animation","AnimationEnd"),animationiteration:us("Animation","AnimationIteration"),animationstart:us("Animation","AnimationStart"),transitionrun:us("Transition","TransitionRun"),transitionstart:us("Transition","TransitionStart"),transitioncancel:us("Transition","TransitionCancel"),transitionend:us("Transition","TransitionEnd")},Br={},Gu={};pa&&(Gu=document.createElement("div").style,"AnimationEvent"in window||(delete Vs.animationend.animation,delete Vs.animationiteration.animation,delete Vs.animationstart.animation),"TransitionEvent"in window||delete Vs.transitionend.transition);function ds(e){if(Br[e])return Br[e];if(!Vs[e])return e;var t=Vs[e],a;for(a in t)if(t.hasOwnProperty(a)&&a in Gu)return Br[e]=t[a];return e}var Yu=ds("animationend"),Ku=ds("animationiteration"),Xu=ds("animationstart"),F0=ds("transitionrun"),eg=ds("transitionstart"),tg=ds("transitioncancel"),Qu=ds("transitionend"),Ju=new Map,Hr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Hr.push("scrollEnd");function na(e,t){Ju.set(e,t),os(t,[e])}var Wl=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Zt=[],Gs=0,$r=0;function Fl(){for(var e=Gs,t=$r=Gs=0;t<e;){var a=Zt[t];Zt[t++]=null;var n=Zt[t];Zt[t++]=null;var o=Zt[t];Zt[t++]=null;var u=Zt[t];if(Zt[t++]=null,n!==null&&o!==null){var m=n.pending;m===null?o.next=o:(o.next=m.next,m.next=o),n.pending=o}u!==0&&Zu(a,o,u)}}function ei(e,t,a,n){Zt[Gs++]=e,Zt[Gs++]=t,Zt[Gs++]=a,Zt[Gs++]=n,$r|=n,e.lanes|=n,e=e.alternate,e!==null&&(e.lanes|=n)}function Ir(e,t,a,n){return ei(e,t,a,n),ti(e)}function fs(e,t){return ei(e,null,null,t),ti(e)}function Zu(e,t,a){e.lanes|=a;var n=e.alternate;n!==null&&(n.lanes|=a);for(var o=!1,u=e.return;u!==null;)u.childLanes|=a,n=u.alternate,n!==null&&(n.childLanes|=a),u.tag===22&&(e=u.stateNode,e===null||e._visibility&1||(o=!0)),e=u,u=u.return;return e.tag===3?(u=e.stateNode,o&&t!==null&&(o=31-qt(a),e=u.hiddenUpdates,n=e[o],n===null?e[o]=[t]:n.push(t),t.lane=a|536870912),u):null}function ti(e){if(50<fl)throw fl=0,Wo=null,Error(r(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Ys={};function ag(e,t,a,n){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ht(e,t,a,n){return new ag(e,t,a,n)}function Vr(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ba(e,t){var a=e.alternate;return a===null?(a=Ht(e.tag,t,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=t,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,t=e.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function Pu(e,t){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,t=a.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function ai(e,t,a,n,o,u){var m=0;if(n=e,typeof e=="function")Vr(e)&&(m=1);else if(typeof e=="string")m=rp(e,a,J.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case be:return e=Ht(31,a,t,o),e.elementType=be,e.lanes=u,e;case q:return hs(a.children,o,u,t);case L:m=8,o|=24;break;case W:return e=Ht(12,a,t,o|2),e.elementType=W,e.lanes=u,e;case he:return e=Ht(13,a,t,o),e.elementType=he,e.lanes=u,e;case fe:return e=Ht(19,a,t,o),e.elementType=fe,e.lanes=u,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case k:m=10;break e;case Z:m=9;break e;case te:m=11;break e;case ae:m=14;break e;case we:m=16,n=null;break e}m=29,a=Error(r(130,e===null?"null":typeof e,"")),n=null}return t=Ht(m,a,t,o),t.elementType=e,t.type=n,t.lanes=u,t}function hs(e,t,a,n){return e=Ht(7,e,n,t),e.lanes=a,e}function Gr(e,t,a){return e=Ht(6,e,null,t),e.lanes=a,e}function Wu(e){var t=Ht(18,null,null,0);return t.stateNode=e,t}function Yr(e,t,a){return t=Ht(4,e.children!==null?e.children:[],e.key,t),t.lanes=a,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Fu=new WeakMap;function Pt(e,t){if(typeof e=="object"&&e!==null){var a=Fu.get(e);return a!==void 0?a:(t={value:e,source:t,stack:F(t)},Fu.set(e,t),t)}return{value:e,source:t,stack:F(t)}}var Ks=[],Xs=0,si=null,Yn=0,Wt=[],Ft=0,La=null,ua=1,da="";function va(e,t){Ks[Xs++]=Yn,Ks[Xs++]=si,si=e,Yn=t}function ed(e,t,a){Wt[Ft++]=ua,Wt[Ft++]=da,Wt[Ft++]=La,La=e;var n=ua;e=da;var o=32-qt(n)-1;n&=~(1<<o),a+=1;var u=32-qt(t)+o;if(30<u){var m=o-o%5;u=(n&(1<<m)-1).toString(32),n>>=m,o-=m,ua=1<<32-qt(t)+o|a<<o|n,da=u+e}else ua=1<<u|a<<o|n,da=e}function Kr(e){e.return!==null&&(va(e,1),ed(e,1,0))}function Xr(e){for(;e===si;)si=Ks[--Xs],Ks[Xs]=null,Yn=Ks[--Xs],Ks[Xs]=null;for(;e===La;)La=Wt[--Ft],Wt[Ft]=null,da=Wt[--Ft],Wt[Ft]=null,ua=Wt[--Ft],Wt[Ft]=null}function td(e,t){Wt[Ft++]=ua,Wt[Ft++]=da,Wt[Ft++]=La,ua=t.id,da=t.overflow,La=e}var yt=null,tt=null,$e=!1,qa=null,ea=!1,Qr=Error(r(519));function Ba(e){var t=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Kn(Pt(t,e)),Qr}function ad(e){var t=e.stateNode,a=e.type,n=e.memoizedProps;switch(t[xt]=e,t[Ot]=n,a){case"dialog":Le("cancel",t),Le("close",t);break;case"iframe":case"object":case"embed":Le("load",t);break;case"video":case"audio":for(a=0;a<ml.length;a++)Le(ml[a],t);break;case"source":Le("error",t);break;case"img":case"image":case"link":Le("error",t),Le("load",t);break;case"details":Le("toggle",t);break;case"input":Le("invalid",t),gu(t,n.value,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name,!0);break;case"select":Le("invalid",t);break;case"textarea":Le("invalid",t),bu(t,n.value,n.defaultValue,n.children)}a=n.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||t.textContent===""+a||n.suppressHydrationWarning===!0||yh(t.textContent,a)?(n.popover!=null&&(Le("beforetoggle",t),Le("toggle",t)),n.onScroll!=null&&Le("scroll",t),n.onScrollEnd!=null&&Le("scrollend",t),n.onClick!=null&&(t.onclick=ga),t=!0):t=!1,t||Ba(e,!0)}function sd(e){for(yt=e.return;yt;)switch(yt.tag){case 5:case 31:case 13:ea=!1;return;case 27:case 3:ea=!0;return;default:yt=yt.return}}function Qs(e){if(e!==yt)return!1;if(!$e)return sd(e),$e=!0,!1;var t=e.tag,a;if((a=t!==3&&t!==27)&&((a=t===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||hc(e.type,e.memoizedProps)),a=!a),a&&tt&&Ba(e),sd(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));tt=Oh(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));tt=Oh(e)}else t===27?(t=tt,Fa(e.type)?(e=vc,vc=null,tt=e):tt=t):tt=yt?aa(e.stateNode.nextSibling):null;return!0}function ms(){tt=yt=null,$e=!1}function Jr(){var e=qa;return e!==null&&(Ut===null?Ut=e:Ut.push.apply(Ut,e),qa=null),e}function Kn(e){qa===null?qa=[e]:qa.push(e)}var Zr=x(null),gs=null,xa=null;function Ha(e,t,a){$(Zr,t._currentValue),t._currentValue=a}function ya(e){e._currentValue=Zr.current,H(Zr)}function Pr(e,t,a){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===a)break;e=e.return}}function Wr(e,t,a,n){var o=e.child;for(o!==null&&(o.return=e);o!==null;){var u=o.dependencies;if(u!==null){var m=o.child;u=u.firstContext;e:for(;u!==null;){var v=u;u=o;for(var _=0;_<t.length;_++)if(v.context===t[_]){u.lanes|=a,v=u.alternate,v!==null&&(v.lanes|=a),Pr(u.return,a,e),n||(m=null);break e}u=v.next}}else if(o.tag===18){if(m=o.return,m===null)throw Error(r(341));m.lanes|=a,u=m.alternate,u!==null&&(u.lanes|=a),Pr(m,a,e),m=null}else m=o.child;if(m!==null)m.return=o;else for(m=o;m!==null;){if(m===e){m=null;break}if(o=m.sibling,o!==null){o.return=m.return,m=o;break}m=m.return}o=m}}function Js(e,t,a,n){e=null;for(var o=t,u=!1;o!==null;){if(!u){if((o.flags&524288)!==0)u=!0;else if((o.flags&262144)!==0)break}if(o.tag===10){var m=o.alternate;if(m===null)throw Error(r(387));if(m=m.memoizedProps,m!==null){var v=o.type;Bt(o.pendingProps.value,m.value)||(e!==null?e.push(v):e=[v])}}else if(o===ye.current){if(m=o.alternate,m===null)throw Error(r(387));m.memoizedState.memoizedState!==o.memoizedState.memoizedState&&(e!==null?e.push(xl):e=[xl])}o=o.return}e!==null&&Wr(t,e,a,n),t.flags|=262144}function ni(e){for(e=e.firstContext;e!==null;){if(!Bt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function ps(e){gs=e,xa=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function wt(e){return nd(gs,e)}function li(e,t){return gs===null&&ps(e),nd(e,t)}function nd(e,t){var a=t._currentValue;if(t={context:t,memoizedValue:a,next:null},xa===null){if(e===null)throw Error(r(308));xa=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else xa=xa.next=t;return a}var sg=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(a,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(a){return a()})}},ng=l.unstable_scheduleCallback,lg=l.unstable_NormalPriority,ct={$$typeof:k,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Fr(){return{controller:new sg,data:new Map,refCount:0}}function Xn(e){e.refCount--,e.refCount===0&&ng(lg,function(){e.controller.abort()})}var Qn=null,eo=0,Zs=0,Ps=null;function ig(e,t){if(Qn===null){var a=Qn=[];eo=0,Zs=nc(),Ps={status:"pending",value:void 0,then:function(n){a.push(n)}}}return eo++,t.then(ld,ld),t}function ld(){if(--eo===0&&Qn!==null){Ps!==null&&(Ps.status="fulfilled");var e=Qn;Qn=null,Zs=0,Ps=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function rg(e,t){var a=[],n={status:"pending",value:null,reason:null,then:function(o){a.push(o)}};return e.then(function(){n.status="fulfilled",n.value=t;for(var o=0;o<a.length;o++)(0,a[o])(t)},function(o){for(n.status="rejected",n.reason=o,o=0;o<a.length;o++)(0,a[o])(void 0)}),n}var id=A.S;A.S=function(e,t){Gf=Ye(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&ig(e,t),id!==null&&id(e,t)};var bs=x(null);function to(){var e=bs.current;return e!==null?e:Fe.pooledCache}function ii(e,t){t===null?$(bs,bs.current):$(bs,t.pool)}function rd(){var e=to();return e===null?null:{parent:ct._currentValue,pool:e}}var Ws=Error(r(460)),ao=Error(r(474)),ri=Error(r(542)),oi={then:function(){}};function od(e){return e=e.status,e==="fulfilled"||e==="rejected"}function cd(e,t,a){switch(a=e[a],a===void 0?e.push(t):a!==t&&(t.then(ga,ga),t=a),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,dd(e),e;default:if(typeof t.status=="string")t.then(ga,ga);else{if(e=Fe,e!==null&&100<e.shellSuspendCounter)throw Error(r(482));e=t,e.status="pending",e.then(function(n){if(t.status==="pending"){var o=t;o.status="fulfilled",o.value=n}},function(n){if(t.status==="pending"){var o=t;o.status="rejected",o.reason=n}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,dd(e),e}throw xs=t,Ws}}function vs(e){try{var t=e._init;return t(e._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(xs=a,Ws):a}}var xs=null;function ud(){if(xs===null)throw Error(r(459));var e=xs;return xs=null,e}function dd(e){if(e===Ws||e===ri)throw Error(r(483))}var Fs=null,Jn=0;function ci(e){var t=Jn;return Jn+=1,Fs===null&&(Fs=[]),cd(Fs,e,t)}function Zn(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function ui(e,t){throw t.$$typeof===j?Error(r(525)):(e=Object.prototype.toString.call(t),Error(r(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function fd(e){function t(O,E){if(e){var U=O.deletions;U===null?(O.deletions=[E],O.flags|=16):U.push(E)}}function a(O,E){if(!e)return null;for(;E!==null;)t(O,E),E=E.sibling;return null}function n(O){for(var E=new Map;O!==null;)O.key!==null?E.set(O.key,O):E.set(O.index,O),O=O.sibling;return E}function o(O,E){return O=ba(O,E),O.index=0,O.sibling=null,O}function u(O,E,U){return O.index=U,e?(U=O.alternate,U!==null?(U=U.index,U<E?(O.flags|=67108866,E):U):(O.flags|=67108866,E)):(O.flags|=1048576,E)}function m(O){return e&&O.alternate===null&&(O.flags|=67108866),O}function v(O,E,U,P){return E===null||E.tag!==6?(E=Gr(U,O.mode,P),E.return=O,E):(E=o(E,U),E.return=O,E)}function _(O,E,U,P){var Ne=U.type;return Ne===q?X(O,E,U.props.children,P,U.key):E!==null&&(E.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===we&&vs(Ne)===E.type)?(E=o(E,U.props),Zn(E,U),E.return=O,E):(E=ai(U.type,U.key,U.props,null,O.mode,P),Zn(E,U),E.return=O,E)}function z(O,E,U,P){return E===null||E.tag!==4||E.stateNode.containerInfo!==U.containerInfo||E.stateNode.implementation!==U.implementation?(E=Yr(U,O.mode,P),E.return=O,E):(E=o(E,U.children||[]),E.return=O,E)}function X(O,E,U,P,Ne){return E===null||E.tag!==7?(E=hs(U,O.mode,P,Ne),E.return=O,E):(E=o(E,U),E.return=O,E)}function ee(O,E,U){if(typeof E=="string"&&E!==""||typeof E=="number"||typeof E=="bigint")return E=Gr(""+E,O.mode,U),E.return=O,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case T:return U=ai(E.type,E.key,E.props,null,O.mode,U),Zn(U,E),U.return=O,U;case C:return E=Yr(E,O.mode,U),E.return=O,E;case we:return E=vs(E),ee(O,E,U)}if(ne(E)||se(E))return E=hs(E,O.mode,U,null),E.return=O,E;if(typeof E.then=="function")return ee(O,ci(E),U);if(E.$$typeof===k)return ee(O,li(O,E),U);ui(O,E)}return null}function B(O,E,U,P){var Ne=E!==null?E.key:null;if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return Ne!==null?null:v(O,E,""+U,P);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case T:return U.key===Ne?_(O,E,U,P):null;case C:return U.key===Ne?z(O,E,U,P):null;case we:return U=vs(U),B(O,E,U,P)}if(ne(U)||se(U))return Ne!==null?null:X(O,E,U,P,null);if(typeof U.then=="function")return B(O,E,ci(U),P);if(U.$$typeof===k)return B(O,E,li(O,U),P);ui(O,U)}return null}function V(O,E,U,P,Ne){if(typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint")return O=O.get(U)||null,v(E,O,""+P,Ne);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case T:return O=O.get(P.key===null?U:P.key)||null,_(E,O,P,Ne);case C:return O=O.get(P.key===null?U:P.key)||null,z(E,O,P,Ne);case we:return P=vs(P),V(O,E,U,P,Ne)}if(ne(P)||se(P))return O=O.get(U)||null,X(E,O,P,Ne,null);if(typeof P.then=="function")return V(O,E,U,ci(P),Ne);if(P.$$typeof===k)return V(O,E,U,li(E,P),Ne);ui(E,P)}return null}function xe(O,E,U,P){for(var Ne=null,Ve=null,_e=E,De=E=0,He=null;_e!==null&&De<U.length;De++){_e.index>De?(He=_e,_e=null):He=_e.sibling;var Ge=B(O,_e,U[De],P);if(Ge===null){_e===null&&(_e=He);break}e&&_e&&Ge.alternate===null&&t(O,_e),E=u(Ge,E,De),Ve===null?Ne=Ge:Ve.sibling=Ge,Ve=Ge,_e=He}if(De===U.length)return a(O,_e),$e&&va(O,De),Ne;if(_e===null){for(;De<U.length;De++)_e=ee(O,U[De],P),_e!==null&&(E=u(_e,E,De),Ve===null?Ne=_e:Ve.sibling=_e,Ve=_e);return $e&&va(O,De),Ne}for(_e=n(_e);De<U.length;De++)He=V(_e,O,De,U[De],P),He!==null&&(e&&He.alternate!==null&&_e.delete(He.key===null?De:He.key),E=u(He,E,De),Ve===null?Ne=He:Ve.sibling=He,Ve=He);return e&&_e.forEach(function(ns){return t(O,ns)}),$e&&va(O,De),Ne}function Ee(O,E,U,P){if(U==null)throw Error(r(151));for(var Ne=null,Ve=null,_e=E,De=E=0,He=null,Ge=U.next();_e!==null&&!Ge.done;De++,Ge=U.next()){_e.index>De?(He=_e,_e=null):He=_e.sibling;var ns=B(O,_e,Ge.value,P);if(ns===null){_e===null&&(_e=He);break}e&&_e&&ns.alternate===null&&t(O,_e),E=u(ns,E,De),Ve===null?Ne=ns:Ve.sibling=ns,Ve=ns,_e=He}if(Ge.done)return a(O,_e),$e&&va(O,De),Ne;if(_e===null){for(;!Ge.done;De++,Ge=U.next())Ge=ee(O,Ge.value,P),Ge!==null&&(E=u(Ge,E,De),Ve===null?Ne=Ge:Ve.sibling=Ge,Ve=Ge);return $e&&va(O,De),Ne}for(_e=n(_e);!Ge.done;De++,Ge=U.next())Ge=V(_e,O,De,Ge.value,P),Ge!==null&&(e&&Ge.alternate!==null&&_e.delete(Ge.key===null?De:Ge.key),E=u(Ge,E,De),Ve===null?Ne=Ge:Ve.sibling=Ge,Ve=Ge);return e&&_e.forEach(function(vp){return t(O,vp)}),$e&&va(O,De),Ne}function We(O,E,U,P){if(typeof U=="object"&&U!==null&&U.type===q&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case T:e:{for(var Ne=U.key;E!==null;){if(E.key===Ne){if(Ne=U.type,Ne===q){if(E.tag===7){a(O,E.sibling),P=o(E,U.props.children),P.return=O,O=P;break e}}else if(E.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===we&&vs(Ne)===E.type){a(O,E.sibling),P=o(E,U.props),Zn(P,U),P.return=O,O=P;break e}a(O,E);break}else t(O,E);E=E.sibling}U.type===q?(P=hs(U.props.children,O.mode,P,U.key),P.return=O,O=P):(P=ai(U.type,U.key,U.props,null,O.mode,P),Zn(P,U),P.return=O,O=P)}return m(O);case C:e:{for(Ne=U.key;E!==null;){if(E.key===Ne)if(E.tag===4&&E.stateNode.containerInfo===U.containerInfo&&E.stateNode.implementation===U.implementation){a(O,E.sibling),P=o(E,U.children||[]),P.return=O,O=P;break e}else{a(O,E);break}else t(O,E);E=E.sibling}P=Yr(U,O.mode,P),P.return=O,O=P}return m(O);case we:return U=vs(U),We(O,E,U,P)}if(ne(U))return xe(O,E,U,P);if(se(U)){if(Ne=se(U),typeof Ne!="function")throw Error(r(150));return U=Ne.call(U),Ee(O,E,U,P)}if(typeof U.then=="function")return We(O,E,ci(U),P);if(U.$$typeof===k)return We(O,E,li(O,U),P);ui(O,U)}return typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint"?(U=""+U,E!==null&&E.tag===6?(a(O,E.sibling),P=o(E,U),P.return=O,O=P):(a(O,E),P=Gr(U,O.mode,P),P.return=O,O=P),m(O)):a(O,E)}return function(O,E,U,P){try{Jn=0;var Ne=We(O,E,U,P);return Fs=null,Ne}catch(_e){if(_e===Ws||_e===ri)throw _e;var Ve=Ht(29,_e,null,O.mode);return Ve.lanes=P,Ve.return=O,Ve}finally{}}}var ys=fd(!0),hd=fd(!1),$a=!1;function so(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function no(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Ia(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Va(e,t,a){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,(Ke&2)!==0){var o=n.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),n.pending=t,t=ti(e),Zu(e,null,a),t}return ei(e,n,t,a),ti(e)}function Pn(e,t,a){if(t=t.updateQueue,t!==null&&(t=t.shared,(a&4194048)!==0)){var n=t.lanes;n&=e.pendingLanes,a|=n,t.lanes=a,nu(e,a)}}function lo(e,t){var a=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,a===n)){var o=null,u=null;if(a=a.firstBaseUpdate,a!==null){do{var m={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};u===null?o=u=m:u=u.next=m,a=a.next}while(a!==null);u===null?o=u=t:u=u.next=t}else o=u=t;a={baseState:n.baseState,firstBaseUpdate:o,lastBaseUpdate:u,shared:n.shared,callbacks:n.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=t:e.next=t,a.lastBaseUpdate=t}var io=!1;function Wn(){if(io){var e=Ps;if(e!==null)throw e}}function Fn(e,t,a,n){io=!1;var o=e.updateQueue;$a=!1;var u=o.firstBaseUpdate,m=o.lastBaseUpdate,v=o.shared.pending;if(v!==null){o.shared.pending=null;var _=v,z=_.next;_.next=null,m===null?u=z:m.next=z,m=_;var X=e.alternate;X!==null&&(X=X.updateQueue,v=X.lastBaseUpdate,v!==m&&(v===null?X.firstBaseUpdate=z:v.next=z,X.lastBaseUpdate=_))}if(u!==null){var ee=o.baseState;m=0,X=z=_=null,v=u;do{var B=v.lane&-536870913,V=B!==v.lane;if(V?(Be&B)===B:(n&B)===B){B!==0&&B===Zs&&(io=!0),X!==null&&(X=X.next={lane:0,tag:v.tag,payload:v.payload,callback:null,next:null});e:{var xe=e,Ee=v;B=t;var We=a;switch(Ee.tag){case 1:if(xe=Ee.payload,typeof xe=="function"){ee=xe.call(We,ee,B);break e}ee=xe;break e;case 3:xe.flags=xe.flags&-65537|128;case 0:if(xe=Ee.payload,B=typeof xe=="function"?xe.call(We,ee,B):xe,B==null)break e;ee=S({},ee,B);break e;case 2:$a=!0}}B=v.callback,B!==null&&(e.flags|=64,V&&(e.flags|=8192),V=o.callbacks,V===null?o.callbacks=[B]:V.push(B))}else V={lane:B,tag:v.tag,payload:v.payload,callback:v.callback,next:null},X===null?(z=X=V,_=ee):X=X.next=V,m|=B;if(v=v.next,v===null){if(v=o.shared.pending,v===null)break;V=v,v=V.next,V.next=null,o.lastBaseUpdate=V,o.shared.pending=null}}while(!0);X===null&&(_=ee),o.baseState=_,o.firstBaseUpdate=z,o.lastBaseUpdate=X,u===null&&(o.shared.lanes=0),Qa|=m,e.lanes=m,e.memoizedState=ee}}function md(e,t){if(typeof e!="function")throw Error(r(191,e));e.call(t)}function gd(e,t){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)md(a[e],t)}var en=x(null),di=x(0);function pd(e,t){e=Oa,$(di,e),$(en,t),Oa=e|t.baseLanes}function ro(){$(di,Oa),$(en,en.current)}function oo(){Oa=di.current,H(en),H(di)}var $t=x(null),ta=null;function Ga(e){var t=e.alternate;$(rt,rt.current&1),$($t,e),ta===null&&(t===null||en.current!==null||t.memoizedState!==null)&&(ta=e)}function co(e){$(rt,rt.current),$($t,e),ta===null&&(ta=e)}function bd(e){e.tag===22?($(rt,rt.current),$($t,e),ta===null&&(ta=e)):Ya()}function Ya(){$(rt,rt.current),$($t,$t.current)}function It(e){H($t),ta===e&&(ta=null),H(rt)}var rt=x(0);function fi(e){for(var t=e;t!==null;){if(t.tag===13){var a=t.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||pc(a)||bc(a)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var wa=0,Re=null,Ze=null,ut=null,hi=!1,tn=!1,ws=!1,mi=0,el=0,an=null,og=0;function nt(){throw Error(r(321))}function uo(e,t){if(t===null)return!1;for(var a=0;a<t.length&&a<e.length;a++)if(!Bt(e[a],t[a]))return!1;return!0}function fo(e,t,a,n,o,u){return wa=u,Re=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,A.H=e===null||e.memoizedState===null?ef:To,ws=!1,u=a(n,o),ws=!1,tn&&(u=xd(t,a,n,o)),vd(e),u}function vd(e){A.H=sl;var t=Ze!==null&&Ze.next!==null;if(wa=0,ut=Ze=Re=null,hi=!1,el=0,an=null,t)throw Error(r(300));e===null||dt||(e=e.dependencies,e!==null&&ni(e)&&(dt=!0))}function xd(e,t,a,n){Re=e;var o=0;do{if(tn&&(an=null),el=0,tn=!1,25<=o)throw Error(r(301));if(o+=1,ut=Ze=null,e.updateQueue!=null){var u=e.updateQueue;u.lastEffect=null,u.events=null,u.stores=null,u.memoCache!=null&&(u.memoCache.index=0)}A.H=tf,u=t(a,n)}while(tn);return u}function cg(){var e=A.H,t=e.useState()[0];return t=typeof t.then=="function"?tl(t):t,e=e.useState()[0],(Ze!==null?Ze.memoizedState:null)!==e&&(Re.flags|=1024),t}function ho(){var e=mi!==0;return mi=0,e}function mo(e,t,a){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a}function go(e){if(hi){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}hi=!1}wa=0,ut=Ze=Re=null,tn=!1,el=mi=0,an=null}function Tt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ut===null?Re.memoizedState=ut=e:ut=ut.next=e,ut}function ot(){if(Ze===null){var e=Re.alternate;e=e!==null?e.memoizedState:null}else e=Ze.next;var t=ut===null?Re.memoizedState:ut.next;if(t!==null)ut=t,Ze=e;else{if(e===null)throw Re.alternate===null?Error(r(467)):Error(r(310));Ze=e,e={memoizedState:Ze.memoizedState,baseState:Ze.baseState,baseQueue:Ze.baseQueue,queue:Ze.queue,next:null},ut===null?Re.memoizedState=ut=e:ut=ut.next=e}return ut}function gi(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function tl(e){var t=el;return el+=1,an===null&&(an=[]),e=cd(an,e,t),t=Re,(ut===null?t.memoizedState:ut.next)===null&&(t=t.alternate,A.H=t===null||t.memoizedState===null?ef:To),e}function pi(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return tl(e);if(e.$$typeof===k)return wt(e)}throw Error(r(438,String(e)))}function po(e){var t=null,a=Re.updateQueue;if(a!==null&&(t=a.memoCache),t==null){var n=Re.alternate;n!==null&&(n=n.updateQueue,n!==null&&(n=n.memoCache,n!=null&&(t={data:n.data.map(function(o){return o.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),a===null&&(a=gi(),Re.updateQueue=a),a.memoCache=t,a=t.data[t.index],a===void 0)for(a=t.data[t.index]=Array(e),n=0;n<e;n++)a[n]=ke;return t.index++,a}function _a(e,t){return typeof t=="function"?t(e):t}function bi(e){var t=ot();return bo(t,Ze,e)}function bo(e,t,a){var n=e.queue;if(n===null)throw Error(r(311));n.lastRenderedReducer=a;var o=e.baseQueue,u=n.pending;if(u!==null){if(o!==null){var m=o.next;o.next=u.next,u.next=m}t.baseQueue=o=u,n.pending=null}if(u=e.baseState,o===null)e.memoizedState=u;else{t=o.next;var v=m=null,_=null,z=t,X=!1;do{var ee=z.lane&-536870913;if(ee!==z.lane?(Be&ee)===ee:(wa&ee)===ee){var B=z.revertLane;if(B===0)_!==null&&(_=_.next={lane:0,revertLane:0,gesture:null,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null}),ee===Zs&&(X=!0);else if((wa&B)===B){z=z.next,B===Zs&&(X=!0);continue}else ee={lane:0,revertLane:z.revertLane,gesture:null,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},_===null?(v=_=ee,m=u):_=_.next=ee,Re.lanes|=B,Qa|=B;ee=z.action,ws&&a(u,ee),u=z.hasEagerState?z.eagerState:a(u,ee)}else B={lane:ee,revertLane:z.revertLane,gesture:z.gesture,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},_===null?(v=_=B,m=u):_=_.next=B,Re.lanes|=ee,Qa|=ee;z=z.next}while(z!==null&&z!==t);if(_===null?m=u:_.next=v,!Bt(u,e.memoizedState)&&(dt=!0,X&&(a=Ps,a!==null)))throw a;e.memoizedState=u,e.baseState=m,e.baseQueue=_,n.lastRenderedState=u}return o===null&&(n.lanes=0),[e.memoizedState,n.dispatch]}function vo(e){var t=ot(),a=t.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=e;var n=a.dispatch,o=a.pending,u=t.memoizedState;if(o!==null){a.pending=null;var m=o=o.next;do u=e(u,m.action),m=m.next;while(m!==o);Bt(u,t.memoizedState)||(dt=!0),t.memoizedState=u,t.baseQueue===null&&(t.baseState=u),a.lastRenderedState=u}return[u,n]}function yd(e,t,a){var n=Re,o=ot(),u=$e;if(u){if(a===void 0)throw Error(r(407));a=a()}else a=t();var m=!Bt((Ze||o).memoizedState,a);if(m&&(o.memoizedState=a,dt=!0),o=o.queue,wo(Sd.bind(null,n,o,e),[e]),o.getSnapshot!==t||m||ut!==null&&ut.memoizedState.tag&1){if(n.flags|=2048,sn(9,{destroy:void 0},_d.bind(null,n,o,a,t),null),Fe===null)throw Error(r(349));u||(wa&127)!==0||wd(n,t,a)}return a}function wd(e,t,a){e.flags|=16384,e={getSnapshot:t,value:a},t=Re.updateQueue,t===null?(t=gi(),Re.updateQueue=t,t.stores=[e]):(a=t.stores,a===null?t.stores=[e]:a.push(e))}function _d(e,t,a,n){t.value=a,t.getSnapshot=n,jd(t)&&Nd(e)}function Sd(e,t,a){return a(function(){jd(t)&&Nd(e)})}function jd(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!Bt(e,a)}catch{return!0}}function Nd(e){var t=fs(e,2);t!==null&&zt(t,e,2)}function xo(e){var t=Tt();if(typeof e=="function"){var a=e;if(e=a(),ws){Ua(!0);try{a()}finally{Ua(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:_a,lastRenderedState:e},t}function Ed(e,t,a,n){return e.baseState=a,bo(e,Ze,typeof n=="function"?n:_a)}function ug(e,t,a,n,o){if(yi(e))throw Error(r(485));if(e=t.action,e!==null){var u={payload:o,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(m){u.listeners.push(m)}};A.T!==null?a(!0):u.isTransition=!1,n(u),a=t.pending,a===null?(u.next=t.pending=u,Td(t,u)):(u.next=a.next,t.pending=a.next=u)}}function Td(e,t){var a=t.action,n=t.payload,o=e.state;if(t.isTransition){var u=A.T,m={};A.T=m;try{var v=a(o,n),_=A.S;_!==null&&_(m,v),Ad(e,t,v)}catch(z){yo(e,t,z)}finally{u!==null&&m.types!==null&&(u.types=m.types),A.T=u}}else try{u=a(o,n),Ad(e,t,u)}catch(z){yo(e,t,z)}}function Ad(e,t,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(n){Od(e,t,n)},function(n){return yo(e,t,n)}):Od(e,t,a)}function Od(e,t,a){t.status="fulfilled",t.value=a,kd(t),e.state=a,t=e.pending,t!==null&&(a=t.next,a===t?e.pending=null:(a=a.next,t.next=a,Td(e,a)))}function yo(e,t,a){var n=e.pending;if(e.pending=null,n!==null){n=n.next;do t.status="rejected",t.reason=a,kd(t),t=t.next;while(t!==n)}e.action=null}function kd(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Cd(e,t){return t}function Rd(e,t){if($e){var a=Fe.formState;if(a!==null){e:{var n=Re;if($e){if(tt){t:{for(var o=tt,u=ea;o.nodeType!==8;){if(!u){o=null;break t}if(o=aa(o.nextSibling),o===null){o=null;break t}}u=o.data,o=u==="F!"||u==="F"?o:null}if(o){tt=aa(o.nextSibling),n=o.data==="F!";break e}}Ba(n)}n=!1}n&&(t=a[0])}}return a=Tt(),a.memoizedState=a.baseState=t,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Cd,lastRenderedState:t},a.queue=n,a=Pd.bind(null,Re,n),n.dispatch=a,n=xo(!1),u=Eo.bind(null,Re,!1,n.queue),n=Tt(),o={state:t,dispatch:null,action:e,pending:null},n.queue=o,a=ug.bind(null,Re,o,u,a),o.dispatch=a,n.memoizedState=e,[t,a,!1]}function Dd(e){var t=ot();return Ud(t,Ze,e)}function Ud(e,t,a){if(t=bo(e,t,Cd)[0],e=bi(_a)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var n=tl(t)}catch(m){throw m===Ws?ri:m}else n=t;t=ot();var o=t.queue,u=o.dispatch;return a!==t.memoizedState&&(Re.flags|=2048,sn(9,{destroy:void 0},dg.bind(null,o,a),null)),[n,u,e]}function dg(e,t){e.action=t}function zd(e){var t=ot(),a=Ze;if(a!==null)return Ud(t,a,e);ot(),t=t.memoizedState,a=ot();var n=a.queue.dispatch;return a.memoizedState=e,[t,n,!1]}function sn(e,t,a,n){return e={tag:e,create:a,deps:n,inst:t,next:null},t=Re.updateQueue,t===null&&(t=gi(),Re.updateQueue=t),a=t.lastEffect,a===null?t.lastEffect=e.next=e:(n=a.next,a.next=e,e.next=n,t.lastEffect=e),e}function Md(){return ot().memoizedState}function vi(e,t,a,n){var o=Tt();Re.flags|=e,o.memoizedState=sn(1|t,{destroy:void 0},a,n===void 0?null:n)}function xi(e,t,a,n){var o=ot();n=n===void 0?null:n;var u=o.memoizedState.inst;Ze!==null&&n!==null&&uo(n,Ze.memoizedState.deps)?o.memoizedState=sn(t,u,a,n):(Re.flags|=e,o.memoizedState=sn(1|t,u,a,n))}function Ld(e,t){vi(8390656,8,e,t)}function wo(e,t){xi(2048,8,e,t)}function fg(e){Re.flags|=4;var t=Re.updateQueue;if(t===null)t=gi(),Re.updateQueue=t,t.events=[e];else{var a=t.events;a===null?t.events=[e]:a.push(e)}}function qd(e){var t=ot().memoizedState;return fg({ref:t,nextImpl:e}),function(){if((Ke&2)!==0)throw Error(r(440));return t.impl.apply(void 0,arguments)}}function Bd(e,t){return xi(4,2,e,t)}function Hd(e,t){return xi(4,4,e,t)}function $d(e,t){if(typeof t=="function"){e=e();var a=t(e);return function(){typeof a=="function"?a():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Id(e,t,a){a=a!=null?a.concat([e]):null,xi(4,4,$d.bind(null,t,e),a)}function _o(){}function Vd(e,t){var a=ot();t=t===void 0?null:t;var n=a.memoizedState;return t!==null&&uo(t,n[1])?n[0]:(a.memoizedState=[e,t],e)}function Gd(e,t){var a=ot();t=t===void 0?null:t;var n=a.memoizedState;if(t!==null&&uo(t,n[1]))return n[0];if(n=e(),ws){Ua(!0);try{e()}finally{Ua(!1)}}return a.memoizedState=[n,t],n}function So(e,t,a){return a===void 0||(wa&1073741824)!==0&&(Be&261930)===0?e.memoizedState=t:(e.memoizedState=a,e=Kf(),Re.lanes|=e,Qa|=e,a)}function Yd(e,t,a,n){return Bt(a,t)?a:en.current!==null?(e=So(e,a,n),Bt(e,t)||(dt=!0),e):(wa&42)===0||(wa&1073741824)!==0&&(Be&261930)===0?(dt=!0,e.memoizedState=a):(e=Kf(),Re.lanes|=e,Qa|=e,t)}function Kd(e,t,a,n,o){var u=R.p;R.p=u!==0&&8>u?u:8;var m=A.T,v={};A.T=v,Eo(e,!1,t,a);try{var _=o(),z=A.S;if(z!==null&&z(v,_),_!==null&&typeof _=="object"&&typeof _.then=="function"){var X=rg(_,n);al(e,t,X,Yt(e))}else al(e,t,n,Yt(e))}catch(ee){al(e,t,{then:function(){},status:"rejected",reason:ee},Yt())}finally{R.p=u,m!==null&&v.types!==null&&(m.types=v.types),A.T=m}}function hg(){}function jo(e,t,a,n){if(e.tag!==5)throw Error(r(476));var o=Xd(e).queue;Kd(e,o,t,re,a===null?hg:function(){return Qd(e),a(n)})}function Xd(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:re,baseState:re,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:_a,lastRenderedState:re},next:null};var a={};return t.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:_a,lastRenderedState:a},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Qd(e){var t=Xd(e);t.next===null&&(t=e.alternate.memoizedState),al(e,t.next.queue,{},Yt())}function No(){return wt(xl)}function Jd(){return ot().memoizedState}function Zd(){return ot().memoizedState}function mg(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var a=Yt();e=Ia(a);var n=Va(t,e,a);n!==null&&(zt(n,t,a),Pn(n,t,a)),t={cache:Fr()},e.payload=t;return}t=t.return}}function gg(e,t,a){var n=Yt();a={lane:n,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},yi(e)?Wd(t,a):(a=Ir(e,t,a,n),a!==null&&(zt(a,e,n),Fd(a,t,n)))}function Pd(e,t,a){var n=Yt();al(e,t,a,n)}function al(e,t,a,n){var o={lane:n,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(yi(e))Wd(t,o);else{var u=e.alternate;if(e.lanes===0&&(u===null||u.lanes===0)&&(u=t.lastRenderedReducer,u!==null))try{var m=t.lastRenderedState,v=u(m,a);if(o.hasEagerState=!0,o.eagerState=v,Bt(v,m))return ei(e,t,o,0),Fe===null&&Fl(),!1}catch{}finally{}if(a=Ir(e,t,o,n),a!==null)return zt(a,e,n),Fd(a,t,n),!0}return!1}function Eo(e,t,a,n){if(n={lane:2,revertLane:nc(),gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},yi(e)){if(t)throw Error(r(479))}else t=Ir(e,a,n,2),t!==null&&zt(t,e,2)}function yi(e){var t=e.alternate;return e===Re||t!==null&&t===Re}function Wd(e,t){tn=hi=!0;var a=e.pending;a===null?t.next=t:(t.next=a.next,a.next=t),e.pending=t}function Fd(e,t,a){if((a&4194048)!==0){var n=t.lanes;n&=e.pendingLanes,a|=n,t.lanes=a,nu(e,a)}}var sl={readContext:wt,use:pi,useCallback:nt,useContext:nt,useEffect:nt,useImperativeHandle:nt,useLayoutEffect:nt,useInsertionEffect:nt,useMemo:nt,useReducer:nt,useRef:nt,useState:nt,useDebugValue:nt,useDeferredValue:nt,useTransition:nt,useSyncExternalStore:nt,useId:nt,useHostTransitionStatus:nt,useFormState:nt,useActionState:nt,useOptimistic:nt,useMemoCache:nt,useCacheRefresh:nt};sl.useEffectEvent=nt;var ef={readContext:wt,use:pi,useCallback:function(e,t){return Tt().memoizedState=[e,t===void 0?null:t],e},useContext:wt,useEffect:Ld,useImperativeHandle:function(e,t,a){a=a!=null?a.concat([e]):null,vi(4194308,4,$d.bind(null,t,e),a)},useLayoutEffect:function(e,t){return vi(4194308,4,e,t)},useInsertionEffect:function(e,t){vi(4,2,e,t)},useMemo:function(e,t){var a=Tt();t=t===void 0?null:t;var n=e();if(ws){Ua(!0);try{e()}finally{Ua(!1)}}return a.memoizedState=[n,t],n},useReducer:function(e,t,a){var n=Tt();if(a!==void 0){var o=a(t);if(ws){Ua(!0);try{a(t)}finally{Ua(!1)}}}else o=t;return n.memoizedState=n.baseState=o,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:o},n.queue=e,e=e.dispatch=gg.bind(null,Re,e),[n.memoizedState,e]},useRef:function(e){var t=Tt();return e={current:e},t.memoizedState=e},useState:function(e){e=xo(e);var t=e.queue,a=Pd.bind(null,Re,t);return t.dispatch=a,[e.memoizedState,a]},useDebugValue:_o,useDeferredValue:function(e,t){var a=Tt();return So(a,e,t)},useTransition:function(){var e=xo(!1);return e=Kd.bind(null,Re,e.queue,!0,!1),Tt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,a){var n=Re,o=Tt();if($e){if(a===void 0)throw Error(r(407));a=a()}else{if(a=t(),Fe===null)throw Error(r(349));(Be&127)!==0||wd(n,t,a)}o.memoizedState=a;var u={value:a,getSnapshot:t};return o.queue=u,Ld(Sd.bind(null,n,u,e),[e]),n.flags|=2048,sn(9,{destroy:void 0},_d.bind(null,n,u,a,t),null),a},useId:function(){var e=Tt(),t=Fe.identifierPrefix;if($e){var a=da,n=ua;a=(n&~(1<<32-qt(n)-1)).toString(32)+a,t="_"+t+"R_"+a,a=mi++,0<a&&(t+="H"+a.toString(32)),t+="_"}else a=og++,t="_"+t+"r_"+a.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:No,useFormState:Rd,useActionState:Rd,useOptimistic:function(e){var t=Tt();t.memoizedState=t.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=a,t=Eo.bind(null,Re,!0,a),a.dispatch=t,[e,t]},useMemoCache:po,useCacheRefresh:function(){return Tt().memoizedState=mg.bind(null,Re)},useEffectEvent:function(e){var t=Tt(),a={impl:e};return t.memoizedState=a,function(){if((Ke&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}},To={readContext:wt,use:pi,useCallback:Vd,useContext:wt,useEffect:wo,useImperativeHandle:Id,useInsertionEffect:Bd,useLayoutEffect:Hd,useMemo:Gd,useReducer:bi,useRef:Md,useState:function(){return bi(_a)},useDebugValue:_o,useDeferredValue:function(e,t){var a=ot();return Yd(a,Ze.memoizedState,e,t)},useTransition:function(){var e=bi(_a)[0],t=ot().memoizedState;return[typeof e=="boolean"?e:tl(e),t]},useSyncExternalStore:yd,useId:Jd,useHostTransitionStatus:No,useFormState:Dd,useActionState:Dd,useOptimistic:function(e,t){var a=ot();return Ed(a,Ze,e,t)},useMemoCache:po,useCacheRefresh:Zd};To.useEffectEvent=qd;var tf={readContext:wt,use:pi,useCallback:Vd,useContext:wt,useEffect:wo,useImperativeHandle:Id,useInsertionEffect:Bd,useLayoutEffect:Hd,useMemo:Gd,useReducer:vo,useRef:Md,useState:function(){return vo(_a)},useDebugValue:_o,useDeferredValue:function(e,t){var a=ot();return Ze===null?So(a,e,t):Yd(a,Ze.memoizedState,e,t)},useTransition:function(){var e=vo(_a)[0],t=ot().memoizedState;return[typeof e=="boolean"?e:tl(e),t]},useSyncExternalStore:yd,useId:Jd,useHostTransitionStatus:No,useFormState:zd,useActionState:zd,useOptimistic:function(e,t){var a=ot();return Ze!==null?Ed(a,Ze,e,t):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:po,useCacheRefresh:Zd};tf.useEffectEvent=qd;function Ao(e,t,a,n){t=e.memoizedState,a=a(n,t),a=a==null?t:S({},t,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var Oo={enqueueSetState:function(e,t,a){e=e._reactInternals;var n=Yt(),o=Ia(n);o.payload=t,a!=null&&(o.callback=a),t=Va(e,o,n),t!==null&&(zt(t,e,n),Pn(t,e,n))},enqueueReplaceState:function(e,t,a){e=e._reactInternals;var n=Yt(),o=Ia(n);o.tag=1,o.payload=t,a!=null&&(o.callback=a),t=Va(e,o,n),t!==null&&(zt(t,e,n),Pn(t,e,n))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var a=Yt(),n=Ia(a);n.tag=2,t!=null&&(n.callback=t),t=Va(e,n,a),t!==null&&(zt(t,e,a),Pn(t,e,a))}};function af(e,t,a,n,o,u,m){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,u,m):t.prototype&&t.prototype.isPureReactComponent?!Vn(a,n)||!Vn(o,u):!0}function sf(e,t,a,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(a,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(a,n),t.state!==e&&Oo.enqueueReplaceState(t,t.state,null)}function _s(e,t){var a=t;if("ref"in t){a={};for(var n in t)n!=="ref"&&(a[n]=t[n])}if(e=e.defaultProps){a===t&&(a=S({},a));for(var o in e)a[o]===void 0&&(a[o]=e[o])}return a}function nf(e){Wl(e)}function lf(e){console.error(e)}function rf(e){Wl(e)}function wi(e,t){try{var a=e.onUncaughtError;a(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function of(e,t,a){try{var n=e.onCaughtError;n(a.value,{componentStack:a.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(o){setTimeout(function(){throw o})}}function ko(e,t,a){return a=Ia(a),a.tag=3,a.payload={element:null},a.callback=function(){wi(e,t)},a}function cf(e){return e=Ia(e),e.tag=3,e}function uf(e,t,a,n){var o=a.type.getDerivedStateFromError;if(typeof o=="function"){var u=n.value;e.payload=function(){return o(u)},e.callback=function(){of(t,a,n)}}var m=a.stateNode;m!==null&&typeof m.componentDidCatch=="function"&&(e.callback=function(){of(t,a,n),typeof o!="function"&&(Ja===null?Ja=new Set([this]):Ja.add(this));var v=n.stack;this.componentDidCatch(n.value,{componentStack:v!==null?v:""})})}function pg(e,t,a,n,o){if(a.flags|=32768,n!==null&&typeof n=="object"&&typeof n.then=="function"){if(t=a.alternate,t!==null&&Js(t,a,o,!0),a=$t.current,a!==null){switch(a.tag){case 31:case 13:return ta===null?Di():a.alternate===null&&lt===0&&(lt=3),a.flags&=-257,a.flags|=65536,a.lanes=o,n===oi?a.flags|=16384:(t=a.updateQueue,t===null?a.updateQueue=new Set([n]):t.add(n),tc(e,n,o)),!1;case 22:return a.flags|=65536,n===oi?a.flags|=16384:(t=a.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([n])},a.updateQueue=t):(a=t.retryQueue,a===null?t.retryQueue=new Set([n]):a.add(n)),tc(e,n,o)),!1}throw Error(r(435,a.tag))}return tc(e,n,o),Di(),!1}if($e)return t=$t.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=o,n!==Qr&&(e=Error(r(422),{cause:n}),Kn(Pt(e,a)))):(n!==Qr&&(t=Error(r(423),{cause:n}),Kn(Pt(t,a))),e=e.current.alternate,e.flags|=65536,o&=-o,e.lanes|=o,n=Pt(n,a),o=ko(e.stateNode,n,o),lo(e,o),lt!==4&&(lt=2)),!1;var u=Error(r(520),{cause:n});if(u=Pt(u,a),dl===null?dl=[u]:dl.push(u),lt!==4&&(lt=2),t===null)return!0;n=Pt(n,a),a=t;do{switch(a.tag){case 3:return a.flags|=65536,e=o&-o,a.lanes|=e,e=ko(a.stateNode,n,e),lo(a,e),!1;case 1:if(t=a.type,u=a.stateNode,(a.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||u!==null&&typeof u.componentDidCatch=="function"&&(Ja===null||!Ja.has(u))))return a.flags|=65536,o&=-o,a.lanes|=o,o=cf(o),uf(o,e,a,n),lo(a,o),!1}a=a.return}while(a!==null);return!1}var Co=Error(r(461)),dt=!1;function _t(e,t,a,n){t.child=e===null?hd(t,null,a,n):ys(t,e.child,a,n)}function df(e,t,a,n,o){a=a.render;var u=t.ref;if("ref"in n){var m={};for(var v in n)v!=="ref"&&(m[v]=n[v])}else m=n;return ps(t),n=fo(e,t,a,m,u,o),v=ho(),e!==null&&!dt?(mo(e,t,o),Sa(e,t,o)):($e&&v&&Kr(t),t.flags|=1,_t(e,t,n,o),t.child)}function ff(e,t,a,n,o){if(e===null){var u=a.type;return typeof u=="function"&&!Vr(u)&&u.defaultProps===void 0&&a.compare===null?(t.tag=15,t.type=u,hf(e,t,u,n,o)):(e=ai(a.type,null,n,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(u=e.child,!Bo(e,o)){var m=u.memoizedProps;if(a=a.compare,a=a!==null?a:Vn,a(m,n)&&e.ref===t.ref)return Sa(e,t,o)}return t.flags|=1,e=ba(u,n),e.ref=t.ref,e.return=t,t.child=e}function hf(e,t,a,n,o){if(e!==null){var u=e.memoizedProps;if(Vn(u,n)&&e.ref===t.ref)if(dt=!1,t.pendingProps=n=u,Bo(e,o))(e.flags&131072)!==0&&(dt=!0);else return t.lanes=e.lanes,Sa(e,t,o)}return Ro(e,t,a,n,o)}function mf(e,t,a,n){var o=n.children,u=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.mode==="hidden"){if((t.flags&128)!==0){if(u=u!==null?u.baseLanes|a:a,e!==null){for(n=t.child=e.child,o=0;n!==null;)o=o|n.lanes|n.childLanes,n=n.sibling;n=o&~u}else n=0,t.child=null;return gf(e,t,u,a,n)}if((a&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&ii(t,u!==null?u.cachePool:null),u!==null?pd(t,u):ro(),bd(t);else return n=t.lanes=536870912,gf(e,t,u!==null?u.baseLanes|a:a,a,n)}else u!==null?(ii(t,u.cachePool),pd(t,u),Ya(),t.memoizedState=null):(e!==null&&ii(t,null),ro(),Ya());return _t(e,t,o,a),t.child}function nl(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function gf(e,t,a,n,o){var u=to();return u=u===null?null:{parent:ct._currentValue,pool:u},t.memoizedState={baseLanes:a,cachePool:u},e!==null&&ii(t,null),ro(),bd(t),e!==null&&Js(e,t,n,!0),t.childLanes=o,null}function _i(e,t){return t=ji({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function pf(e,t,a){return ys(t,e.child,null,a),e=_i(t,t.pendingProps),e.flags|=2,It(t),t.memoizedState=null,e}function bg(e,t,a){var n=t.pendingProps,o=(t.flags&128)!==0;if(t.flags&=-129,e===null){if($e){if(n.mode==="hidden")return e=_i(t,n),t.lanes=536870912,nl(null,e);if(co(t),(e=tt)?(e=Ah(e,ea),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:La!==null?{id:ua,overflow:da}:null,retryLane:536870912,hydrationErrors:null},a=Wu(e),a.return=t,t.child=a,yt=t,tt=null)):e=null,e===null)throw Ba(t);return t.lanes=536870912,null}return _i(t,n)}var u=e.memoizedState;if(u!==null){var m=u.dehydrated;if(co(t),o)if(t.flags&256)t.flags&=-257,t=pf(e,t,a);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(r(558));else if(dt||Js(e,t,a,!1),o=(a&e.childLanes)!==0,dt||o){if(n=Fe,n!==null&&(m=lu(n,a),m!==0&&m!==u.retryLane))throw u.retryLane=m,fs(e,m),zt(n,e,m),Co;Di(),t=pf(e,t,a)}else e=u.treeContext,tt=aa(m.nextSibling),yt=t,$e=!0,qa=null,ea=!1,e!==null&&td(t,e),t=_i(t,n),t.flags|=4096;return t}return e=ba(e.child,{mode:n.mode,children:n.children}),e.ref=t.ref,t.child=e,e.return=t,e}function Si(e,t){var a=t.ref;if(a===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(e===null||e.ref!==a)&&(t.flags|=4194816)}}function Ro(e,t,a,n,o){return ps(t),a=fo(e,t,a,n,void 0,o),n=ho(),e!==null&&!dt?(mo(e,t,o),Sa(e,t,o)):($e&&n&&Kr(t),t.flags|=1,_t(e,t,a,o),t.child)}function bf(e,t,a,n,o,u){return ps(t),t.updateQueue=null,a=xd(t,n,a,o),vd(e),n=ho(),e!==null&&!dt?(mo(e,t,u),Sa(e,t,u)):($e&&n&&Kr(t),t.flags|=1,_t(e,t,a,u),t.child)}function vf(e,t,a,n,o){if(ps(t),t.stateNode===null){var u=Ys,m=a.contextType;typeof m=="object"&&m!==null&&(u=wt(m)),u=new a(n,u),t.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,u.updater=Oo,t.stateNode=u,u._reactInternals=t,u=t.stateNode,u.props=n,u.state=t.memoizedState,u.refs={},so(t),m=a.contextType,u.context=typeof m=="object"&&m!==null?wt(m):Ys,u.state=t.memoizedState,m=a.getDerivedStateFromProps,typeof m=="function"&&(Ao(t,a,m,n),u.state=t.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof u.getSnapshotBeforeUpdate=="function"||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(m=u.state,typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount(),m!==u.state&&Oo.enqueueReplaceState(u,u.state,null),Fn(t,n,u,o),Wn(),u.state=t.memoizedState),typeof u.componentDidMount=="function"&&(t.flags|=4194308),n=!0}else if(e===null){u=t.stateNode;var v=t.memoizedProps,_=_s(a,v);u.props=_;var z=u.context,X=a.contextType;m=Ys,typeof X=="object"&&X!==null&&(m=wt(X));var ee=a.getDerivedStateFromProps;X=typeof ee=="function"||typeof u.getSnapshotBeforeUpdate=="function",v=t.pendingProps!==v,X||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(v||z!==m)&&sf(t,u,n,m),$a=!1;var B=t.memoizedState;u.state=B,Fn(t,n,u,o),Wn(),z=t.memoizedState,v||B!==z||$a?(typeof ee=="function"&&(Ao(t,a,ee,n),z=t.memoizedState),(_=$a||af(t,a,_,n,B,z,m))?(X||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount()),typeof u.componentDidMount=="function"&&(t.flags|=4194308)):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=z),u.props=n,u.state=z,u.context=m,n=_):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{u=t.stateNode,no(e,t),m=t.memoizedProps,X=_s(a,m),u.props=X,ee=t.pendingProps,B=u.context,z=a.contextType,_=Ys,typeof z=="object"&&z!==null&&(_=wt(z)),v=a.getDerivedStateFromProps,(z=typeof v=="function"||typeof u.getSnapshotBeforeUpdate=="function")||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(m!==ee||B!==_)&&sf(t,u,n,_),$a=!1,B=t.memoizedState,u.state=B,Fn(t,n,u,o),Wn();var V=t.memoizedState;m!==ee||B!==V||$a||e!==null&&e.dependencies!==null&&ni(e.dependencies)?(typeof v=="function"&&(Ao(t,a,v,n),V=t.memoizedState),(X=$a||af(t,a,X,n,B,V,_)||e!==null&&e.dependencies!==null&&ni(e.dependencies))?(z||typeof u.UNSAFE_componentWillUpdate!="function"&&typeof u.componentWillUpdate!="function"||(typeof u.componentWillUpdate=="function"&&u.componentWillUpdate(n,V,_),typeof u.UNSAFE_componentWillUpdate=="function"&&u.UNSAFE_componentWillUpdate(n,V,_)),typeof u.componentDidUpdate=="function"&&(t.flags|=4),typeof u.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof u.componentDidUpdate!="function"||m===e.memoizedProps&&B===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||m===e.memoizedProps&&B===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=V),u.props=n,u.state=V,u.context=_,n=X):(typeof u.componentDidUpdate!="function"||m===e.memoizedProps&&B===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||m===e.memoizedProps&&B===e.memoizedState||(t.flags|=1024),n=!1)}return u=n,Si(e,t),n=(t.flags&128)!==0,u||n?(u=t.stateNode,a=n&&typeof a.getDerivedStateFromError!="function"?null:u.render(),t.flags|=1,e!==null&&n?(t.child=ys(t,e.child,null,o),t.child=ys(t,null,a,o)):_t(e,t,a,o),t.memoizedState=u.state,e=t.child):e=Sa(e,t,o),e}function xf(e,t,a,n){return ms(),t.flags|=256,_t(e,t,a,n),t.child}var Do={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Uo(e){return{baseLanes:e,cachePool:rd()}}function zo(e,t,a){return e=e!==null?e.childLanes&~a:0,t&&(e|=Gt),e}function yf(e,t,a){var n=t.pendingProps,o=!1,u=(t.flags&128)!==0,m;if((m=u)||(m=e!==null&&e.memoizedState===null?!1:(rt.current&2)!==0),m&&(o=!0,t.flags&=-129),m=(t.flags&32)!==0,t.flags&=-33,e===null){if($e){if(o?Ga(t):Ya(),(e=tt)?(e=Ah(e,ea),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:La!==null?{id:ua,overflow:da}:null,retryLane:536870912,hydrationErrors:null},a=Wu(e),a.return=t,t.child=a,yt=t,tt=null)):e=null,e===null)throw Ba(t);return bc(e)?t.lanes=32:t.lanes=536870912,null}var v=n.children;return n=n.fallback,o?(Ya(),o=t.mode,v=ji({mode:"hidden",children:v},o),n=hs(n,o,a,null),v.return=t,n.return=t,v.sibling=n,t.child=v,n=t.child,n.memoizedState=Uo(a),n.childLanes=zo(e,m,a),t.memoizedState=Do,nl(null,n)):(Ga(t),Mo(t,v))}var _=e.memoizedState;if(_!==null&&(v=_.dehydrated,v!==null)){if(u)t.flags&256?(Ga(t),t.flags&=-257,t=Lo(e,t,a)):t.memoizedState!==null?(Ya(),t.child=e.child,t.flags|=128,t=null):(Ya(),v=n.fallback,o=t.mode,n=ji({mode:"visible",children:n.children},o),v=hs(v,o,a,null),v.flags|=2,n.return=t,v.return=t,n.sibling=v,t.child=n,ys(t,e.child,null,a),n=t.child,n.memoizedState=Uo(a),n.childLanes=zo(e,m,a),t.memoizedState=Do,t=nl(null,n));else if(Ga(t),bc(v)){if(m=v.nextSibling&&v.nextSibling.dataset,m)var z=m.dgst;m=z,n=Error(r(419)),n.stack="",n.digest=m,Kn({value:n,source:null,stack:null}),t=Lo(e,t,a)}else if(dt||Js(e,t,a,!1),m=(a&e.childLanes)!==0,dt||m){if(m=Fe,m!==null&&(n=lu(m,a),n!==0&&n!==_.retryLane))throw _.retryLane=n,fs(e,n),zt(m,e,n),Co;pc(v)||Di(),t=Lo(e,t,a)}else pc(v)?(t.flags|=192,t.child=e.child,t=null):(e=_.treeContext,tt=aa(v.nextSibling),yt=t,$e=!0,qa=null,ea=!1,e!==null&&td(t,e),t=Mo(t,n.children),t.flags|=4096);return t}return o?(Ya(),v=n.fallback,o=t.mode,_=e.child,z=_.sibling,n=ba(_,{mode:"hidden",children:n.children}),n.subtreeFlags=_.subtreeFlags&65011712,z!==null?v=ba(z,v):(v=hs(v,o,a,null),v.flags|=2),v.return=t,n.return=t,n.sibling=v,t.child=n,nl(null,n),n=t.child,v=e.child.memoizedState,v===null?v=Uo(a):(o=v.cachePool,o!==null?(_=ct._currentValue,o=o.parent!==_?{parent:_,pool:_}:o):o=rd(),v={baseLanes:v.baseLanes|a,cachePool:o}),n.memoizedState=v,n.childLanes=zo(e,m,a),t.memoizedState=Do,nl(e.child,n)):(Ga(t),a=e.child,e=a.sibling,a=ba(a,{mode:"visible",children:n.children}),a.return=t,a.sibling=null,e!==null&&(m=t.deletions,m===null?(t.deletions=[e],t.flags|=16):m.push(e)),t.child=a,t.memoizedState=null,a)}function Mo(e,t){return t=ji({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function ji(e,t){return e=Ht(22,e,null,t),e.lanes=0,e}function Lo(e,t,a){return ys(t,e.child,null,a),e=Mo(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function wf(e,t,a){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),Pr(e.return,t,a)}function qo(e,t,a,n,o,u){var m=e.memoizedState;m===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:a,tailMode:o,treeForkCount:u}:(m.isBackwards=t,m.rendering=null,m.renderingStartTime=0,m.last=n,m.tail=a,m.tailMode=o,m.treeForkCount=u)}function _f(e,t,a){var n=t.pendingProps,o=n.revealOrder,u=n.tail;n=n.children;var m=rt.current,v=(m&2)!==0;if(v?(m=m&1|2,t.flags|=128):m&=1,$(rt,m),_t(e,t,n,a),n=$e?Yn:0,!v&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&wf(e,a,t);else if(e.tag===19)wf(e,a,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(o){case"forwards":for(a=t.child,o=null;a!==null;)e=a.alternate,e!==null&&fi(e)===null&&(o=a),a=a.sibling;a=o,a===null?(o=t.child,t.child=null):(o=a.sibling,a.sibling=null),qo(t,!1,o,a,u,n);break;case"backwards":case"unstable_legacy-backwards":for(a=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&fi(e)===null){t.child=o;break}e=o.sibling,o.sibling=a,a=o,o=e}qo(t,!0,a,null,u,n);break;case"together":qo(t,!1,null,null,void 0,n);break;default:t.memoizedState=null}return t.child}function Sa(e,t,a){if(e!==null&&(t.dependencies=e.dependencies),Qa|=t.lanes,(a&t.childLanes)===0)if(e!==null){if(Js(e,t,a,!1),(a&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(r(153));if(t.child!==null){for(e=t.child,a=ba(e,e.pendingProps),t.child=a,a.return=t;e.sibling!==null;)e=e.sibling,a=a.sibling=ba(e,e.pendingProps),a.return=t;a.sibling=null}return t.child}function Bo(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&ni(e)))}function vg(e,t,a){switch(t.tag){case 3:qe(t,t.stateNode.containerInfo),Ha(t,ct,e.memoizedState.cache),ms();break;case 27:case 5:ie(t);break;case 4:qe(t,t.stateNode.containerInfo);break;case 10:Ha(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,co(t),null;break;case 13:var n=t.memoizedState;if(n!==null)return n.dehydrated!==null?(Ga(t),t.flags|=128,null):(a&t.child.childLanes)!==0?yf(e,t,a):(Ga(t),e=Sa(e,t,a),e!==null?e.sibling:null);Ga(t);break;case 19:var o=(e.flags&128)!==0;if(n=(a&t.childLanes)!==0,n||(Js(e,t,a,!1),n=(a&t.childLanes)!==0),o){if(n)return _f(e,t,a);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),$(rt,rt.current),n)break;return null;case 22:return t.lanes=0,mf(e,t,a,t.pendingProps);case 24:Ha(t,ct,e.memoizedState.cache)}return Sa(e,t,a)}function Sf(e,t,a){if(e!==null)if(e.memoizedProps!==t.pendingProps)dt=!0;else{if(!Bo(e,a)&&(t.flags&128)===0)return dt=!1,vg(e,t,a);dt=(e.flags&131072)!==0}else dt=!1,$e&&(t.flags&1048576)!==0&&ed(t,Yn,t.index);switch(t.lanes=0,t.tag){case 16:e:{var n=t.pendingProps;if(e=vs(t.elementType),t.type=e,typeof e=="function")Vr(e)?(n=_s(e,n),t.tag=1,t=vf(null,t,e,n,a)):(t.tag=0,t=Ro(null,t,e,n,a));else{if(e!=null){var o=e.$$typeof;if(o===te){t.tag=11,t=df(null,t,e,n,a);break e}else if(o===ae){t.tag=14,t=ff(null,t,e,n,a);break e}}throw t=je(e)||e,Error(r(306,t,""))}}return t;case 0:return Ro(e,t,t.type,t.pendingProps,a);case 1:return n=t.type,o=_s(n,t.pendingProps),vf(e,t,n,o,a);case 3:e:{if(qe(t,t.stateNode.containerInfo),e===null)throw Error(r(387));n=t.pendingProps;var u=t.memoizedState;o=u.element,no(e,t),Fn(t,n,null,a);var m=t.memoizedState;if(n=m.cache,Ha(t,ct,n),n!==u.cache&&Wr(t,[ct],a,!0),Wn(),n=m.element,u.isDehydrated)if(u={element:n,isDehydrated:!1,cache:m.cache},t.updateQueue.baseState=u,t.memoizedState=u,t.flags&256){t=xf(e,t,n,a);break e}else if(n!==o){o=Pt(Error(r(424)),t),Kn(o),t=xf(e,t,n,a);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(tt=aa(e.firstChild),yt=t,$e=!0,qa=null,ea=!0,a=hd(t,null,n,a),t.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(ms(),n===o){t=Sa(e,t,a);break e}_t(e,t,n,a)}t=t.child}return t;case 26:return Si(e,t),e===null?(a=Uh(t.type,null,t.pendingProps,null))?t.memoizedState=a:$e||(a=t.type,e=t.pendingProps,n=Hi(ve.current).createElement(a),n[xt]=t,n[Ot]=e,St(n,a,e),pt(n),t.stateNode=n):t.memoizedState=Uh(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return ie(t),e===null&&$e&&(n=t.stateNode=Ch(t.type,t.pendingProps,ve.current),yt=t,ea=!0,o=tt,Fa(t.type)?(vc=o,tt=aa(n.firstChild)):tt=o),_t(e,t,t.pendingProps.children,a),Si(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&$e&&((o=n=tt)&&(n=Qg(n,t.type,t.pendingProps,ea),n!==null?(t.stateNode=n,yt=t,tt=aa(n.firstChild),ea=!1,o=!0):o=!1),o||Ba(t)),ie(t),o=t.type,u=t.pendingProps,m=e!==null?e.memoizedProps:null,n=u.children,hc(o,u)?n=null:m!==null&&hc(o,m)&&(t.flags|=32),t.memoizedState!==null&&(o=fo(e,t,cg,null,null,a),xl._currentValue=o),Si(e,t),_t(e,t,n,a),t.child;case 6:return e===null&&$e&&((e=a=tt)&&(a=Jg(a,t.pendingProps,ea),a!==null?(t.stateNode=a,yt=t,tt=null,e=!0):e=!1),e||Ba(t)),null;case 13:return yf(e,t,a);case 4:return qe(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=ys(t,null,n,a):_t(e,t,n,a),t.child;case 11:return df(e,t,t.type,t.pendingProps,a);case 7:return _t(e,t,t.pendingProps,a),t.child;case 8:return _t(e,t,t.pendingProps.children,a),t.child;case 12:return _t(e,t,t.pendingProps.children,a),t.child;case 10:return n=t.pendingProps,Ha(t,t.type,n.value),_t(e,t,n.children,a),t.child;case 9:return o=t.type._context,n=t.pendingProps.children,ps(t),o=wt(o),n=n(o),t.flags|=1,_t(e,t,n,a),t.child;case 14:return ff(e,t,t.type,t.pendingProps,a);case 15:return hf(e,t,t.type,t.pendingProps,a);case 19:return _f(e,t,a);case 31:return bg(e,t,a);case 22:return mf(e,t,a,t.pendingProps);case 24:return ps(t),n=wt(ct),e===null?(o=to(),o===null&&(o=Fe,u=Fr(),o.pooledCache=u,u.refCount++,u!==null&&(o.pooledCacheLanes|=a),o=u),t.memoizedState={parent:n,cache:o},so(t),Ha(t,ct,o)):((e.lanes&a)!==0&&(no(e,t),Fn(t,null,null,a),Wn()),o=e.memoizedState,u=t.memoizedState,o.parent!==n?(o={parent:n,cache:n},t.memoizedState=o,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=o),Ha(t,ct,n)):(n=u.cache,Ha(t,ct,n),n!==o.cache&&Wr(t,[ct],a,!0))),_t(e,t,t.pendingProps.children,a),t.child;case 29:throw t.pendingProps}throw Error(r(156,t.tag))}function ja(e){e.flags|=4}function Ho(e,t,a,n,o){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(o&335544128)===o)if(e.stateNode.complete)e.flags|=8192;else if(Zf())e.flags|=8192;else throw xs=oi,ao}else e.flags&=-16777217}function jf(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Bh(t))if(Zf())e.flags|=8192;else throw xs=oi,ao}function Ni(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?au():536870912,e.lanes|=t,on|=t)}function ll(e,t){if(!$e)switch(e.tailMode){case"hidden":t=e.tail;for(var a=null;t!==null;)t.alternate!==null&&(a=t),t=t.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var n=null;a!==null;)a.alternate!==null&&(n=a),a=a.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function at(e){var t=e.alternate!==null&&e.alternate.child===e.child,a=0,n=0;if(t)for(var o=e.child;o!==null;)a|=o.lanes|o.childLanes,n|=o.subtreeFlags&65011712,n|=o.flags&65011712,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)a|=o.lanes|o.childLanes,n|=o.subtreeFlags,n|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=n,e.childLanes=a,t}function xg(e,t,a){var n=t.pendingProps;switch(Xr(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return at(t),null;case 1:return at(t),null;case 3:return a=t.stateNode,n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),ya(ct),Ue(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Qs(t)?ja(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Jr())),at(t),null;case 26:var o=t.type,u=t.memoizedState;return e===null?(ja(t),u!==null?(at(t),jf(t,u)):(at(t),Ho(t,o,null,n,a))):u?u!==e.memoizedState?(ja(t),at(t),jf(t,u)):(at(t),t.flags&=-16777217):(e=e.memoizedProps,e!==n&&ja(t),at(t),Ho(t,o,e,n,a)),null;case 27:if(de(t),a=ve.current,o=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==n&&ja(t);else{if(!n){if(t.stateNode===null)throw Error(r(166));return at(t),null}e=J.current,Qs(t)?ad(t):(e=Ch(o,n,a),t.stateNode=e,ja(t))}return at(t),null;case 5:if(de(t),o=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==n&&ja(t);else{if(!n){if(t.stateNode===null)throw Error(r(166));return at(t),null}if(u=J.current,Qs(t))ad(t);else{var m=Hi(ve.current);switch(u){case 1:u=m.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:u=m.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":u=m.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":u=m.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":u=m.createElement("div"),u.innerHTML="<script><\/script>",u=u.removeChild(u.firstChild);break;case"select":u=typeof n.is=="string"?m.createElement("select",{is:n.is}):m.createElement("select"),n.multiple?u.multiple=!0:n.size&&(u.size=n.size);break;default:u=typeof n.is=="string"?m.createElement(o,{is:n.is}):m.createElement(o)}}u[xt]=t,u[Ot]=n;e:for(m=t.child;m!==null;){if(m.tag===5||m.tag===6)u.appendChild(m.stateNode);else if(m.tag!==4&&m.tag!==27&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}t.stateNode=u;e:switch(St(u,o,n),o){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&ja(t)}}return at(t),Ho(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,a),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==n&&ja(t);else{if(typeof n!="string"&&t.stateNode===null)throw Error(r(166));if(e=ve.current,Qs(t)){if(e=t.stateNode,a=t.memoizedProps,n=null,o=yt,o!==null)switch(o.tag){case 27:case 5:n=o.memoizedProps}e[xt]=t,e=!!(e.nodeValue===a||n!==null&&n.suppressHydrationWarning===!0||yh(e.nodeValue,a)),e||Ba(t,!0)}else e=Hi(e).createTextNode(n),e[xt]=t,t.stateNode=e}return at(t),null;case 31:if(a=t.memoizedState,e===null||e.memoizedState!==null){if(n=Qs(t),a!==null){if(e===null){if(!n)throw Error(r(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(557));e[xt]=t}else ms(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;at(t),e=!1}else a=Jr(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return t.flags&256?(It(t),t):(It(t),null);if((t.flags&128)!==0)throw Error(r(558))}return at(t),null;case 13:if(n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(o=Qs(t),n!==null&&n.dehydrated!==null){if(e===null){if(!o)throw Error(r(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(r(317));o[xt]=t}else ms(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;at(t),o=!1}else o=Jr(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=o),o=!0;if(!o)return t.flags&256?(It(t),t):(It(t),null)}return It(t),(t.flags&128)!==0?(t.lanes=a,t):(a=n!==null,e=e!==null&&e.memoizedState!==null,a&&(n=t.child,o=null,n.alternate!==null&&n.alternate.memoizedState!==null&&n.alternate.memoizedState.cachePool!==null&&(o=n.alternate.memoizedState.cachePool.pool),u=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(u=n.memoizedState.cachePool.pool),u!==o&&(n.flags|=2048)),a!==e&&a&&(t.child.flags|=8192),Ni(t,t.updateQueue),at(t),null);case 4:return Ue(),e===null&&oc(t.stateNode.containerInfo),at(t),null;case 10:return ya(t.type),at(t),null;case 19:if(H(rt),n=t.memoizedState,n===null)return at(t),null;if(o=(t.flags&128)!==0,u=n.rendering,u===null)if(o)ll(n,!1);else{if(lt!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(u=fi(e),u!==null){for(t.flags|=128,ll(n,!1),e=u.updateQueue,t.updateQueue=e,Ni(t,e),t.subtreeFlags=0,e=a,a=t.child;a!==null;)Pu(a,e),a=a.sibling;return $(rt,rt.current&1|2),$e&&va(t,n.treeForkCount),t.child}e=e.sibling}n.tail!==null&&Ye()>ki&&(t.flags|=128,o=!0,ll(n,!1),t.lanes=4194304)}else{if(!o)if(e=fi(u),e!==null){if(t.flags|=128,o=!0,e=e.updateQueue,t.updateQueue=e,Ni(t,e),ll(n,!0),n.tail===null&&n.tailMode==="hidden"&&!u.alternate&&!$e)return at(t),null}else 2*Ye()-n.renderingStartTime>ki&&a!==536870912&&(t.flags|=128,o=!0,ll(n,!1),t.lanes=4194304);n.isBackwards?(u.sibling=t.child,t.child=u):(e=n.last,e!==null?e.sibling=u:t.child=u,n.last=u)}return n.tail!==null?(e=n.tail,n.rendering=e,n.tail=e.sibling,n.renderingStartTime=Ye(),e.sibling=null,a=rt.current,$(rt,o?a&1|2:a&1),$e&&va(t,n.treeForkCount),e):(at(t),null);case 22:case 23:return It(t),oo(),n=t.memoizedState!==null,e!==null?e.memoizedState!==null!==n&&(t.flags|=8192):n&&(t.flags|=8192),n?(a&536870912)!==0&&(t.flags&128)===0&&(at(t),t.subtreeFlags&6&&(t.flags|=8192)):at(t),a=t.updateQueue,a!==null&&Ni(t,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),n=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),n!==a&&(t.flags|=2048),e!==null&&H(bs),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),ya(ct),at(t),null;case 25:return null;case 30:return null}throw Error(r(156,t.tag))}function yg(e,t){switch(Xr(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ya(ct),Ue(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return de(t),null;case 31:if(t.memoizedState!==null){if(It(t),t.alternate===null)throw Error(r(340));ms()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(It(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(r(340));ms()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return H(rt),null;case 4:return Ue(),null;case 10:return ya(t.type),null;case 22:case 23:return It(t),oo(),e!==null&&H(bs),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return ya(ct),null;case 25:return null;default:return null}}function Nf(e,t){switch(Xr(t),t.tag){case 3:ya(ct),Ue();break;case 26:case 27:case 5:de(t);break;case 4:Ue();break;case 31:t.memoizedState!==null&&It(t);break;case 13:It(t);break;case 19:H(rt);break;case 10:ya(t.type);break;case 22:case 23:It(t),oo(),e!==null&&H(bs);break;case 24:ya(ct)}}function il(e,t){try{var a=t.updateQueue,n=a!==null?a.lastEffect:null;if(n!==null){var o=n.next;a=o;do{if((a.tag&e)===e){n=void 0;var u=a.create,m=a.inst;n=u(),m.destroy=n}a=a.next}while(a!==o)}}catch(v){Je(t,t.return,v)}}function Ka(e,t,a){try{var n=t.updateQueue,o=n!==null?n.lastEffect:null;if(o!==null){var u=o.next;n=u;do{if((n.tag&e)===e){var m=n.inst,v=m.destroy;if(v!==void 0){m.destroy=void 0,o=t;var _=a,z=v;try{z()}catch(X){Je(o,_,X)}}}n=n.next}while(n!==u)}}catch(X){Je(t,t.return,X)}}function Ef(e){var t=e.updateQueue;if(t!==null){var a=e.stateNode;try{gd(t,a)}catch(n){Je(e,e.return,n)}}}function Tf(e,t,a){a.props=_s(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(n){Je(e,t,n)}}function rl(e,t){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var n=e.stateNode;break;case 30:n=e.stateNode;break;default:n=e.stateNode}typeof a=="function"?e.refCleanup=a(n):a.current=n}}catch(o){Je(e,t,o)}}function fa(e,t){var a=e.ref,n=e.refCleanup;if(a!==null)if(typeof n=="function")try{n()}catch(o){Je(e,t,o)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(o){Je(e,t,o)}else a.current=null}function Af(e){var t=e.type,a=e.memoizedProps,n=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break e;case"img":a.src?n.src=a.src:a.srcSet&&(n.srcset=a.srcSet)}}catch(o){Je(e,e.return,o)}}function $o(e,t,a){try{var n=e.stateNode;Ig(n,e.type,a,t),n[Ot]=t}catch(o){Je(e,e.return,o)}}function Of(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Fa(e.type)||e.tag===4}function Io(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Of(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Fa(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Vo(e,t,a){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,t):(t=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,t.appendChild(e),a=a._reactRootContainer,a!=null||t.onclick!==null||(t.onclick=ga));else if(n!==4&&(n===27&&Fa(e.type)&&(a=e.stateNode,t=null),e=e.child,e!==null))for(Vo(e,t,a),e=e.sibling;e!==null;)Vo(e,t,a),e=e.sibling}function Ei(e,t,a){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?a.insertBefore(e,t):a.appendChild(e);else if(n!==4&&(n===27&&Fa(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(Ei(e,t,a),e=e.sibling;e!==null;)Ei(e,t,a),e=e.sibling}function kf(e){var t=e.stateNode,a=e.memoizedProps;try{for(var n=e.type,o=t.attributes;o.length;)t.removeAttributeNode(o[0]);St(t,n,a),t[xt]=e,t[Ot]=a}catch(u){Je(e,e.return,u)}}var Na=!1,ft=!1,Go=!1,Cf=typeof WeakSet=="function"?WeakSet:Set,bt=null;function wg(e,t){if(e=e.containerInfo,dc=Xi,e=Iu(e),Mr(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var n=a.getSelection&&a.getSelection();if(n&&n.rangeCount!==0){a=n.anchorNode;var o=n.anchorOffset,u=n.focusNode;n=n.focusOffset;try{a.nodeType,u.nodeType}catch{a=null;break e}var m=0,v=-1,_=-1,z=0,X=0,ee=e,B=null;t:for(;;){for(var V;ee!==a||o!==0&&ee.nodeType!==3||(v=m+o),ee!==u||n!==0&&ee.nodeType!==3||(_=m+n),ee.nodeType===3&&(m+=ee.nodeValue.length),(V=ee.firstChild)!==null;)B=ee,ee=V;for(;;){if(ee===e)break t;if(B===a&&++z===o&&(v=m),B===u&&++X===n&&(_=m),(V=ee.nextSibling)!==null)break;ee=B,B=ee.parentNode}ee=V}a=v===-1||_===-1?null:{start:v,end:_}}else a=null}a=a||{start:0,end:0}}else a=null;for(fc={focusedElem:e,selectionRange:a},Xi=!1,bt=t;bt!==null;)if(t=bt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,bt=e;else for(;bt!==null;){switch(t=bt,u=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(a=0;a<e.length;a++)o=e[a],o.ref.impl=o.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&u!==null){e=void 0,a=t,o=u.memoizedProps,u=u.memoizedState,n=a.stateNode;try{var xe=_s(a.type,o);e=n.getSnapshotBeforeUpdate(xe,u),n.__reactInternalSnapshotBeforeUpdate=e}catch(Ee){Je(a,a.return,Ee)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,a=e.nodeType,a===9)gc(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":gc(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(r(163))}if(e=t.sibling,e!==null){e.return=t.return,bt=e;break}bt=t.return}}function Rf(e,t,a){var n=a.flags;switch(a.tag){case 0:case 11:case 15:Ta(e,a),n&4&&il(5,a);break;case 1:if(Ta(e,a),n&4)if(e=a.stateNode,t===null)try{e.componentDidMount()}catch(m){Je(a,a.return,m)}else{var o=_s(a.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(o,t,e.__reactInternalSnapshotBeforeUpdate)}catch(m){Je(a,a.return,m)}}n&64&&Ef(a),n&512&&rl(a,a.return);break;case 3:if(Ta(e,a),n&64&&(e=a.updateQueue,e!==null)){if(t=null,a.child!==null)switch(a.child.tag){case 27:case 5:t=a.child.stateNode;break;case 1:t=a.child.stateNode}try{gd(e,t)}catch(m){Je(a,a.return,m)}}break;case 27:t===null&&n&4&&kf(a);case 26:case 5:Ta(e,a),t===null&&n&4&&Af(a),n&512&&rl(a,a.return);break;case 12:Ta(e,a);break;case 31:Ta(e,a),n&4&&zf(e,a);break;case 13:Ta(e,a),n&4&&Mf(e,a),n&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=kg.bind(null,a),Zg(e,a))));break;case 22:if(n=a.memoizedState!==null||Na,!n){t=t!==null&&t.memoizedState!==null||ft,o=Na;var u=ft;Na=n,(ft=t)&&!u?Aa(e,a,(a.subtreeFlags&8772)!==0):Ta(e,a),Na=o,ft=u}break;case 30:break;default:Ta(e,a)}}function Df(e){var t=e.alternate;t!==null&&(e.alternate=null,Df(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&xr(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var st=null,Ct=!1;function Ea(e,t,a){for(a=a.child;a!==null;)Uf(e,t,a),a=a.sibling}function Uf(e,t,a){if(Lt&&typeof Lt.onCommitFiberUnmount=="function")try{Lt.onCommitFiberUnmount(Cn,a)}catch{}switch(a.tag){case 26:ft||fa(a,t),Ea(e,t,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:ft||fa(a,t);var n=st,o=Ct;Fa(a.type)&&(st=a.stateNode,Ct=!1),Ea(e,t,a),pl(a.stateNode),st=n,Ct=o;break;case 5:ft||fa(a,t);case 6:if(n=st,o=Ct,st=null,Ea(e,t,a),st=n,Ct=o,st!==null)if(Ct)try{(st.nodeType===9?st.body:st.nodeName==="HTML"?st.ownerDocument.body:st).removeChild(a.stateNode)}catch(u){Je(a,t,u)}else try{st.removeChild(a.stateNode)}catch(u){Je(a,t,u)}break;case 18:st!==null&&(Ct?(e=st,Eh(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),pn(e)):Eh(st,a.stateNode));break;case 4:n=st,o=Ct,st=a.stateNode.containerInfo,Ct=!0,Ea(e,t,a),st=n,Ct=o;break;case 0:case 11:case 14:case 15:Ka(2,a,t),ft||Ka(4,a,t),Ea(e,t,a);break;case 1:ft||(fa(a,t),n=a.stateNode,typeof n.componentWillUnmount=="function"&&Tf(a,t,n)),Ea(e,t,a);break;case 21:Ea(e,t,a);break;case 22:ft=(n=ft)||a.memoizedState!==null,Ea(e,t,a),ft=n;break;default:Ea(e,t,a)}}function zf(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{pn(e)}catch(a){Je(t,t.return,a)}}}function Mf(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{pn(e)}catch(a){Je(t,t.return,a)}}function _g(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Cf),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Cf),t;default:throw Error(r(435,e.tag))}}function Ti(e,t){var a=_g(e);t.forEach(function(n){if(!a.has(n)){a.add(n);var o=Cg.bind(null,e,n);n.then(o,o)}})}function Rt(e,t){var a=t.deletions;if(a!==null)for(var n=0;n<a.length;n++){var o=a[n],u=e,m=t,v=m;e:for(;v!==null;){switch(v.tag){case 27:if(Fa(v.type)){st=v.stateNode,Ct=!1;break e}break;case 5:st=v.stateNode,Ct=!1;break e;case 3:case 4:st=v.stateNode.containerInfo,Ct=!0;break e}v=v.return}if(st===null)throw Error(r(160));Uf(u,m,o),st=null,Ct=!1,u=o.alternate,u!==null&&(u.return=null),o.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)Lf(t,e),t=t.sibling}var la=null;function Lf(e,t){var a=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Rt(t,e),Dt(e),n&4&&(Ka(3,e,e.return),il(3,e),Ka(5,e,e.return));break;case 1:Rt(t,e),Dt(e),n&512&&(ft||a===null||fa(a,a.return)),n&64&&Na&&(e=e.updateQueue,e!==null&&(n=e.callbacks,n!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?n:a.concat(n))));break;case 26:var o=la;if(Rt(t,e),Dt(e),n&512&&(ft||a===null||fa(a,a.return)),n&4){var u=a!==null?a.memoizedState:null;if(n=e.memoizedState,a===null)if(n===null)if(e.stateNode===null){e:{n=e.type,a=e.memoizedProps,o=o.ownerDocument||o;t:switch(n){case"title":u=o.getElementsByTagName("title")[0],(!u||u[Un]||u[xt]||u.namespaceURI==="http://www.w3.org/2000/svg"||u.hasAttribute("itemprop"))&&(u=o.createElement(n),o.head.insertBefore(u,o.querySelector("head > title"))),St(u,n,a),u[xt]=e,pt(u),n=u;break e;case"link":var m=Lh("link","href",o).get(n+(a.href||""));if(m){for(var v=0;v<m.length;v++)if(u=m[v],u.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&u.getAttribute("rel")===(a.rel==null?null:a.rel)&&u.getAttribute("title")===(a.title==null?null:a.title)&&u.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){m.splice(v,1);break t}}u=o.createElement(n),St(u,n,a),o.head.appendChild(u);break;case"meta":if(m=Lh("meta","content",o).get(n+(a.content||""))){for(v=0;v<m.length;v++)if(u=m[v],u.getAttribute("content")===(a.content==null?null:""+a.content)&&u.getAttribute("name")===(a.name==null?null:a.name)&&u.getAttribute("property")===(a.property==null?null:a.property)&&u.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&u.getAttribute("charset")===(a.charSet==null?null:a.charSet)){m.splice(v,1);break t}}u=o.createElement(n),St(u,n,a),o.head.appendChild(u);break;default:throw Error(r(468,n))}u[xt]=e,pt(u),n=u}e.stateNode=n}else qh(o,e.type,e.stateNode);else e.stateNode=Mh(o,n,e.memoizedProps);else u!==n?(u===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):u.count--,n===null?qh(o,e.type,e.stateNode):Mh(o,n,e.memoizedProps)):n===null&&e.stateNode!==null&&$o(e,e.memoizedProps,a.memoizedProps)}break;case 27:Rt(t,e),Dt(e),n&512&&(ft||a===null||fa(a,a.return)),a!==null&&n&4&&$o(e,e.memoizedProps,a.memoizedProps);break;case 5:if(Rt(t,e),Dt(e),n&512&&(ft||a===null||fa(a,a.return)),e.flags&32){o=e.stateNode;try{qs(o,"")}catch(xe){Je(e,e.return,xe)}}n&4&&e.stateNode!=null&&(o=e.memoizedProps,$o(e,o,a!==null?a.memoizedProps:o)),n&1024&&(Go=!0);break;case 6:if(Rt(t,e),Dt(e),n&4){if(e.stateNode===null)throw Error(r(162));n=e.memoizedProps,a=e.stateNode;try{a.nodeValue=n}catch(xe){Je(e,e.return,xe)}}break;case 3:if(Vi=null,o=la,la=$i(t.containerInfo),Rt(t,e),la=o,Dt(e),n&4&&a!==null&&a.memoizedState.isDehydrated)try{pn(t.containerInfo)}catch(xe){Je(e,e.return,xe)}Go&&(Go=!1,qf(e));break;case 4:n=la,la=$i(e.stateNode.containerInfo),Rt(t,e),Dt(e),la=n;break;case 12:Rt(t,e),Dt(e);break;case 31:Rt(t,e),Dt(e),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,Ti(e,n)));break;case 13:Rt(t,e),Dt(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Oi=Ye()),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,Ti(e,n)));break;case 22:o=e.memoizedState!==null;var _=a!==null&&a.memoizedState!==null,z=Na,X=ft;if(Na=z||o,ft=X||_,Rt(t,e),ft=X,Na=z,Dt(e),n&8192)e:for(t=e.stateNode,t._visibility=o?t._visibility&-2:t._visibility|1,o&&(a===null||_||Na||ft||Ss(e)),a=null,t=e;;){if(t.tag===5||t.tag===26){if(a===null){_=a=t;try{if(u=_.stateNode,o)m=u.style,typeof m.setProperty=="function"?m.setProperty("display","none","important"):m.display="none";else{v=_.stateNode;var ee=_.memoizedProps.style,B=ee!=null&&ee.hasOwnProperty("display")?ee.display:null;v.style.display=B==null||typeof B=="boolean"?"":(""+B).trim()}}catch(xe){Je(_,_.return,xe)}}}else if(t.tag===6){if(a===null){_=t;try{_.stateNode.nodeValue=o?"":_.memoizedProps}catch(xe){Je(_,_.return,xe)}}}else if(t.tag===18){if(a===null){_=t;try{var V=_.stateNode;o?Th(V,!0):Th(_.stateNode,!1)}catch(xe){Je(_,_.return,xe)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;a===t&&(a=null),t=t.return}a===t&&(a=null),t.sibling.return=t.return,t=t.sibling}n&4&&(n=e.updateQueue,n!==null&&(a=n.retryQueue,a!==null&&(n.retryQueue=null,Ti(e,a))));break;case 19:Rt(t,e),Dt(e),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,Ti(e,n)));break;case 30:break;case 21:break;default:Rt(t,e),Dt(e)}}function Dt(e){var t=e.flags;if(t&2){try{for(var a,n=e.return;n!==null;){if(Of(n)){a=n;break}n=n.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var o=a.stateNode,u=Io(e);Ei(e,u,o);break;case 5:var m=a.stateNode;a.flags&32&&(qs(m,""),a.flags&=-33);var v=Io(e);Ei(e,v,m);break;case 3:case 4:var _=a.stateNode.containerInfo,z=Io(e);Vo(e,z,_);break;default:throw Error(r(161))}}catch(X){Je(e,e.return,X)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function qf(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;qf(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Ta(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Rf(e,t.alternate,t),t=t.sibling}function Ss(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Ka(4,t,t.return),Ss(t);break;case 1:fa(t,t.return);var a=t.stateNode;typeof a.componentWillUnmount=="function"&&Tf(t,t.return,a),Ss(t);break;case 27:pl(t.stateNode);case 26:case 5:fa(t,t.return),Ss(t);break;case 22:t.memoizedState===null&&Ss(t);break;case 30:Ss(t);break;default:Ss(t)}e=e.sibling}}function Aa(e,t,a){for(a=a&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var n=t.alternate,o=e,u=t,m=u.flags;switch(u.tag){case 0:case 11:case 15:Aa(o,u,a),il(4,u);break;case 1:if(Aa(o,u,a),n=u,o=n.stateNode,typeof o.componentDidMount=="function")try{o.componentDidMount()}catch(z){Je(n,n.return,z)}if(n=u,o=n.updateQueue,o!==null){var v=n.stateNode;try{var _=o.shared.hiddenCallbacks;if(_!==null)for(o.shared.hiddenCallbacks=null,o=0;o<_.length;o++)md(_[o],v)}catch(z){Je(n,n.return,z)}}a&&m&64&&Ef(u),rl(u,u.return);break;case 27:kf(u);case 26:case 5:Aa(o,u,a),a&&n===null&&m&4&&Af(u),rl(u,u.return);break;case 12:Aa(o,u,a);break;case 31:Aa(o,u,a),a&&m&4&&zf(o,u);break;case 13:Aa(o,u,a),a&&m&4&&Mf(o,u);break;case 22:u.memoizedState===null&&Aa(o,u,a),rl(u,u.return);break;case 30:break;default:Aa(o,u,a)}t=t.sibling}}function Yo(e,t){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&Xn(a))}function Ko(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Xn(e))}function ia(e,t,a,n){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Bf(e,t,a,n),t=t.sibling}function Bf(e,t,a,n){var o=t.flags;switch(t.tag){case 0:case 11:case 15:ia(e,t,a,n),o&2048&&il(9,t);break;case 1:ia(e,t,a,n);break;case 3:ia(e,t,a,n),o&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Xn(e)));break;case 12:if(o&2048){ia(e,t,a,n),e=t.stateNode;try{var u=t.memoizedProps,m=u.id,v=u.onPostCommit;typeof v=="function"&&v(m,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(_){Je(t,t.return,_)}}else ia(e,t,a,n);break;case 31:ia(e,t,a,n);break;case 13:ia(e,t,a,n);break;case 23:break;case 22:u=t.stateNode,m=t.alternate,t.memoizedState!==null?u._visibility&2?ia(e,t,a,n):ol(e,t):u._visibility&2?ia(e,t,a,n):(u._visibility|=2,nn(e,t,a,n,(t.subtreeFlags&10256)!==0||!1)),o&2048&&Yo(m,t);break;case 24:ia(e,t,a,n),o&2048&&Ko(t.alternate,t);break;default:ia(e,t,a,n)}}function nn(e,t,a,n,o){for(o=o&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var u=e,m=t,v=a,_=n,z=m.flags;switch(m.tag){case 0:case 11:case 15:nn(u,m,v,_,o),il(8,m);break;case 23:break;case 22:var X=m.stateNode;m.memoizedState!==null?X._visibility&2?nn(u,m,v,_,o):ol(u,m):(X._visibility|=2,nn(u,m,v,_,o)),o&&z&2048&&Yo(m.alternate,m);break;case 24:nn(u,m,v,_,o),o&&z&2048&&Ko(m.alternate,m);break;default:nn(u,m,v,_,o)}t=t.sibling}}function ol(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var a=e,n=t,o=n.flags;switch(n.tag){case 22:ol(a,n),o&2048&&Yo(n.alternate,n);break;case 24:ol(a,n),o&2048&&Ko(n.alternate,n);break;default:ol(a,n)}t=t.sibling}}var cl=8192;function ln(e,t,a){if(e.subtreeFlags&cl)for(e=e.child;e!==null;)Hf(e,t,a),e=e.sibling}function Hf(e,t,a){switch(e.tag){case 26:ln(e,t,a),e.flags&cl&&e.memoizedState!==null&&op(a,la,e.memoizedState,e.memoizedProps);break;case 5:ln(e,t,a);break;case 3:case 4:var n=la;la=$i(e.stateNode.containerInfo),ln(e,t,a),la=n;break;case 22:e.memoizedState===null&&(n=e.alternate,n!==null&&n.memoizedState!==null?(n=cl,cl=16777216,ln(e,t,a),cl=n):ln(e,t,a));break;default:ln(e,t,a)}}function $f(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function ul(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var n=t[a];bt=n,Vf(n,e)}$f(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)If(e),e=e.sibling}function If(e){switch(e.tag){case 0:case 11:case 15:ul(e),e.flags&2048&&Ka(9,e,e.return);break;case 3:ul(e);break;case 12:ul(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Ai(e)):ul(e);break;default:ul(e)}}function Ai(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var n=t[a];bt=n,Vf(n,e)}$f(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Ka(8,t,t.return),Ai(t);break;case 22:a=t.stateNode,a._visibility&2&&(a._visibility&=-3,Ai(t));break;default:Ai(t)}e=e.sibling}}function Vf(e,t){for(;bt!==null;){var a=bt;switch(a.tag){case 0:case 11:case 15:Ka(8,a,t);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var n=a.memoizedState.cachePool.pool;n!=null&&n.refCount++}break;case 24:Xn(a.memoizedState.cache)}if(n=a.child,n!==null)n.return=a,bt=n;else e:for(a=e;bt!==null;){n=bt;var o=n.sibling,u=n.return;if(Df(n),n===a){bt=null;break e}if(o!==null){o.return=u,bt=o;break e}bt=u}}}var Sg={getCacheForType:function(e){var t=wt(ct),a=t.data.get(e);return a===void 0&&(a=e(),t.data.set(e,a)),a},cacheSignal:function(){return wt(ct).controller.signal}},jg=typeof WeakMap=="function"?WeakMap:Map,Ke=0,Fe=null,Me=null,Be=0,Qe=0,Vt=null,Xa=!1,rn=!1,Xo=!1,Oa=0,lt=0,Qa=0,js=0,Qo=0,Gt=0,on=0,dl=null,Ut=null,Jo=!1,Oi=0,Gf=0,ki=1/0,Ci=null,Ja=null,mt=0,Za=null,cn=null,ka=0,Zo=0,Po=null,Yf=null,fl=0,Wo=null;function Yt(){return(Ke&2)!==0&&Be!==0?Be&-Be:A.T!==null?nc():iu()}function Kf(){if(Gt===0)if((Be&536870912)===0||$e){var e=Bl;Bl<<=1,(Bl&3932160)===0&&(Bl=262144),Gt=e}else Gt=536870912;return e=$t.current,e!==null&&(e.flags|=32),Gt}function zt(e,t,a){(e===Fe&&(Qe===2||Qe===9)||e.cancelPendingCommit!==null)&&(un(e,0),Pa(e,Be,Gt,!1)),Dn(e,a),((Ke&2)===0||e!==Fe)&&(e===Fe&&((Ke&2)===0&&(js|=a),lt===4&&Pa(e,Be,Gt,!1)),ha(e))}function Xf(e,t,a){if((Ke&6)!==0)throw Error(r(327));var n=!a&&(t&127)===0&&(t&e.expiredLanes)===0||Rn(e,t),o=n?Tg(e,t):ec(e,t,!0),u=n;do{if(o===0){rn&&!n&&Pa(e,t,0,!1);break}else{if(a=e.current.alternate,u&&!Ng(a)){o=ec(e,t,!1),u=!1;continue}if(o===2){if(u=t,e.errorRecoveryDisabledLanes&u)var m=0;else m=e.pendingLanes&-536870913,m=m!==0?m:m&536870912?536870912:0;if(m!==0){t=m;e:{var v=e;o=dl;var _=v.current.memoizedState.isDehydrated;if(_&&(un(v,m).flags|=256),m=ec(v,m,!1),m!==2){if(Xo&&!_){v.errorRecoveryDisabledLanes|=u,js|=u,o=4;break e}u=Ut,Ut=o,u!==null&&(Ut===null?Ut=u:Ut.push.apply(Ut,u))}o=m}if(u=!1,o!==2)continue}}if(o===1){un(e,0),Pa(e,t,0,!0);break}e:{switch(n=e,u=o,u){case 0:case 1:throw Error(r(345));case 4:if((t&4194048)!==t)break;case 6:Pa(n,t,Gt,!Xa);break e;case 2:Ut=null;break;case 3:case 5:break;default:throw Error(r(329))}if((t&62914560)===t&&(o=Oi+300-Ye(),10<o)){if(Pa(n,t,Gt,!Xa),$l(n,0,!0)!==0)break e;ka=t,n.timeoutHandle=jh(Qf.bind(null,n,a,Ut,Ci,Jo,t,Gt,js,on,Xa,u,"Throttled",-0,0),o);break e}Qf(n,a,Ut,Ci,Jo,t,Gt,js,on,Xa,u,null,-0,0)}}break}while(!0);ha(e)}function Qf(e,t,a,n,o,u,m,v,_,z,X,ee,B,V){if(e.timeoutHandle=-1,ee=t.subtreeFlags,ee&8192||(ee&16785408)===16785408){ee={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ga},Hf(t,u,ee);var xe=(u&62914560)===u?Oi-Ye():(u&4194048)===u?Gf-Ye():0;if(xe=cp(ee,xe),xe!==null){ka=u,e.cancelPendingCommit=xe(ah.bind(null,e,t,u,a,n,o,m,v,_,X,ee,null,B,V)),Pa(e,u,m,!z);return}}ah(e,t,u,a,n,o,m,v,_)}function Ng(e){for(var t=e;;){var a=t.tag;if((a===0||a===11||a===15)&&t.flags&16384&&(a=t.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var n=0;n<a.length;n++){var o=a[n],u=o.getSnapshot;o=o.value;try{if(!Bt(u(),o))return!1}catch{return!1}}if(a=t.child,t.subtreeFlags&16384&&a!==null)a.return=t,t=a;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Pa(e,t,a,n){t&=~Qo,t&=~js,e.suspendedLanes|=t,e.pingedLanes&=~t,n&&(e.warmLanes|=t),n=e.expirationTimes;for(var o=t;0<o;){var u=31-qt(o),m=1<<u;n[u]=-1,o&=~m}a!==0&&su(e,a,t)}function Ri(){return(Ke&6)===0?(hl(0),!1):!0}function Fo(){if(Me!==null){if(Qe===0)var e=Me.return;else e=Me,xa=gs=null,go(e),Fs=null,Jn=0,e=Me;for(;e!==null;)Nf(e.alternate,e),e=e.return;Me=null}}function un(e,t){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,Yg(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),ka=0,Fo(),Fe=e,Me=a=ba(e.current,null),Be=t,Qe=0,Vt=null,Xa=!1,rn=Rn(e,t),Xo=!1,on=Gt=Qo=js=Qa=lt=0,Ut=dl=null,Jo=!1,(t&8)!==0&&(t|=t&32);var n=e.entangledLanes;if(n!==0)for(e=e.entanglements,n&=t;0<n;){var o=31-qt(n),u=1<<o;t|=e[o],n&=~u}return Oa=t,Fl(),a}function Jf(e,t){Re=null,A.H=sl,t===Ws||t===ri?(t=ud(),Qe=3):t===ao?(t=ud(),Qe=4):Qe=t===Co?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Vt=t,Me===null&&(lt=1,wi(e,Pt(t,e.current)))}function Zf(){var e=$t.current;return e===null?!0:(Be&4194048)===Be?ta===null:(Be&62914560)===Be||(Be&536870912)!==0?e===ta:!1}function Pf(){var e=A.H;return A.H=sl,e===null?sl:e}function Wf(){var e=A.A;return A.A=Sg,e}function Di(){lt=4,Xa||(Be&4194048)!==Be&&$t.current!==null||(rn=!0),(Qa&134217727)===0&&(js&134217727)===0||Fe===null||Pa(Fe,Be,Gt,!1)}function ec(e,t,a){var n=Ke;Ke|=2;var o=Pf(),u=Wf();(Fe!==e||Be!==t)&&(Ci=null,un(e,t)),t=!1;var m=lt;e:do try{if(Qe!==0&&Me!==null){var v=Me,_=Vt;switch(Qe){case 8:Fo(),m=6;break e;case 3:case 2:case 9:case 6:$t.current===null&&(t=!0);var z=Qe;if(Qe=0,Vt=null,dn(e,v,_,z),a&&rn){m=0;break e}break;default:z=Qe,Qe=0,Vt=null,dn(e,v,_,z)}}Eg(),m=lt;break}catch(X){Jf(e,X)}while(!0);return t&&e.shellSuspendCounter++,xa=gs=null,Ke=n,A.H=o,A.A=u,Me===null&&(Fe=null,Be=0,Fl()),m}function Eg(){for(;Me!==null;)Ff(Me)}function Tg(e,t){var a=Ke;Ke|=2;var n=Pf(),o=Wf();Fe!==e||Be!==t?(Ci=null,ki=Ye()+500,un(e,t)):rn=Rn(e,t);e:do try{if(Qe!==0&&Me!==null){t=Me;var u=Vt;t:switch(Qe){case 1:Qe=0,Vt=null,dn(e,t,u,1);break;case 2:case 9:if(od(u)){Qe=0,Vt=null,eh(t);break}t=function(){Qe!==2&&Qe!==9||Fe!==e||(Qe=7),ha(e)},u.then(t,t);break e;case 3:Qe=7;break e;case 4:Qe=5;break e;case 7:od(u)?(Qe=0,Vt=null,eh(t)):(Qe=0,Vt=null,dn(e,t,u,7));break;case 5:var m=null;switch(Me.tag){case 26:m=Me.memoizedState;case 5:case 27:var v=Me;if(m?Bh(m):v.stateNode.complete){Qe=0,Vt=null;var _=v.sibling;if(_!==null)Me=_;else{var z=v.return;z!==null?(Me=z,Ui(z)):Me=null}break t}}Qe=0,Vt=null,dn(e,t,u,5);break;case 6:Qe=0,Vt=null,dn(e,t,u,6);break;case 8:Fo(),lt=6;break e;default:throw Error(r(462))}}Ag();break}catch(X){Jf(e,X)}while(!0);return xa=gs=null,A.H=n,A.A=o,Ke=a,Me!==null?0:(Fe=null,Be=0,Fl(),lt)}function Ag(){for(;Me!==null&&!pe();)Ff(Me)}function Ff(e){var t=Sf(e.alternate,e,Oa);e.memoizedProps=e.pendingProps,t===null?Ui(e):Me=t}function eh(e){var t=e,a=t.alternate;switch(t.tag){case 15:case 0:t=bf(a,t,t.pendingProps,t.type,void 0,Be);break;case 11:t=bf(a,t,t.pendingProps,t.type.render,t.ref,Be);break;case 5:go(t);default:Nf(a,t),t=Me=Pu(t,Oa),t=Sf(a,t,Oa)}e.memoizedProps=e.pendingProps,t===null?Ui(e):Me=t}function dn(e,t,a,n){xa=gs=null,go(t),Fs=null,Jn=0;var o=t.return;try{if(pg(e,o,t,a,Be)){lt=1,wi(e,Pt(a,e.current)),Me=null;return}}catch(u){if(o!==null)throw Me=o,u;lt=1,wi(e,Pt(a,e.current)),Me=null;return}t.flags&32768?($e||n===1?e=!0:rn||(Be&536870912)!==0?e=!1:(Xa=e=!0,(n===2||n===9||n===3||n===6)&&(n=$t.current,n!==null&&n.tag===13&&(n.flags|=16384))),th(t,e)):Ui(t)}function Ui(e){var t=e;do{if((t.flags&32768)!==0){th(t,Xa);return}e=t.return;var a=xg(t.alternate,t,Oa);if(a!==null){Me=a;return}if(t=t.sibling,t!==null){Me=t;return}Me=t=e}while(t!==null);lt===0&&(lt=5)}function th(e,t){do{var a=yg(e.alternate,e);if(a!==null){a.flags&=32767,Me=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!t&&(e=e.sibling,e!==null)){Me=e;return}Me=e=a}while(e!==null);lt=6,Me=null}function ah(e,t,a,n,o,u,m,v,_){e.cancelPendingCommit=null;do zi();while(mt!==0);if((Ke&6)!==0)throw Error(r(327));if(t!==null){if(t===e.current)throw Error(r(177));if(u=t.lanes|t.childLanes,u|=$r,r0(e,a,u,m,v,_),e===Fe&&(Me=Fe=null,Be=0),cn=t,Za=e,ka=a,Zo=u,Po=o,Yf=n,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Rg(Mt,function(){return rh(),null})):(e.callbackNode=null,e.callbackPriority=0),n=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||n){n=A.T,A.T=null,o=R.p,R.p=2,m=Ke,Ke|=4;try{wg(e,t,a)}finally{Ke=m,R.p=o,A.T=n}}mt=1,sh(),nh(),lh()}}function sh(){if(mt===1){mt=0;var e=Za,t=cn,a=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||a){a=A.T,A.T=null;var n=R.p;R.p=2;var o=Ke;Ke|=4;try{Lf(t,e);var u=fc,m=Iu(e.containerInfo),v=u.focusedElem,_=u.selectionRange;if(m!==v&&v&&v.ownerDocument&&$u(v.ownerDocument.documentElement,v)){if(_!==null&&Mr(v)){var z=_.start,X=_.end;if(X===void 0&&(X=z),"selectionStart"in v)v.selectionStart=z,v.selectionEnd=Math.min(X,v.value.length);else{var ee=v.ownerDocument||document,B=ee&&ee.defaultView||window;if(B.getSelection){var V=B.getSelection(),xe=v.textContent.length,Ee=Math.min(_.start,xe),We=_.end===void 0?Ee:Math.min(_.end,xe);!V.extend&&Ee>We&&(m=We,We=Ee,Ee=m);var O=Hu(v,Ee),E=Hu(v,We);if(O&&E&&(V.rangeCount!==1||V.anchorNode!==O.node||V.anchorOffset!==O.offset||V.focusNode!==E.node||V.focusOffset!==E.offset)){var U=ee.createRange();U.setStart(O.node,O.offset),V.removeAllRanges(),Ee>We?(V.addRange(U),V.extend(E.node,E.offset)):(U.setEnd(E.node,E.offset),V.addRange(U))}}}}for(ee=[],V=v;V=V.parentNode;)V.nodeType===1&&ee.push({element:V,left:V.scrollLeft,top:V.scrollTop});for(typeof v.focus=="function"&&v.focus(),v=0;v<ee.length;v++){var P=ee[v];P.element.scrollLeft=P.left,P.element.scrollTop=P.top}}Xi=!!dc,fc=dc=null}finally{Ke=o,R.p=n,A.T=a}}e.current=t,mt=2}}function nh(){if(mt===2){mt=0;var e=Za,t=cn,a=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||a){a=A.T,A.T=null;var n=R.p;R.p=2;var o=Ke;Ke|=4;try{Rf(e,t.alternate,t)}finally{Ke=o,R.p=n,A.T=a}}mt=3}}function lh(){if(mt===4||mt===3){mt=0,ze();var e=Za,t=cn,a=ka,n=Yf;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?mt=5:(mt=0,cn=Za=null,ih(e,e.pendingLanes));var o=e.pendingLanes;if(o===0&&(Ja=null),br(a),t=t.stateNode,Lt&&typeof Lt.onCommitFiberRoot=="function")try{Lt.onCommitFiberRoot(Cn,t,void 0,(t.current.flags&128)===128)}catch{}if(n!==null){t=A.T,o=R.p,R.p=2,A.T=null;try{for(var u=e.onRecoverableError,m=0;m<n.length;m++){var v=n[m];u(v.value,{componentStack:v.stack})}}finally{A.T=t,R.p=o}}(ka&3)!==0&&zi(),ha(e),o=e.pendingLanes,(a&261930)!==0&&(o&42)!==0?e===Wo?fl++:(fl=0,Wo=e):fl=0,hl(0)}}function ih(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Xn(t)))}function zi(){return sh(),nh(),lh(),rh()}function rh(){if(mt!==5)return!1;var e=Za,t=Zo;Zo=0;var a=br(ka),n=A.T,o=R.p;try{R.p=32>a?32:a,A.T=null,a=Po,Po=null;var u=Za,m=ka;if(mt=0,cn=Za=null,ka=0,(Ke&6)!==0)throw Error(r(331));var v=Ke;if(Ke|=4,If(u.current),Bf(u,u.current,m,a),Ke=v,hl(0,!1),Lt&&typeof Lt.onPostCommitFiberRoot=="function")try{Lt.onPostCommitFiberRoot(Cn,u)}catch{}return!0}finally{R.p=o,A.T=n,ih(e,t)}}function oh(e,t,a){t=Pt(a,t),t=ko(e.stateNode,t,2),e=Va(e,t,2),e!==null&&(Dn(e,2),ha(e))}function Je(e,t,a){if(e.tag===3)oh(e,e,a);else for(;t!==null;){if(t.tag===3){oh(t,e,a);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Ja===null||!Ja.has(n))){e=Pt(a,e),a=cf(2),n=Va(t,a,2),n!==null&&(uf(a,n,t,e),Dn(n,2),ha(n));break}}t=t.return}}function tc(e,t,a){var n=e.pingCache;if(n===null){n=e.pingCache=new jg;var o=new Set;n.set(t,o)}else o=n.get(t),o===void 0&&(o=new Set,n.set(t,o));o.has(a)||(Xo=!0,o.add(a),e=Og.bind(null,e,t,a),t.then(e,e))}function Og(e,t,a){var n=e.pingCache;n!==null&&n.delete(t),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,Fe===e&&(Be&a)===a&&(lt===4||lt===3&&(Be&62914560)===Be&&300>Ye()-Oi?(Ke&2)===0&&un(e,0):Qo|=a,on===Be&&(on=0)),ha(e)}function ch(e,t){t===0&&(t=au()),e=fs(e,t),e!==null&&(Dn(e,t),ha(e))}function kg(e){var t=e.memoizedState,a=0;t!==null&&(a=t.retryLane),ch(e,a)}function Cg(e,t){var a=0;switch(e.tag){case 31:case 13:var n=e.stateNode,o=e.memoizedState;o!==null&&(a=o.retryLane);break;case 19:n=e.stateNode;break;case 22:n=e.stateNode._retryCache;break;default:throw Error(r(314))}n!==null&&n.delete(t),ch(e,a)}function Rg(e,t){return D(e,t)}var Mi=null,fn=null,ac=!1,Li=!1,sc=!1,Wa=0;function ha(e){e!==fn&&e.next===null&&(fn===null?Mi=fn=e:fn=fn.next=e),Li=!0,ac||(ac=!0,Ug())}function hl(e,t){if(!sc&&Li){sc=!0;do for(var a=!1,n=Mi;n!==null;){if(e!==0){var o=n.pendingLanes;if(o===0)var u=0;else{var m=n.suspendedLanes,v=n.pingedLanes;u=(1<<31-qt(42|e)+1)-1,u&=o&~(m&~v),u=u&201326741?u&201326741|1:u?u|2:0}u!==0&&(a=!0,hh(n,u))}else u=Be,u=$l(n,n===Fe?u:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),(u&3)===0||Rn(n,u)||(a=!0,hh(n,u));n=n.next}while(a);sc=!1}}function Dg(){uh()}function uh(){Li=ac=!1;var e=0;Wa!==0&&Gg()&&(e=Wa);for(var t=Ye(),a=null,n=Mi;n!==null;){var o=n.next,u=dh(n,t);u===0?(n.next=null,a===null?Mi=o:a.next=o,o===null&&(fn=a)):(a=n,(e!==0||(u&3)!==0)&&(Li=!0)),n=o}mt!==0&&mt!==5||hl(e),Wa!==0&&(Wa=0)}function dh(e,t){for(var a=e.suspendedLanes,n=e.pingedLanes,o=e.expirationTimes,u=e.pendingLanes&-62914561;0<u;){var m=31-qt(u),v=1<<m,_=o[m];_===-1?((v&a)===0||(v&n)!==0)&&(o[m]=i0(v,t)):_<=t&&(e.expiredLanes|=v),u&=~v}if(t=Fe,a=Be,a=$l(e,e===t?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),n=e.callbackNode,a===0||e===t&&(Qe===2||Qe===9)||e.cancelPendingCommit!==null)return n!==null&&n!==null&&I(n),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||Rn(e,a)){if(t=a&-a,t===e.callbackPriority)return t;switch(n!==null&&I(n),br(a)){case 2:case 8:a=vt;break;case 32:a=Mt;break;case 268435456:a=kn;break;default:a=Mt}return n=fh.bind(null,e),a=D(a,n),e.callbackPriority=t,e.callbackNode=a,t}return n!==null&&n!==null&&I(n),e.callbackPriority=2,e.callbackNode=null,2}function fh(e,t){if(mt!==0&&mt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(zi()&&e.callbackNode!==a)return null;var n=Be;return n=$l(e,e===Fe?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),n===0?null:(Xf(e,n,t),dh(e,Ye()),e.callbackNode!=null&&e.callbackNode===a?fh.bind(null,e):null)}function hh(e,t){if(zi())return null;Xf(e,t,!0)}function Ug(){Kg(function(){(Ke&6)!==0?D(Ie,Dg):uh()})}function nc(){if(Wa===0){var e=Zs;e===0&&(e=ql,ql<<=1,(ql&261888)===0&&(ql=256)),Wa=e}return Wa}function mh(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Yl(""+e)}function gh(e,t){var a=t.ownerDocument.createElement("input");return a.name=t.name,a.value=t.value,e.id&&a.setAttribute("form",e.id),t.parentNode.insertBefore(a,t),e=new FormData(e),a.parentNode.removeChild(a),e}function zg(e,t,a,n,o){if(t==="submit"&&a&&a.stateNode===o){var u=mh((o[Ot]||null).action),m=n.submitter;m&&(t=(t=m[Ot]||null)?mh(t.formAction):m.getAttribute("formAction"),t!==null&&(u=t,m=null));var v=new Jl("action","action",null,n,o);e.push({event:v,listeners:[{instance:null,listener:function(){if(n.defaultPrevented){if(Wa!==0){var _=m?gh(o,m):new FormData(o);jo(a,{pending:!0,data:_,method:o.method,action:u},null,_)}}else typeof u=="function"&&(v.preventDefault(),_=m?gh(o,m):new FormData(o),jo(a,{pending:!0,data:_,method:o.method,action:u},u,_))},currentTarget:o}]})}}for(var lc=0;lc<Hr.length;lc++){var ic=Hr[lc],Mg=ic.toLowerCase(),Lg=ic[0].toUpperCase()+ic.slice(1);na(Mg,"on"+Lg)}na(Yu,"onAnimationEnd"),na(Ku,"onAnimationIteration"),na(Xu,"onAnimationStart"),na("dblclick","onDoubleClick"),na("focusin","onFocus"),na("focusout","onBlur"),na(F0,"onTransitionRun"),na(eg,"onTransitionStart"),na(tg,"onTransitionCancel"),na(Qu,"onTransitionEnd"),Ms("onMouseEnter",["mouseout","mouseover"]),Ms("onMouseLeave",["mouseout","mouseover"]),Ms("onPointerEnter",["pointerout","pointerover"]),Ms("onPointerLeave",["pointerout","pointerover"]),os("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),os("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),os("onBeforeInput",["compositionend","keypress","textInput","paste"]),os("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),os("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),os("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ml="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qg=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ml));function ph(e,t){t=(t&4)!==0;for(var a=0;a<e.length;a++){var n=e[a],o=n.event;n=n.listeners;e:{var u=void 0;if(t)for(var m=n.length-1;0<=m;m--){var v=n[m],_=v.instance,z=v.currentTarget;if(v=v.listener,_!==u&&o.isPropagationStopped())break e;u=v,o.currentTarget=z;try{u(o)}catch(X){Wl(X)}o.currentTarget=null,u=_}else for(m=0;m<n.length;m++){if(v=n[m],_=v.instance,z=v.currentTarget,v=v.listener,_!==u&&o.isPropagationStopped())break e;u=v,o.currentTarget=z;try{u(o)}catch(X){Wl(X)}o.currentTarget=null,u=_}}}}function Le(e,t){var a=t[vr];a===void 0&&(a=t[vr]=new Set);var n=e+"__bubble";a.has(n)||(bh(t,e,2,!1),a.add(n))}function rc(e,t,a){var n=0;t&&(n|=4),bh(a,e,n,t)}var qi="_reactListening"+Math.random().toString(36).slice(2);function oc(e){if(!e[qi]){e[qi]=!0,cu.forEach(function(a){a!=="selectionchange"&&(qg.has(a)||rc(a,!1,e),rc(a,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[qi]||(t[qi]=!0,rc("selectionchange",!1,t))}}function bh(e,t,a,n){switch(Kh(t)){case 2:var o=fp;break;case 8:o=hp;break;default:o=Sc}a=o.bind(null,t,a,e),o=void 0,!Tr||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),n?o!==void 0?e.addEventListener(t,a,{capture:!0,passive:o}):e.addEventListener(t,a,!0):o!==void 0?e.addEventListener(t,a,{passive:o}):e.addEventListener(t,a,!1)}function cc(e,t,a,n,o){var u=n;if((t&1)===0&&(t&2)===0&&n!==null)e:for(;;){if(n===null)return;var m=n.tag;if(m===3||m===4){var v=n.stateNode.containerInfo;if(v===o)break;if(m===4)for(m=n.return;m!==null;){var _=m.tag;if((_===3||_===4)&&m.stateNode.containerInfo===o)return;m=m.return}for(;v!==null;){if(m=Ds(v),m===null)return;if(_=m.tag,_===5||_===6||_===26||_===27){n=u=m;continue e}v=v.parentNode}}n=n.return}wu(function(){var z=u,X=Nr(a),ee=[];e:{var B=Ju.get(e);if(B!==void 0){var V=Jl,xe=e;switch(e){case"keypress":if(Xl(a)===0)break e;case"keydown":case"keyup":V=C0;break;case"focusin":xe="focus",V=Cr;break;case"focusout":xe="blur",V=Cr;break;case"beforeblur":case"afterblur":V=Cr;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":V=ju;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":V=x0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":V=U0;break;case Yu:case Ku:case Xu:V=_0;break;case Qu:V=M0;break;case"scroll":case"scrollend":V=b0;break;case"wheel":V=q0;break;case"copy":case"cut":case"paste":V=j0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":V=Eu;break;case"toggle":case"beforetoggle":V=H0}var Ee=(t&4)!==0,We=!Ee&&(e==="scroll"||e==="scrollend"),O=Ee?B!==null?B+"Capture":null:B;Ee=[];for(var E=z,U;E!==null;){var P=E;if(U=P.stateNode,P=P.tag,P!==5&&P!==26&&P!==27||U===null||O===null||(P=Mn(E,O),P!=null&&Ee.push(gl(E,P,U))),We)break;E=E.return}0<Ee.length&&(B=new V(B,xe,null,a,X),ee.push({event:B,listeners:Ee}))}}if((t&7)===0){e:{if(B=e==="mouseover"||e==="pointerover",V=e==="mouseout"||e==="pointerout",B&&a!==jr&&(xe=a.relatedTarget||a.fromElement)&&(Ds(xe)||xe[Rs]))break e;if((V||B)&&(B=X.window===X?X:(B=X.ownerDocument)?B.defaultView||B.parentWindow:window,V?(xe=a.relatedTarget||a.toElement,V=z,xe=xe?Ds(xe):null,xe!==null&&(We=f(xe),Ee=xe.tag,xe!==We||Ee!==5&&Ee!==27&&Ee!==6)&&(xe=null)):(V=null,xe=z),V!==xe)){if(Ee=ju,P="onMouseLeave",O="onMouseEnter",E="mouse",(e==="pointerout"||e==="pointerover")&&(Ee=Eu,P="onPointerLeave",O="onPointerEnter",E="pointer"),We=V==null?B:zn(V),U=xe==null?B:zn(xe),B=new Ee(P,E+"leave",V,a,X),B.target=We,B.relatedTarget=U,P=null,Ds(X)===z&&(Ee=new Ee(O,E+"enter",xe,a,X),Ee.target=U,Ee.relatedTarget=We,P=Ee),We=P,V&&xe)t:{for(Ee=Bg,O=V,E=xe,U=0,P=O;P;P=Ee(P))U++;P=0;for(var Ne=E;Ne;Ne=Ee(Ne))P++;for(;0<U-P;)O=Ee(O),U--;for(;0<P-U;)E=Ee(E),P--;for(;U--;){if(O===E||E!==null&&O===E.alternate){Ee=O;break t}O=Ee(O),E=Ee(E)}Ee=null}else Ee=null;V!==null&&vh(ee,B,V,Ee,!1),xe!==null&&We!==null&&vh(ee,We,xe,Ee,!0)}}e:{if(B=z?zn(z):window,V=B.nodeName&&B.nodeName.toLowerCase(),V==="select"||V==="input"&&B.type==="file")var Ve=Uu;else if(Ru(B))if(zu)Ve=Z0;else{Ve=Q0;var _e=X0}else V=B.nodeName,!V||V.toLowerCase()!=="input"||B.type!=="checkbox"&&B.type!=="radio"?z&&Sr(z.elementType)&&(Ve=Uu):Ve=J0;if(Ve&&(Ve=Ve(e,z))){Du(ee,Ve,a,X);break e}_e&&_e(e,B,z),e==="focusout"&&z&&B.type==="number"&&z.memoizedProps.value!=null&&_r(B,"number",B.value)}switch(_e=z?zn(z):window,e){case"focusin":(Ru(_e)||_e.contentEditable==="true")&&(Is=_e,Lr=z,Gn=null);break;case"focusout":Gn=Lr=Is=null;break;case"mousedown":qr=!0;break;case"contextmenu":case"mouseup":case"dragend":qr=!1,Vu(ee,a,X);break;case"selectionchange":if(W0)break;case"keydown":case"keyup":Vu(ee,a,X)}var De;if(Dr)e:{switch(e){case"compositionstart":var He="onCompositionStart";break e;case"compositionend":He="onCompositionEnd";break e;case"compositionupdate":He="onCompositionUpdate";break e}He=void 0}else $s?ku(e,a)&&(He="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(He="onCompositionStart");He&&(Tu&&a.locale!=="ko"&&($s||He!=="onCompositionStart"?He==="onCompositionEnd"&&$s&&(De=_u()):(Ma=X,Ar="value"in Ma?Ma.value:Ma.textContent,$s=!0)),_e=Bi(z,He),0<_e.length&&(He=new Nu(He,e,null,a,X),ee.push({event:He,listeners:_e}),De?He.data=De:(De=Cu(a),De!==null&&(He.data=De)))),(De=I0?V0(e,a):G0(e,a))&&(He=Bi(z,"onBeforeInput"),0<He.length&&(_e=new Nu("onBeforeInput","beforeinput",null,a,X),ee.push({event:_e,listeners:He}),_e.data=De)),zg(ee,e,z,a,X)}ph(ee,t)})}function gl(e,t,a){return{instance:e,listener:t,currentTarget:a}}function Bi(e,t){for(var a=t+"Capture",n=[];e!==null;){var o=e,u=o.stateNode;if(o=o.tag,o!==5&&o!==26&&o!==27||u===null||(o=Mn(e,a),o!=null&&n.unshift(gl(e,o,u)),o=Mn(e,t),o!=null&&n.push(gl(e,o,u))),e.tag===3)return n;e=e.return}return[]}function Bg(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function vh(e,t,a,n,o){for(var u=t._reactName,m=[];a!==null&&a!==n;){var v=a,_=v.alternate,z=v.stateNode;if(v=v.tag,_!==null&&_===n)break;v!==5&&v!==26&&v!==27||z===null||(_=z,o?(z=Mn(a,u),z!=null&&m.unshift(gl(a,z,_))):o||(z=Mn(a,u),z!=null&&m.push(gl(a,z,_)))),a=a.return}m.length!==0&&e.push({event:t,listeners:m})}var Hg=/\r\n?/g,$g=/\u0000|\uFFFD/g;function xh(e){return(typeof e=="string"?e:""+e).replace(Hg,`
`).replace($g,"")}function yh(e,t){return t=xh(t),xh(e)===t}function Pe(e,t,a,n,o,u){switch(a){case"children":typeof n=="string"?t==="body"||t==="textarea"&&n===""||qs(e,n):(typeof n=="number"||typeof n=="bigint")&&t!=="body"&&qs(e,""+n);break;case"className":Vl(e,"class",n);break;case"tabIndex":Vl(e,"tabindex",n);break;case"dir":case"role":case"viewBox":case"width":case"height":Vl(e,a,n);break;case"style":xu(e,n,u);break;case"data":if(t!=="object"){Vl(e,"data",n);break}case"src":case"href":if(n===""&&(t!=="a"||a!=="href")){e.removeAttribute(a);break}if(n==null||typeof n=="function"||typeof n=="symbol"||typeof n=="boolean"){e.removeAttribute(a);break}n=Yl(""+n),e.setAttribute(a,n);break;case"action":case"formAction":if(typeof n=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof u=="function"&&(a==="formAction"?(t!=="input"&&Pe(e,t,"name",o.name,o,null),Pe(e,t,"formEncType",o.formEncType,o,null),Pe(e,t,"formMethod",o.formMethod,o,null),Pe(e,t,"formTarget",o.formTarget,o,null)):(Pe(e,t,"encType",o.encType,o,null),Pe(e,t,"method",o.method,o,null),Pe(e,t,"target",o.target,o,null)));if(n==null||typeof n=="symbol"||typeof n=="boolean"){e.removeAttribute(a);break}n=Yl(""+n),e.setAttribute(a,n);break;case"onClick":n!=null&&(e.onclick=ga);break;case"onScroll":n!=null&&Le("scroll",e);break;case"onScrollEnd":n!=null&&Le("scrollend",e);break;case"dangerouslySetInnerHTML":if(n!=null){if(typeof n!="object"||!("__html"in n))throw Error(r(61));if(a=n.__html,a!=null){if(o.children!=null)throw Error(r(60));e.innerHTML=a}}break;case"multiple":e.multiple=n&&typeof n!="function"&&typeof n!="symbol";break;case"muted":e.muted=n&&typeof n!="function"&&typeof n!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(n==null||typeof n=="function"||typeof n=="boolean"||typeof n=="symbol"){e.removeAttribute("xlink:href");break}a=Yl(""+n),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":n!=null&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(a,""+n):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":n&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":n===!0?e.setAttribute(a,""):n!==!1&&n!=null&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(a,n):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":n!=null&&typeof n!="function"&&typeof n!="symbol"&&!isNaN(n)&&1<=n?e.setAttribute(a,n):e.removeAttribute(a);break;case"rowSpan":case"start":n==null||typeof n=="function"||typeof n=="symbol"||isNaN(n)?e.removeAttribute(a):e.setAttribute(a,n);break;case"popover":Le("beforetoggle",e),Le("toggle",e),Il(e,"popover",n);break;case"xlinkActuate":ma(e,"http://www.w3.org/1999/xlink","xlink:actuate",n);break;case"xlinkArcrole":ma(e,"http://www.w3.org/1999/xlink","xlink:arcrole",n);break;case"xlinkRole":ma(e,"http://www.w3.org/1999/xlink","xlink:role",n);break;case"xlinkShow":ma(e,"http://www.w3.org/1999/xlink","xlink:show",n);break;case"xlinkTitle":ma(e,"http://www.w3.org/1999/xlink","xlink:title",n);break;case"xlinkType":ma(e,"http://www.w3.org/1999/xlink","xlink:type",n);break;case"xmlBase":ma(e,"http://www.w3.org/XML/1998/namespace","xml:base",n);break;case"xmlLang":ma(e,"http://www.w3.org/XML/1998/namespace","xml:lang",n);break;case"xmlSpace":ma(e,"http://www.w3.org/XML/1998/namespace","xml:space",n);break;case"is":Il(e,"is",n);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=g0.get(a)||a,Il(e,a,n))}}function uc(e,t,a,n,o,u){switch(a){case"style":xu(e,n,u);break;case"dangerouslySetInnerHTML":if(n!=null){if(typeof n!="object"||!("__html"in n))throw Error(r(61));if(a=n.__html,a!=null){if(o.children!=null)throw Error(r(60));e.innerHTML=a}}break;case"children":typeof n=="string"?qs(e,n):(typeof n=="number"||typeof n=="bigint")&&qs(e,""+n);break;case"onScroll":n!=null&&Le("scroll",e);break;case"onScrollEnd":n!=null&&Le("scrollend",e);break;case"onClick":n!=null&&(e.onclick=ga);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!uu.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(o=a.endsWith("Capture"),t=a.slice(2,o?a.length-7:void 0),u=e[Ot]||null,u=u!=null?u[a]:null,typeof u=="function"&&e.removeEventListener(t,u,o),typeof n=="function")){typeof u!="function"&&u!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(t,n,o);break e}a in e?e[a]=n:n===!0?e.setAttribute(a,""):Il(e,a,n)}}}function St(e,t,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Le("error",e),Le("load",e);var n=!1,o=!1,u;for(u in a)if(a.hasOwnProperty(u)){var m=a[u];if(m!=null)switch(u){case"src":n=!0;break;case"srcSet":o=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,t));default:Pe(e,t,u,m,a,null)}}o&&Pe(e,t,"srcSet",a.srcSet,a,null),n&&Pe(e,t,"src",a.src,a,null);return;case"input":Le("invalid",e);var v=u=m=o=null,_=null,z=null;for(n in a)if(a.hasOwnProperty(n)){var X=a[n];if(X!=null)switch(n){case"name":o=X;break;case"type":m=X;break;case"checked":_=X;break;case"defaultChecked":z=X;break;case"value":u=X;break;case"defaultValue":v=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(r(137,t));break;default:Pe(e,t,n,X,a,null)}}gu(e,u,v,_,z,m,o,!1);return;case"select":Le("invalid",e),n=m=u=null;for(o in a)if(a.hasOwnProperty(o)&&(v=a[o],v!=null))switch(o){case"value":u=v;break;case"defaultValue":m=v;break;case"multiple":n=v;default:Pe(e,t,o,v,a,null)}t=u,a=m,e.multiple=!!n,t!=null?Ls(e,!!n,t,!1):a!=null&&Ls(e,!!n,a,!0);return;case"textarea":Le("invalid",e),u=o=n=null;for(m in a)if(a.hasOwnProperty(m)&&(v=a[m],v!=null))switch(m){case"value":n=v;break;case"defaultValue":o=v;break;case"children":u=v;break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(r(91));break;default:Pe(e,t,m,v,a,null)}bu(e,n,o,u);return;case"option":for(_ in a)if(a.hasOwnProperty(_)&&(n=a[_],n!=null))switch(_){case"selected":e.selected=n&&typeof n!="function"&&typeof n!="symbol";break;default:Pe(e,t,_,n,a,null)}return;case"dialog":Le("beforetoggle",e),Le("toggle",e),Le("cancel",e),Le("close",e);break;case"iframe":case"object":Le("load",e);break;case"video":case"audio":for(n=0;n<ml.length;n++)Le(ml[n],e);break;case"image":Le("error",e),Le("load",e);break;case"details":Le("toggle",e);break;case"embed":case"source":case"link":Le("error",e),Le("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(z in a)if(a.hasOwnProperty(z)&&(n=a[z],n!=null))switch(z){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,t));default:Pe(e,t,z,n,a,null)}return;default:if(Sr(t)){for(X in a)a.hasOwnProperty(X)&&(n=a[X],n!==void 0&&uc(e,t,X,n,a,void 0));return}}for(v in a)a.hasOwnProperty(v)&&(n=a[v],n!=null&&Pe(e,t,v,n,a,null))}function Ig(e,t,a,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var o=null,u=null,m=null,v=null,_=null,z=null,X=null;for(V in a){var ee=a[V];if(a.hasOwnProperty(V)&&ee!=null)switch(V){case"checked":break;case"value":break;case"defaultValue":_=ee;default:n.hasOwnProperty(V)||Pe(e,t,V,null,n,ee)}}for(var B in n){var V=n[B];if(ee=a[B],n.hasOwnProperty(B)&&(V!=null||ee!=null))switch(B){case"type":u=V;break;case"name":o=V;break;case"checked":z=V;break;case"defaultChecked":X=V;break;case"value":m=V;break;case"defaultValue":v=V;break;case"children":case"dangerouslySetInnerHTML":if(V!=null)throw Error(r(137,t));break;default:V!==ee&&Pe(e,t,B,V,n,ee)}}wr(e,m,v,_,z,X,u,o);return;case"select":V=m=v=B=null;for(u in a)if(_=a[u],a.hasOwnProperty(u)&&_!=null)switch(u){case"value":break;case"multiple":V=_;default:n.hasOwnProperty(u)||Pe(e,t,u,null,n,_)}for(o in n)if(u=n[o],_=a[o],n.hasOwnProperty(o)&&(u!=null||_!=null))switch(o){case"value":B=u;break;case"defaultValue":v=u;break;case"multiple":m=u;default:u!==_&&Pe(e,t,o,u,n,_)}t=v,a=m,n=V,B!=null?Ls(e,!!a,B,!1):!!n!=!!a&&(t!=null?Ls(e,!!a,t,!0):Ls(e,!!a,a?[]:"",!1));return;case"textarea":V=B=null;for(v in a)if(o=a[v],a.hasOwnProperty(v)&&o!=null&&!n.hasOwnProperty(v))switch(v){case"value":break;case"children":break;default:Pe(e,t,v,null,n,o)}for(m in n)if(o=n[m],u=a[m],n.hasOwnProperty(m)&&(o!=null||u!=null))switch(m){case"value":B=o;break;case"defaultValue":V=o;break;case"children":break;case"dangerouslySetInnerHTML":if(o!=null)throw Error(r(91));break;default:o!==u&&Pe(e,t,m,o,n,u)}pu(e,B,V);return;case"option":for(var xe in a)if(B=a[xe],a.hasOwnProperty(xe)&&B!=null&&!n.hasOwnProperty(xe))switch(xe){case"selected":e.selected=!1;break;default:Pe(e,t,xe,null,n,B)}for(_ in n)if(B=n[_],V=a[_],n.hasOwnProperty(_)&&B!==V&&(B!=null||V!=null))switch(_){case"selected":e.selected=B&&typeof B!="function"&&typeof B!="symbol";break;default:Pe(e,t,_,B,n,V)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ee in a)B=a[Ee],a.hasOwnProperty(Ee)&&B!=null&&!n.hasOwnProperty(Ee)&&Pe(e,t,Ee,null,n,B);for(z in n)if(B=n[z],V=a[z],n.hasOwnProperty(z)&&B!==V&&(B!=null||V!=null))switch(z){case"children":case"dangerouslySetInnerHTML":if(B!=null)throw Error(r(137,t));break;default:Pe(e,t,z,B,n,V)}return;default:if(Sr(t)){for(var We in a)B=a[We],a.hasOwnProperty(We)&&B!==void 0&&!n.hasOwnProperty(We)&&uc(e,t,We,void 0,n,B);for(X in n)B=n[X],V=a[X],!n.hasOwnProperty(X)||B===V||B===void 0&&V===void 0||uc(e,t,X,B,n,V);return}}for(var O in a)B=a[O],a.hasOwnProperty(O)&&B!=null&&!n.hasOwnProperty(O)&&Pe(e,t,O,null,n,B);for(ee in n)B=n[ee],V=a[ee],!n.hasOwnProperty(ee)||B===V||B==null&&V==null||Pe(e,t,ee,B,n,V)}function wh(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Vg(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,a=performance.getEntriesByType("resource"),n=0;n<a.length;n++){var o=a[n],u=o.transferSize,m=o.initiatorType,v=o.duration;if(u&&v&&wh(m)){for(m=0,v=o.responseEnd,n+=1;n<a.length;n++){var _=a[n],z=_.startTime;if(z>v)break;var X=_.transferSize,ee=_.initiatorType;X&&wh(ee)&&(_=_.responseEnd,m+=X*(_<v?1:(v-z)/(_-z)))}if(--n,t+=8*(u+m)/(o.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var dc=null,fc=null;function Hi(e){return e.nodeType===9?e:e.ownerDocument}function _h(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Sh(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function hc(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var mc=null;function Gg(){var e=window.event;return e&&e.type==="popstate"?e===mc?!1:(mc=e,!0):(mc=null,!1)}var jh=typeof setTimeout=="function"?setTimeout:void 0,Yg=typeof clearTimeout=="function"?clearTimeout:void 0,Nh=typeof Promise=="function"?Promise:void 0,Kg=typeof queueMicrotask=="function"?queueMicrotask:typeof Nh<"u"?function(e){return Nh.resolve(null).then(e).catch(Xg)}:jh;function Xg(e){setTimeout(function(){throw e})}function Fa(e){return e==="head"}function Eh(e,t){var a=t,n=0;do{var o=a.nextSibling;if(e.removeChild(a),o&&o.nodeType===8)if(a=o.data,a==="/$"||a==="/&"){if(n===0){e.removeChild(o),pn(t);return}n--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")n++;else if(a==="html")pl(e.ownerDocument.documentElement);else if(a==="head"){a=e.ownerDocument.head,pl(a);for(var u=a.firstChild;u;){var m=u.nextSibling,v=u.nodeName;u[Un]||v==="SCRIPT"||v==="STYLE"||v==="LINK"&&u.rel.toLowerCase()==="stylesheet"||a.removeChild(u),u=m}}else a==="body"&&pl(e.ownerDocument.body);a=o}while(a);pn(t)}function Th(e,t){var a=e;e=0;do{var n=a.nextSibling;if(a.nodeType===1?t?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(t?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),n&&n.nodeType===8)if(a=n.data,a==="/$"){if(e===0)break;e--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||e++;a=n}while(a)}function gc(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var a=t;switch(t=t.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":gc(a),xr(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function Qg(e,t,a,n){for(;e.nodeType===1;){var o=a;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!n&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(n){if(!e[Un])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(u=e.getAttribute("rel"),u==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(u!==o.rel||e.getAttribute("href")!==(o.href==null||o.href===""?null:o.href)||e.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin)||e.getAttribute("title")!==(o.title==null?null:o.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(u=e.getAttribute("src"),(u!==(o.src==null?null:o.src)||e.getAttribute("type")!==(o.type==null?null:o.type)||e.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin))&&u&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var u=o.name==null?null:""+o.name;if(o.type==="hidden"&&e.getAttribute("name")===u)return e}else return e;if(e=aa(e.nextSibling),e===null)break}return null}function Jg(e,t,a){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=aa(e.nextSibling),e===null))return null;return e}function Ah(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=aa(e.nextSibling),e===null))return null;return e}function pc(e){return e.data==="$?"||e.data==="$~"}function bc(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function Zg(e,t){var a=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||a.readyState!=="loading")t();else{var n=function(){t(),a.removeEventListener("DOMContentLoaded",n)};a.addEventListener("DOMContentLoaded",n),e._reactRetry=n}}function aa(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var vc=null;function Oh(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"||a==="/&"){if(t===0)return aa(e.nextSibling);t--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||t++}e=e.nextSibling}return null}function kh(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(t===0)return e;t--}else a!=="/$"&&a!=="/&"||t++}e=e.previousSibling}return null}function Ch(e,t,a){switch(t=Hi(a),e){case"html":if(e=t.documentElement,!e)throw Error(r(452));return e;case"head":if(e=t.head,!e)throw Error(r(453));return e;case"body":if(e=t.body,!e)throw Error(r(454));return e;default:throw Error(r(451))}}function pl(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);xr(e)}var sa=new Map,Rh=new Set;function $i(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Ca=R.d;R.d={f:Pg,r:Wg,D:Fg,C:ep,L:tp,m:ap,X:np,S:sp,M:lp};function Pg(){var e=Ca.f(),t=Ri();return e||t}function Wg(e){var t=Us(e);t!==null&&t.tag===5&&t.type==="form"?Qd(t):Ca.r(e)}var hn=typeof document>"u"?null:document;function Dh(e,t,a){var n=hn;if(n&&typeof t=="string"&&t){var o=Jt(t);o='link[rel="'+e+'"][href="'+o+'"]',typeof a=="string"&&(o+='[crossorigin="'+a+'"]'),Rh.has(o)||(Rh.add(o),e={rel:e,crossOrigin:a,href:t},n.querySelector(o)===null&&(t=n.createElement("link"),St(t,"link",e),pt(t),n.head.appendChild(t)))}}function Fg(e){Ca.D(e),Dh("dns-prefetch",e,null)}function ep(e,t){Ca.C(e,t),Dh("preconnect",e,t)}function tp(e,t,a){Ca.L(e,t,a);var n=hn;if(n&&e&&t){var o='link[rel="preload"][as="'+Jt(t)+'"]';t==="image"&&a&&a.imageSrcSet?(o+='[imagesrcset="'+Jt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(o+='[imagesizes="'+Jt(a.imageSizes)+'"]')):o+='[href="'+Jt(e)+'"]';var u=o;switch(t){case"style":u=mn(e);break;case"script":u=gn(e)}sa.has(u)||(e=S({rel:"preload",href:t==="image"&&a&&a.imageSrcSet?void 0:e,as:t},a),sa.set(u,e),n.querySelector(o)!==null||t==="style"&&n.querySelector(bl(u))||t==="script"&&n.querySelector(vl(u))||(t=n.createElement("link"),St(t,"link",e),pt(t),n.head.appendChild(t)))}}function ap(e,t){Ca.m(e,t);var a=hn;if(a&&e){var n=t&&typeof t.as=="string"?t.as:"script",o='link[rel="modulepreload"][as="'+Jt(n)+'"][href="'+Jt(e)+'"]',u=o;switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":u=gn(e)}if(!sa.has(u)&&(e=S({rel:"modulepreload",href:e},t),sa.set(u,e),a.querySelector(o)===null)){switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(vl(u)))return}n=a.createElement("link"),St(n,"link",e),pt(n),a.head.appendChild(n)}}}function sp(e,t,a){Ca.S(e,t,a);var n=hn;if(n&&e){var o=zs(n).hoistableStyles,u=mn(e);t=t||"default";var m=o.get(u);if(!m){var v={loading:0,preload:null};if(m=n.querySelector(bl(u)))v.loading=5;else{e=S({rel:"stylesheet",href:e,"data-precedence":t},a),(a=sa.get(u))&&xc(e,a);var _=m=n.createElement("link");pt(_),St(_,"link",e),_._p=new Promise(function(z,X){_.onload=z,_.onerror=X}),_.addEventListener("load",function(){v.loading|=1}),_.addEventListener("error",function(){v.loading|=2}),v.loading|=4,Ii(m,t,n)}m={type:"stylesheet",instance:m,count:1,state:v},o.set(u,m)}}}function np(e,t){Ca.X(e,t);var a=hn;if(a&&e){var n=zs(a).hoistableScripts,o=gn(e),u=n.get(o);u||(u=a.querySelector(vl(o)),u||(e=S({src:e,async:!0},t),(t=sa.get(o))&&yc(e,t),u=a.createElement("script"),pt(u),St(u,"link",e),a.head.appendChild(u)),u={type:"script",instance:u,count:1,state:null},n.set(o,u))}}function lp(e,t){Ca.M(e,t);var a=hn;if(a&&e){var n=zs(a).hoistableScripts,o=gn(e),u=n.get(o);u||(u=a.querySelector(vl(o)),u||(e=S({src:e,async:!0,type:"module"},t),(t=sa.get(o))&&yc(e,t),u=a.createElement("script"),pt(u),St(u,"link",e),a.head.appendChild(u)),u={type:"script",instance:u,count:1,state:null},n.set(o,u))}}function Uh(e,t,a,n){var o=(o=ve.current)?$i(o):null;if(!o)throw Error(r(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(t=mn(a.href),a=zs(o).hoistableStyles,n=a.get(t),n||(n={type:"style",instance:null,count:0,state:null},a.set(t,n)),n):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=mn(a.href);var u=zs(o).hoistableStyles,m=u.get(e);if(m||(o=o.ownerDocument||o,m={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,m),(u=o.querySelector(bl(e)))&&!u._p&&(m.instance=u,m.state.loading=5),sa.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},sa.set(e,a),u||ip(o,e,a,m.state))),t&&n===null)throw Error(r(528,""));return m}if(t&&n!==null)throw Error(r(529,""));return null;case"script":return t=a.async,a=a.src,typeof a=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=gn(a),a=zs(o).hoistableScripts,n=a.get(t),n||(n={type:"script",instance:null,count:0,state:null},a.set(t,n)),n):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,e))}}function mn(e){return'href="'+Jt(e)+'"'}function bl(e){return'link[rel="stylesheet"]['+e+"]"}function zh(e){return S({},e,{"data-precedence":e.precedence,precedence:null})}function ip(e,t,a,n){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?n.loading=1:(t=e.createElement("link"),n.preload=t,t.addEventListener("load",function(){return n.loading|=1}),t.addEventListener("error",function(){return n.loading|=2}),St(t,"link",a),pt(t),e.head.appendChild(t))}function gn(e){return'[src="'+Jt(e)+'"]'}function vl(e){return"script[async]"+e}function Mh(e,t,a){if(t.count++,t.instance===null)switch(t.type){case"style":var n=e.querySelector('style[data-href~="'+Jt(a.href)+'"]');if(n)return t.instance=n,pt(n),n;var o=S({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return n=(e.ownerDocument||e).createElement("style"),pt(n),St(n,"style",o),Ii(n,a.precedence,e),t.instance=n;case"stylesheet":o=mn(a.href);var u=e.querySelector(bl(o));if(u)return t.state.loading|=4,t.instance=u,pt(u),u;n=zh(a),(o=sa.get(o))&&xc(n,o),u=(e.ownerDocument||e).createElement("link"),pt(u);var m=u;return m._p=new Promise(function(v,_){m.onload=v,m.onerror=_}),St(u,"link",n),t.state.loading|=4,Ii(u,a.precedence,e),t.instance=u;case"script":return u=gn(a.src),(o=e.querySelector(vl(u)))?(t.instance=o,pt(o),o):(n=a,(o=sa.get(u))&&(n=S({},a),yc(n,o)),e=e.ownerDocument||e,o=e.createElement("script"),pt(o),St(o,"link",n),e.head.appendChild(o),t.instance=o);case"void":return null;default:throw Error(r(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(n=t.instance,t.state.loading|=4,Ii(n,a.precedence,e));return t.instance}function Ii(e,t,a){for(var n=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),o=n.length?n[n.length-1]:null,u=o,m=0;m<n.length;m++){var v=n[m];if(v.dataset.precedence===t)u=v;else if(u!==o)break}u?u.parentNode.insertBefore(e,u.nextSibling):(t=a.nodeType===9?a.head:a,t.insertBefore(e,t.firstChild))}function xc(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function yc(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Vi=null;function Lh(e,t,a){if(Vi===null){var n=new Map,o=Vi=new Map;o.set(a,n)}else o=Vi,n=o.get(a),n||(n=new Map,o.set(a,n));if(n.has(e))return n;for(n.set(e,null),a=a.getElementsByTagName(e),o=0;o<a.length;o++){var u=a[o];if(!(u[Un]||u[xt]||e==="link"&&u.getAttribute("rel")==="stylesheet")&&u.namespaceURI!=="http://www.w3.org/2000/svg"){var m=u.getAttribute(t)||"";m=e+m;var v=n.get(m);v?v.push(u):n.set(m,[u])}}return n}function qh(e,t,a){e=e.ownerDocument||e,e.head.insertBefore(a,t==="title"?e.querySelector("head > title"):null)}function rp(e,t,a){if(a===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Bh(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function op(e,t,a,n){if(a.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var o=mn(n.href),u=t.querySelector(bl(o));if(u){t=u._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=Gi.bind(e),t.then(e,e)),a.state.loading|=4,a.instance=u,pt(u);return}u=t.ownerDocument||t,n=zh(n),(o=sa.get(o))&&xc(n,o),u=u.createElement("link"),pt(u);var m=u;m._p=new Promise(function(v,_){m.onload=v,m.onerror=_}),St(u,"link",n),a.instance=u}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(a,t),(t=a.state.preload)&&(a.state.loading&3)===0&&(e.count++,a=Gi.bind(e),t.addEventListener("load",a),t.addEventListener("error",a))}}var wc=0;function cp(e,t){return e.stylesheets&&e.count===0&&Ki(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var n=setTimeout(function(){if(e.stylesheets&&Ki(e,e.stylesheets),e.unsuspend){var u=e.unsuspend;e.unsuspend=null,u()}},6e4+t);0<e.imgBytes&&wc===0&&(wc=62500*Vg());var o=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Ki(e,e.stylesheets),e.unsuspend)){var u=e.unsuspend;e.unsuspend=null,u()}},(e.imgBytes>wc?50:800)+t);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(n),clearTimeout(o)}}:null}function Gi(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ki(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Yi=null;function Ki(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Yi=new Map,t.forEach(up,e),Yi=null,Gi.call(e))}function up(e,t){if(!(t.state.loading&4)){var a=Yi.get(e);if(a)var n=a.get(null);else{a=new Map,Yi.set(e,a);for(var o=e.querySelectorAll("link[data-precedence],style[data-precedence]"),u=0;u<o.length;u++){var m=o[u];(m.nodeName==="LINK"||m.getAttribute("media")!=="not all")&&(a.set(m.dataset.precedence,m),n=m)}n&&a.set(null,n)}o=t.instance,m=o.getAttribute("data-precedence"),u=a.get(m)||n,u===n&&a.set(null,o),a.set(m,o),this.count++,n=Gi.bind(this),o.addEventListener("load",n),o.addEventListener("error",n),u?u.parentNode.insertBefore(o,u.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(o,e.firstChild)),t.state.loading|=4}}var xl={$$typeof:k,Provider:null,Consumer:null,_currentValue:re,_currentValue2:re,_threadCount:0};function dp(e,t,a,n,o,u,m,v,_){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=gr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gr(0),this.hiddenUpdates=gr(null),this.identifierPrefix=n,this.onUncaughtError=o,this.onCaughtError=u,this.onRecoverableError=m,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=_,this.incompleteTransitions=new Map}function Hh(e,t,a,n,o,u,m,v,_,z,X,ee){return e=new dp(e,t,a,m,_,z,X,ee,v),t=1,u===!0&&(t|=24),u=Ht(3,null,null,t),e.current=u,u.stateNode=e,t=Fr(),t.refCount++,e.pooledCache=t,t.refCount++,u.memoizedState={element:n,isDehydrated:a,cache:t},so(u),e}function $h(e){return e?(e=Ys,e):Ys}function Ih(e,t,a,n,o,u){o=$h(o),n.context===null?n.context=o:n.pendingContext=o,n=Ia(t),n.payload={element:a},u=u===void 0?null:u,u!==null&&(n.callback=u),a=Va(e,n,t),a!==null&&(zt(a,e,t),Pn(a,e,t))}function Vh(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<t?a:t}}function _c(e,t){Vh(e,t),(e=e.alternate)&&Vh(e,t)}function Gh(e){if(e.tag===13||e.tag===31){var t=fs(e,67108864);t!==null&&zt(t,e,67108864),_c(e,67108864)}}function Yh(e){if(e.tag===13||e.tag===31){var t=Yt();t=pr(t);var a=fs(e,t);a!==null&&zt(a,e,t),_c(e,t)}}var Xi=!0;function fp(e,t,a,n){var o=A.T;A.T=null;var u=R.p;try{R.p=2,Sc(e,t,a,n)}finally{R.p=u,A.T=o}}function hp(e,t,a,n){var o=A.T;A.T=null;var u=R.p;try{R.p=8,Sc(e,t,a,n)}finally{R.p=u,A.T=o}}function Sc(e,t,a,n){if(Xi){var o=jc(n);if(o===null)cc(e,t,n,Qi,a),Xh(e,n);else if(gp(o,e,t,a,n))n.stopPropagation();else if(Xh(e,n),t&4&&-1<mp.indexOf(e)){for(;o!==null;){var u=Us(o);if(u!==null)switch(u.tag){case 3:if(u=u.stateNode,u.current.memoizedState.isDehydrated){var m=rs(u.pendingLanes);if(m!==0){var v=u;for(v.pendingLanes|=2,v.entangledLanes|=2;m;){var _=1<<31-qt(m);v.entanglements[1]|=_,m&=~_}ha(u),(Ke&6)===0&&(ki=Ye()+500,hl(0))}}break;case 31:case 13:v=fs(u,2),v!==null&&zt(v,u,2),Ri(),_c(u,2)}if(u=jc(n),u===null&&cc(e,t,n,Qi,a),u===o)break;o=u}o!==null&&n.stopPropagation()}else cc(e,t,n,null,a)}}function jc(e){return e=Nr(e),Nc(e)}var Qi=null;function Nc(e){if(Qi=null,e=Ds(e),e!==null){var t=f(e);if(t===null)e=null;else{var a=t.tag;if(a===13){if(e=h(t),e!==null)return e;e=null}else if(a===31){if(e=g(t),e!==null)return e;e=null}else if(a===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Qi=e,null}function Kh(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Xe()){case Ie:return 2;case vt:return 8;case Mt:case Cs:return 32;case kn:return 268435456;default:return 32}default:return 32}}var Ec=!1,es=null,ts=null,as=null,yl=new Map,wl=new Map,ss=[],mp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Xh(e,t){switch(e){case"focusin":case"focusout":es=null;break;case"dragenter":case"dragleave":ts=null;break;case"mouseover":case"mouseout":as=null;break;case"pointerover":case"pointerout":yl.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":wl.delete(t.pointerId)}}function _l(e,t,a,n,o,u){return e===null||e.nativeEvent!==u?(e={blockedOn:t,domEventName:a,eventSystemFlags:n,nativeEvent:u,targetContainers:[o]},t!==null&&(t=Us(t),t!==null&&Gh(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function gp(e,t,a,n,o){switch(t){case"focusin":return es=_l(es,e,t,a,n,o),!0;case"dragenter":return ts=_l(ts,e,t,a,n,o),!0;case"mouseover":return as=_l(as,e,t,a,n,o),!0;case"pointerover":var u=o.pointerId;return yl.set(u,_l(yl.get(u)||null,e,t,a,n,o)),!0;case"gotpointercapture":return u=o.pointerId,wl.set(u,_l(wl.get(u)||null,e,t,a,n,o)),!0}return!1}function Qh(e){var t=Ds(e.target);if(t!==null){var a=f(t);if(a!==null){if(t=a.tag,t===13){if(t=h(a),t!==null){e.blockedOn=t,ru(e.priority,function(){Yh(a)});return}}else if(t===31){if(t=g(a),t!==null){e.blockedOn=t,ru(e.priority,function(){Yh(a)});return}}else if(t===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ji(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var a=jc(e.nativeEvent);if(a===null){a=e.nativeEvent;var n=new a.constructor(a.type,a);jr=n,a.target.dispatchEvent(n),jr=null}else return t=Us(a),t!==null&&Gh(t),e.blockedOn=a,!1;t.shift()}return!0}function Jh(e,t,a){Ji(e)&&a.delete(t)}function pp(){Ec=!1,es!==null&&Ji(es)&&(es=null),ts!==null&&Ji(ts)&&(ts=null),as!==null&&Ji(as)&&(as=null),yl.forEach(Jh),wl.forEach(Jh)}function Zi(e,t){e.blockedOn===t&&(e.blockedOn=null,Ec||(Ec=!0,l.unstable_scheduleCallback(l.unstable_NormalPriority,pp)))}var Pi=null;function Zh(e){Pi!==e&&(Pi=e,l.unstable_scheduleCallback(l.unstable_NormalPriority,function(){Pi===e&&(Pi=null);for(var t=0;t<e.length;t+=3){var a=e[t],n=e[t+1],o=e[t+2];if(typeof n!="function"){if(Nc(n||a)===null)continue;break}var u=Us(a);u!==null&&(e.splice(t,3),t-=3,jo(u,{pending:!0,data:o,method:a.method,action:n},n,o))}}))}function pn(e){function t(_){return Zi(_,e)}es!==null&&Zi(es,e),ts!==null&&Zi(ts,e),as!==null&&Zi(as,e),yl.forEach(t),wl.forEach(t);for(var a=0;a<ss.length;a++){var n=ss[a];n.blockedOn===e&&(n.blockedOn=null)}for(;0<ss.length&&(a=ss[0],a.blockedOn===null);)Qh(a),a.blockedOn===null&&ss.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(n=0;n<a.length;n+=3){var o=a[n],u=a[n+1],m=o[Ot]||null;if(typeof u=="function")m||Zh(a);else if(m){var v=null;if(u&&u.hasAttribute("formAction")){if(o=u,m=u[Ot]||null)v=m.formAction;else if(Nc(o)!==null)continue}else v=m.action;typeof v=="function"?a[n+1]=v:(a.splice(n,3),n-=3),Zh(a)}}}function Ph(){function e(u){u.canIntercept&&u.info==="react-transition"&&u.intercept({handler:function(){return new Promise(function(m){return o=m})},focusReset:"manual",scroll:"manual"})}function t(){o!==null&&(o(),o=null),n||setTimeout(a,20)}function a(){if(!n&&!navigation.transition){var u=navigation.currentEntry;u&&u.url!=null&&navigation.navigate(u.url,{state:u.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var n=!1,o=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(a,100),function(){n=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),o!==null&&(o(),o=null)}}}function Tc(e){this._internalRoot=e}Wi.prototype.render=Tc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(r(409));var a=t.current,n=Yt();Ih(a,n,e,t,null,null)},Wi.prototype.unmount=Tc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ih(e.current,2,null,e,null,null),Ri(),t[Rs]=null}};function Wi(e){this._internalRoot=e}Wi.prototype.unstable_scheduleHydration=function(e){if(e){var t=iu();e={blockedOn:null,target:e,priority:t};for(var a=0;a<ss.length&&t!==0&&t<ss[a].priority;a++);ss.splice(a,0,e),a===0&&Qh(e)}};var Wh=s.version;if(Wh!=="19.2.4")throw Error(r(527,Wh,"19.2.4"));R.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(r(188)):(e=Object.keys(e).join(","),Error(r(268,e)));return e=p(t),e=e!==null?y(e):null,e=e===null?null:e.stateNode,e};var bp={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:A,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fi.isDisabled&&Fi.supportsFiber)try{Cn=Fi.inject(bp),Lt=Fi}catch{}}return jl.createRoot=function(e,t){if(!d(e))throw Error(r(299));var a=!1,n="",o=nf,u=lf,m=rf;return t!=null&&(t.unstable_strictMode===!0&&(a=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onUncaughtError!==void 0&&(o=t.onUncaughtError),t.onCaughtError!==void 0&&(u=t.onCaughtError),t.onRecoverableError!==void 0&&(m=t.onRecoverableError)),t=Hh(e,1,!1,null,null,a,n,null,o,u,m,Ph),e[Rs]=t.current,oc(e),new Tc(t)},jl.hydrateRoot=function(e,t,a){if(!d(e))throw Error(r(299));var n=!1,o="",u=nf,m=lf,v=rf,_=null;return a!=null&&(a.unstable_strictMode===!0&&(n=!0),a.identifierPrefix!==void 0&&(o=a.identifierPrefix),a.onUncaughtError!==void 0&&(u=a.onUncaughtError),a.onCaughtError!==void 0&&(m=a.onCaughtError),a.onRecoverableError!==void 0&&(v=a.onRecoverableError),a.formState!==void 0&&(_=a.formState)),t=Hh(e,1,!0,t,a??null,n,o,_,u,m,v,Ph),t.context=$h(null),a=t.current,n=Yt(),n=pr(n),o=Ia(n),o.callback=null,Va(a,o,n),a=n,t.current.lanes=a,Dn(t,a),ha(t),e[Rs]=t.current,oc(e),new Wi(t)},jl.version="19.2.4",jl}var om;function Ap(){if(om)return kc.exports;om=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(s){console.error(s)}}return l(),kc.exports=Tp(),kc.exports}var Op=Ap();const kp=zm(Op);var At=(l=>(l.DOG="Dog",l.CAT="Cat",l.RABBIT="Rabbit",l.BIRD="Bird",l.OTHER="Other",l))(At||{});const Mm=({src:l,onClose:s})=>(N.useEffect(()=>{const i=r=>{r.key==="Escape"&&s()};return window.addEventListener("keydown",i),()=>window.removeEventListener("keydown",i)},[s]),c.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-slate-900/90 backdrop-blur-sm animate-in fade-in duration-300 p-4 md:p-10",onClick:s,children:[c.jsx("button",{onClick:s,className:"absolute top-6 right-6 w-12 h-12 bg-white/10 hover:bg-white/20 text-white rounded-full flex items-center justify-center transition-all z-[110]",children:c.jsx("i",{className:"fas fa-times text-xl"})}),c.jsxs("div",{className:"relative max-w-full max-h-full flex items-center justify-center animate-in zoom-in-95 duration-300",onClick:i=>i.stopPropagation(),children:[c.jsx("img",{src:l,alt:"Enlarged clinical view",className:"max-w-full max-h-[90vh] object-contain rounded-xl shadow-2xl border-4 border-white/10"}),c.jsx("div",{className:"absolute -bottom-10 left-1/2 -translate-x-1/2 text-white/50 text-[10px] font-bold uppercase tracking-widest whitespace-nowrap",children:"Double click image to close or press ESC"})]})]})),Cp=({activeView:l,onViewChange:s,onLogout:i,onOpenSettings:r,userName:d,isAdmin:f,activePatient:h,onClearPatient:g})=>{const b=["Reception","Consultation","Examination","Appointment","Billing"];return c.jsxs("nav",{className:"flex flex-col w-full flex-shrink-0 z-50 select-none border-b border-slate-300 shadow-sm",children:[c.jsxs("div",{className:"bg-slate-800 h-9 px-4 flex items-center justify-between border-b border-slate-700",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsxs("div",{className:"flex items-center gap-1.5",children:[c.jsx("div",{className:"w-5 h-5 bg-blue-600 rounded flex items-center justify-center",children:c.jsx("i",{className:"fas fa-plus text-white text-[9px]"})}),c.jsx("span",{className:"text-white font-bold tracking-tight text-base uppercase",children:"IKAVA"})]}),c.jsx("div",{className:"h-3 w-px bg-slate-600 mx-1"}),c.jsx("span",{className:"text-slate-400 text-[9px] font-bold uppercase tracking-wider",children:"Veterinary Medical Center"})]}),c.jsxs("div",{className:"flex items-center gap-4 text-slate-300 text-[10px] font-bold",children:[f&&c.jsxs("button",{onClick:r,className:"hover:text-white transition-colors flex items-center gap-1.5 px-2 py-1 rounded hover:bg-slate-700",children:[c.jsx("i",{className:"fas fa-cog text-[11px]"}),"Settings"]}),c.jsxs("div",{className:"flex items-center gap-3 ml-1 pl-4 border-l border-slate-700",children:[c.jsxs("span",{className:"text-slate-300",children:[d||"Dr. Guest",f&&c.jsx("span",{className:"ml-1.5 text-[7px] bg-blue-600 text-white px-1 py-0.5 rounded leading-none",children:"ADMIN"})]}),c.jsx("button",{onClick:i,className:"text-slate-400 hover:text-rose-400 transition-colors text-[9px] font-bold uppercase",children:"Log Out"})]})]})]}),c.jsxs("div",{className:"bg-slate-100 h-10 px-2 flex items-center gap-2",children:[c.jsx("div",{className:"flex h-full",children:b.map(p=>{const y=l===p;return c.jsx("button",{onClick:()=>s(p),className:`relative h-full px-5 flex items-center justify-center transition-colors border-r border-slate-200 ${y?"bg-white text-blue-600 font-bold border-b-2 border-b-blue-600":"text-slate-600 hover:bg-slate-200 font-medium"}`,children:p==="Examination"?c.jsxs("div",{className:"flex flex-col items-center justify-center leading-none",children:[c.jsx("span",{className:"text-[10px] uppercase tracking-tighter",children:"Examination"}),c.jsx("span",{className:"text-[8px] uppercase tracking-widest opacity-80 mt-0.5",children:"& Order"})]}):c.jsx("span",{className:"text-xs uppercase tracking-tight",children:p})},p)})}),h&&c.jsx("div",{className:"flex-1 flex items-center px-4",children:c.jsxs("div",{className:"bg-white border border-slate-300 rounded px-3 h-7 flex items-center gap-4 shadow-sm text-[11px]",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"font-bold text-slate-900",children:h.name}),c.jsxs("span",{className:"text-slate-500",children:["(",h.breed,")"]})]}),c.jsx("div",{className:"h-3 w-px bg-slate-200"}),c.jsxs("div",{className:"flex gap-3 text-slate-600 items-center",children:[c.jsxs("span",{children:["Guardian: ",c.jsx("b",{className:"text-slate-900",children:h.owner})]}),c.jsx("div",{className:"h-2 w-px bg-slate-200"}),c.jsxs("span",{children:["Gender: ",c.jsx("b",{className:"text-slate-900",children:h.gender})]}),c.jsx("div",{className:"h-2 w-px bg-slate-200"}),c.jsxs("span",{children:["Age: ",c.jsx("b",{className:"text-slate-900",children:h.age})]}),c.jsx("div",{className:"h-2 w-px bg-slate-200"}),c.jsxs("span",{children:["Weight: ",c.jsxs("b",{className:"text-blue-600",children:[h.weight,"kg"]})]})]}),c.jsx("button",{onClick:g,className:"ml-1 text-slate-400 hover:text-rose-500",children:c.jsx("i",{className:"fas fa-times text-[10px]"})})]})}),c.jsx("div",{className:"ml-auto flex items-center gap-3",children:c.jsxs("div",{className:"flex items-center bg-white border border-slate-300 rounded px-2 h-7",children:[c.jsx("div",{className:"w-1.5 h-1.5 bg-emerald-500 rounded-full mr-2"}),c.jsx("span",{className:"text-slate-600 text-[9px] font-bold uppercase",children:"Online"})]})})]})]})},Rp=({onLogin:l})=>{const[s,i]=N.useState(!1),[r,d]=N.useState(null),[f,h]=N.useState(!1),g=N.useRef(null),b="982231520614-glj0ark21p9lgs5h1o579ahb7i2bc8j9.apps.googleusercontent.com",p=window.location.origin;N.useEffect(()=>{const C=()=>{if(window.google&&window.google.accounts)try{window.google.accounts.id.initialize({client_id:b,callback:y,auto_select:!1,use_fedcm_for_prompt:!1}),g.current&&window.google.accounts.id.renderButton(g.current,{theme:"filled_blue",size:"large",width:g.current.offsetWidth,shape:"pill"})}catch(L){console.error("Google Init Error:",L)}},q=setInterval(()=>{window.google&&window.google.accounts&&(C(),clearInterval(q))},200);return()=>clearInterval(q)},[]);const y=C=>{i(!0);try{const q=S(C.credential);l({name:q.name||q.given_name||"Medical Staff",email:q.email})}catch{d("   "),i(!1)}},S=C=>{const L=C.split(".")[1].replace(/-/g,"+").replace(/_/g,"/");return JSON.parse(window.atob(L))},j=()=>{i(!0),setTimeout(()=>{l({name:"Developer (Master)",email:"mindonesia0000@gmail.com"})},500)},T=()=>{navigator.clipboard.writeText(p),h(!0),setTimeout(()=>h(!1),2e3)};return c.jsxs("div",{className:"min-h-screen bg-slate-950 flex items-center justify-center p-6 relative overflow-hidden font-['Inter']",children:[c.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[600px] h-[600px] bg-blue-600/10 rounded-full blur-[120px] pointer-events-none"}),c.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[400px] h-[400px] bg-emerald-600/5 rounded-full blur-[100px] pointer-events-none"}),c.jsx("div",{className:"w-full max-w-md relative z-10 animate-in fade-in zoom-in-95 duration-500",children:c.jsxs("div",{className:"bg-slate-900 border border-white/5 rounded-[48px] p-12 shadow-[0_32px_64px_-12px_rgba(0,0,0,0.8)] backdrop-blur-xl",children:[c.jsxs("div",{className:"flex flex-col items-center mb-10",children:[c.jsxs("div",{className:"w-20 h-20 bg-blue-600 rounded-3xl flex items-center justify-center shadow-2xl mb-8 group overflow-hidden relative",children:[c.jsx("i",{className:"fas fa-plus text-white text-3xl z-10"}),c.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-white/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"})]}),c.jsx("h1",{className:"text-4xl font-black text-white tracking-tighter uppercase italic text-center mb-2",children:"IKAVA"}),c.jsx("p",{className:"text-[10px] font-black text-slate-500 uppercase tracking-[0.4em]",children:"Clinical Dashboard"})]}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex flex-col gap-4",children:[c.jsx("div",{ref:g,className:"w-full min-h-[44px] flex justify-center"}),c.jsxs("div",{className:"flex items-center gap-4 opacity-20",children:[c.jsx("div",{className:"flex-1 h-px bg-white"}),c.jsx("span",{className:"text-[10px] text-white font-black uppercase",children:"Or"}),c.jsx("div",{className:"flex-1 h-px bg-white"})]}),c.jsxs("button",{onClick:j,className:"w-full py-4 bg-blue-600/10 hover:bg-blue-600/20 border border-blue-500/30 rounded-2xl text-[11px] font-black text-blue-400 uppercase tracking-widest transition-all active:scale-95 shadow-lg flex items-center justify-center gap-3 group",children:[c.jsx("i",{className:"fas fa-terminal text-blue-500 group-hover:text-blue-300"}),"    (Bypass)"]})]}),c.jsxs("div",{className:"bg-black/40 rounded-3xl p-6 border border-white/5",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[c.jsx("i",{className:"fas fa-bug text-slate-600 text-[10px]"}),c.jsx("h3",{className:"text-[9px] font-black text-slate-500 uppercase tracking-widest",children:"Environment Info"})]}),c.jsx("code",{className:"block text-[10px] text-slate-600 font-mono truncate mb-3",children:p}),c.jsx("button",{onClick:T,className:"text-[9px] font-black text-blue-500/60 uppercase tracking-widest hover:text-blue-400 transition-colors",children:f?"Origin Copied!":"Copy Origin for Google Console"})]})]}),c.jsx("div",{className:"mt-10 pt-8 border-t border-white/5 flex flex-col items-center gap-2",children:s?c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-1 h-1 bg-blue-500 rounded-full animate-ping"}),c.jsx("p",{className:"text-[10px] font-black text-blue-500 uppercase tracking-widest",children:"Initialising Session..."})]}):c.jsx("p",{className:"text-[8px] font-black text-slate-700 uppercase tracking-widest italic",children:"Secure Clinical Gateway v2.5"})})]})})]})};function dr(l,s){var i={};for(var r in l)Object.prototype.hasOwnProperty.call(l,r)&&s.indexOf(r)<0&&(i[r]=l[r]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,r=Object.getOwnPropertySymbols(l);d<r.length;d++)s.indexOf(r[d])<0&&Object.prototype.propertyIsEnumerable.call(l,r[d])&&(i[r[d]]=l[r[d]]);return i}function Dp(l,s,i,r){function d(f){return f instanceof i?f:new i(function(h){h(f)})}return new(i||(i=Promise))(function(f,h){function g(y){try{p(r.next(y))}catch(S){h(S)}}function b(y){try{p(r.throw(y))}catch(S){h(S)}}function p(y){y.done?f(y.value):d(y.value).then(g,b)}p((r=r.apply(l,s||[])).next())})}const Up=l=>l?(...s)=>l(...s):(...s)=>fetch(...s);class eu extends Error{constructor(s,i="FunctionsError",r){super(s),this.name=i,this.context=r}}class zp extends eu{constructor(s){super("Failed to send a request to the Edge Function","FunctionsFetchError",s)}}class cm extends eu{constructor(s){super("Relay Error invoking the Edge Function","FunctionsRelayError",s)}}class um extends eu{constructor(s){super("Edge Function returned a non-2xx status code","FunctionsHttpError",s)}}var Vc;(function(l){l.Any="any",l.ApNortheast1="ap-northeast-1",l.ApNortheast2="ap-northeast-2",l.ApSouth1="ap-south-1",l.ApSoutheast1="ap-southeast-1",l.ApSoutheast2="ap-southeast-2",l.CaCentral1="ca-central-1",l.EuCentral1="eu-central-1",l.EuWest1="eu-west-1",l.EuWest2="eu-west-2",l.EuWest3="eu-west-3",l.SaEast1="sa-east-1",l.UsEast1="us-east-1",l.UsWest1="us-west-1",l.UsWest2="us-west-2"})(Vc||(Vc={}));class Mp{constructor(s,{headers:i={},customFetch:r,region:d=Vc.Any}={}){this.url=s,this.headers=i,this.region=d,this.fetch=Up(r)}setAuth(s){this.headers.Authorization=`Bearer ${s}`}invoke(s){return Dp(this,arguments,void 0,function*(i,r={}){var d;let f,h;try{const{headers:g,method:b,body:p,signal:y,timeout:S}=r;let j={},{region:T}=r;T||(T=this.region);const C=new URL(`${this.url}/${i}`);T&&T!=="any"&&(j["x-region"]=T,C.searchParams.set("forceFunctionRegion",T));let q;p&&(g&&!Object.prototype.hasOwnProperty.call(g,"Content-Type")||!g)?typeof Blob<"u"&&p instanceof Blob||p instanceof ArrayBuffer?(j["Content-Type"]="application/octet-stream",q=p):typeof p=="string"?(j["Content-Type"]="text/plain",q=p):typeof FormData<"u"&&p instanceof FormData?q=p:(j["Content-Type"]="application/json",q=JSON.stringify(p)):p&&typeof p!="string"&&!(typeof Blob<"u"&&p instanceof Blob)&&!(p instanceof ArrayBuffer)&&!(typeof FormData<"u"&&p instanceof FormData)?q=JSON.stringify(p):q=p;let L=y;S&&(h=new AbortController,f=setTimeout(()=>h.abort(),S),y?(L=h.signal,y.addEventListener("abort",()=>h.abort())):L=h.signal);const W=yield this.fetch(C.toString(),{method:b||"POST",headers:Object.assign(Object.assign(Object.assign({},j),this.headers),g),body:q,signal:L}).catch(he=>{throw new zp(he)}),Z=W.headers.get("x-relay-error");if(Z&&Z==="true")throw new cm(W);if(!W.ok)throw new um(W);let k=((d=W.headers.get("Content-Type"))!==null&&d!==void 0?d:"text/plain").split(";")[0].trim(),te;return k==="application/json"?te=yield W.json():k==="application/octet-stream"||k==="application/pdf"?te=yield W.blob():k==="text/event-stream"?te=W:k==="multipart/form-data"?te=yield W.formData():te=yield W.text(),{data:te,error:null,response:W}}catch(g){return{data:null,error:g,response:g instanceof um||g instanceof cm?g.context:void 0}}finally{f&&clearTimeout(f)}})}}var Lp=class extends Error{constructor(l){super(l.message),this.name="PostgrestError",this.details=l.details,this.hint=l.hint,this.code=l.code}},qp=class{constructor(l){var s,i,r;this.shouldThrowOnError=!1,this.method=l.method,this.url=l.url,this.headers=new Headers(l.headers),this.schema=l.schema,this.body=l.body,this.shouldThrowOnError=(s=l.shouldThrowOnError)!==null&&s!==void 0?s:!1,this.signal=l.signal,this.isMaybeSingle=(i=l.isMaybeSingle)!==null&&i!==void 0?i:!1,this.urlLengthLimit=(r=l.urlLengthLimit)!==null&&r!==void 0?r:8e3,l.fetch?this.fetch=l.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(l,s){return this.headers=new Headers(this.headers),this.headers.set(l,s),this}then(l,s){var i=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let d=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async f=>{let h=null,g=null,b=null,p=f.status,y=f.statusText;if(f.ok){var S,j;if(i.method!=="HEAD"){var T;const W=await f.text();W===""||(i.headers.get("Accept")==="text/csv"||i.headers.get("Accept")&&(!((T=i.headers.get("Accept"))===null||T===void 0)&&T.includes("application/vnd.pgrst.plan+text"))?g=W:g=JSON.parse(W))}const q=(S=i.headers.get("Prefer"))===null||S===void 0?void 0:S.match(/count=(exact|planned|estimated)/),L=(j=f.headers.get("content-range"))===null||j===void 0?void 0:j.split("/");q&&L&&L.length>1&&(b=parseInt(L[1])),i.isMaybeSingle&&i.method==="GET"&&Array.isArray(g)&&(g.length>1?(h={code:"PGRST116",details:`Results contain ${g.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},g=null,b=null,p=406,y="Not Acceptable"):g.length===1?g=g[0]:g=null)}else{var C;const q=await f.text();try{h=JSON.parse(q),Array.isArray(h)&&f.status===404&&(g=[],h=null,p=200,y="OK")}catch{f.status===404&&q===""?(p=204,y="No Content"):h={message:q}}if(h&&i.isMaybeSingle&&(!(h==null||(C=h.details)===null||C===void 0)&&C.includes("0 rows"))&&(h=null,p=200,y="OK"),h&&i.shouldThrowOnError)throw new Lp(h)}return{error:h,data:g,count:b,status:p,statusText:y}});return this.shouldThrowOnError||(d=d.catch(f=>{var h;let g="",b="",p="";const y=f==null?void 0:f.cause;if(y){var S,j,T,C;const W=(S=y==null?void 0:y.message)!==null&&S!==void 0?S:"",Z=(j=y==null?void 0:y.code)!==null&&j!==void 0?j:"";g=`${(T=f==null?void 0:f.name)!==null&&T!==void 0?T:"FetchError"}: ${f==null?void 0:f.message}`,g+=`

Caused by: ${(C=y==null?void 0:y.name)!==null&&C!==void 0?C:"Error"}: ${W}`,Z&&(g+=` (${Z})`),y!=null&&y.stack&&(g+=`
${y.stack}`)}else{var q;g=(q=f==null?void 0:f.stack)!==null&&q!==void 0?q:""}const L=this.url.toString().length;return(f==null?void 0:f.name)==="AbortError"||(f==null?void 0:f.code)==="ABORT_ERR"?(p="",b="Request was aborted (timeout or manual cancellation)",L>this.urlLengthLimit&&(b+=`. Note: Your request URL is ${L} characters, which may exceed server limits. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [many IDs])), consider using an RPC function to pass values server-side.`)):((y==null?void 0:y.name)==="HeadersOverflowError"||(y==null?void 0:y.code)==="UND_ERR_HEADERS_OVERFLOW")&&(p="",b="HTTP headers exceeded server limits (typically 16KB)",L>this.urlLengthLimit&&(b+=`. Your request URL is ${L} characters. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [200+ IDs])), consider using an RPC function instead.`)),{error:{message:`${(h=f==null?void 0:f.name)!==null&&h!==void 0?h:"FetchError"}: ${f==null?void 0:f.message}`,details:g,hint:b,code:p},data:null,count:null,status:0,statusText:""}})),d.then(l,s)}returns(){return this}overrideTypes(){return this}},Bp=class extends qp{select(l){let s=!1;const i=(l??"*").split("").map(r=>/\s/.test(r)&&!s?"":(r==='"'&&(s=!s),r)).join("");return this.url.searchParams.set("select",i),this.headers.append("Prefer","return=representation"),this}order(l,{ascending:s=!0,nullsFirst:i,foreignTable:r,referencedTable:d=r}={}){const f=d?`${d}.order`:"order",h=this.url.searchParams.get(f);return this.url.searchParams.set(f,`${h?`${h},`:""}${l}.${s?"asc":"desc"}${i===void 0?"":i?".nullsfirst":".nullslast"}`),this}limit(l,{foreignTable:s,referencedTable:i=s}={}){const r=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(r,`${l}`),this}range(l,s,{foreignTable:i,referencedTable:r=i}={}){const d=typeof r>"u"?"offset":`${r}.offset`,f=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(d,`${l}`),this.url.searchParams.set(f,`${s-l+1}`),this}abortSignal(l){return this.signal=l,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:l=!1,verbose:s=!1,settings:i=!1,buffers:r=!1,wal:d=!1,format:f="text"}={}){var h;const g=[l?"analyze":null,s?"verbose":null,i?"settings":null,r?"buffers":null,d?"wal":null].filter(Boolean).join("|"),b=(h=this.headers.get("Accept"))!==null&&h!==void 0?h:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${f}; for="${b}"; options=${g};`),f==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(l){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${l}`),this}};const dm=new RegExp("[,()]");var jn=class extends Bp{eq(l,s){return this.url.searchParams.append(l,`eq.${s}`),this}neq(l,s){return this.url.searchParams.append(l,`neq.${s}`),this}gt(l,s){return this.url.searchParams.append(l,`gt.${s}`),this}gte(l,s){return this.url.searchParams.append(l,`gte.${s}`),this}lt(l,s){return this.url.searchParams.append(l,`lt.${s}`),this}lte(l,s){return this.url.searchParams.append(l,`lte.${s}`),this}like(l,s){return this.url.searchParams.append(l,`like.${s}`),this}likeAllOf(l,s){return this.url.searchParams.append(l,`like(all).{${s.join(",")}}`),this}likeAnyOf(l,s){return this.url.searchParams.append(l,`like(any).{${s.join(",")}}`),this}ilike(l,s){return this.url.searchParams.append(l,`ilike.${s}`),this}ilikeAllOf(l,s){return this.url.searchParams.append(l,`ilike(all).{${s.join(",")}}`),this}ilikeAnyOf(l,s){return this.url.searchParams.append(l,`ilike(any).{${s.join(",")}}`),this}regexMatch(l,s){return this.url.searchParams.append(l,`match.${s}`),this}regexIMatch(l,s){return this.url.searchParams.append(l,`imatch.${s}`),this}is(l,s){return this.url.searchParams.append(l,`is.${s}`),this}isDistinct(l,s){return this.url.searchParams.append(l,`isdistinct.${s}`),this}in(l,s){const i=Array.from(new Set(s)).map(r=>typeof r=="string"&&dm.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(l,`in.(${i})`),this}notIn(l,s){const i=Array.from(new Set(s)).map(r=>typeof r=="string"&&dm.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(l,`not.in.(${i})`),this}contains(l,s){return typeof s=="string"?this.url.searchParams.append(l,`cs.${s}`):Array.isArray(s)?this.url.searchParams.append(l,`cs.{${s.join(",")}}`):this.url.searchParams.append(l,`cs.${JSON.stringify(s)}`),this}containedBy(l,s){return typeof s=="string"?this.url.searchParams.append(l,`cd.${s}`):Array.isArray(s)?this.url.searchParams.append(l,`cd.{${s.join(",")}}`):this.url.searchParams.append(l,`cd.${JSON.stringify(s)}`),this}rangeGt(l,s){return this.url.searchParams.append(l,`sr.${s}`),this}rangeGte(l,s){return this.url.searchParams.append(l,`nxl.${s}`),this}rangeLt(l,s){return this.url.searchParams.append(l,`sl.${s}`),this}rangeLte(l,s){return this.url.searchParams.append(l,`nxr.${s}`),this}rangeAdjacent(l,s){return this.url.searchParams.append(l,`adj.${s}`),this}overlaps(l,s){return typeof s=="string"?this.url.searchParams.append(l,`ov.${s}`):this.url.searchParams.append(l,`ov.{${s.join(",")}}`),this}textSearch(l,s,{config:i,type:r}={}){let d="";r==="plain"?d="pl":r==="phrase"?d="ph":r==="websearch"&&(d="w");const f=i===void 0?"":`(${i})`;return this.url.searchParams.append(l,`${d}fts${f}.${s}`),this}match(l){return Object.entries(l).forEach(([s,i])=>{this.url.searchParams.append(s,`eq.${i}`)}),this}not(l,s,i){return this.url.searchParams.append(l,`not.${s}.${i}`),this}or(l,{foreignTable:s,referencedTable:i=s}={}){const r=i?`${i}.or`:"or";return this.url.searchParams.append(r,`(${l})`),this}filter(l,s,i){return this.url.searchParams.append(l,`${s}.${i}`),this}},Hp=class{constructor(l,{headers:s={},schema:i,fetch:r,urlLengthLimit:d=8e3}){this.url=l,this.headers=new Headers(s),this.schema=i,this.fetch=r,this.urlLengthLimit=d}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(l,s){const{head:i=!1,count:r}=s??{},d=i?"HEAD":"GET";let f=!1;const h=(l??"*").split("").map(p=>/\s/.test(p)&&!f?"":(p==='"'&&(f=!f),p)).join(""),{url:g,headers:b}=this.cloneRequestState();return g.searchParams.set("select",h),r&&b.append("Prefer",`count=${r}`),new jn({method:d,url:g,headers:b,schema:this.schema,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}insert(l,{count:s,defaultToNull:i=!0}={}){var r;const d="POST",{url:f,headers:h}=this.cloneRequestState();if(s&&h.append("Prefer",`count=${s}`),i||h.append("Prefer","missing=default"),Array.isArray(l)){const g=l.reduce((b,p)=>b.concat(Object.keys(p)),[]);if(g.length>0){const b=[...new Set(g)].map(p=>`"${p}"`);f.searchParams.set("columns",b.join(","))}}return new jn({method:d,url:f,headers:h,schema:this.schema,body:l,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch,urlLengthLimit:this.urlLengthLimit})}upsert(l,{onConflict:s,ignoreDuplicates:i=!1,count:r,defaultToNull:d=!0}={}){var f;const h="POST",{url:g,headers:b}=this.cloneRequestState();if(b.append("Prefer",`resolution=${i?"ignore":"merge"}-duplicates`),s!==void 0&&g.searchParams.set("on_conflict",s),r&&b.append("Prefer",`count=${r}`),d||b.append("Prefer","missing=default"),Array.isArray(l)){const p=l.reduce((y,S)=>y.concat(Object.keys(S)),[]);if(p.length>0){const y=[...new Set(p)].map(S=>`"${S}"`);g.searchParams.set("columns",y.join(","))}}return new jn({method:h,url:g,headers:b,schema:this.schema,body:l,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch,urlLengthLimit:this.urlLengthLimit})}update(l,{count:s}={}){var i;const r="PATCH",{url:d,headers:f}=this.cloneRequestState();return s&&f.append("Prefer",`count=${s}`),new jn({method:r,url:d,headers:f,schema:this.schema,body:l,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch,urlLengthLimit:this.urlLengthLimit})}delete({count:l}={}){var s;const i="DELETE",{url:r,headers:d}=this.cloneRequestState();return l&&d.append("Prefer",`count=${l}`),new jn({method:i,url:r,headers:d,schema:this.schema,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch,urlLengthLimit:this.urlLengthLimit})}};function kl(l){"@babel/helpers - typeof";return kl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},kl(l)}function $p(l,s){if(kl(l)!="object"||!l)return l;var i=l[Symbol.toPrimitive];if(i!==void 0){var r=i.call(l,s);if(kl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(l)}function Ip(l){var s=$p(l,"string");return kl(s)=="symbol"?s:s+""}function Vp(l,s,i){return(s=Ip(s))in l?Object.defineProperty(l,s,{value:i,enumerable:!0,configurable:!0,writable:!0}):l[s]=i,l}function fm(l,s){var i=Object.keys(l);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(l);s&&(r=r.filter(function(d){return Object.getOwnPropertyDescriptor(l,d).enumerable})),i.push.apply(i,r)}return i}function er(l){for(var s=1;s<arguments.length;s++){var i=arguments[s]!=null?arguments[s]:{};s%2?fm(Object(i),!0).forEach(function(r){Vp(l,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(i)):fm(Object(i)).forEach(function(r){Object.defineProperty(l,r,Object.getOwnPropertyDescriptor(i,r))})}return l}var Gp=class Lm{constructor(s,{headers:i={},schema:r,fetch:d,timeout:f,urlLengthLimit:h=8e3}={}){this.url=s,this.headers=new Headers(i),this.schemaName=r,this.urlLengthLimit=h;const g=d??globalThis.fetch;f!==void 0&&f>0?this.fetch=(b,p)=>{const y=new AbortController,S=setTimeout(()=>y.abort(),f),j=p==null?void 0:p.signal;if(j){if(j.aborted)return clearTimeout(S),g(b,p);const T=()=>{clearTimeout(S),y.abort()};return j.addEventListener("abort",T,{once:!0}),g(b,er(er({},p),{},{signal:y.signal})).finally(()=>{clearTimeout(S),j.removeEventListener("abort",T)})}return g(b,er(er({},p),{},{signal:y.signal})).finally(()=>clearTimeout(S))}:this.fetch=g}from(s){if(!s||typeof s!="string"||s.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new Hp(new URL(`${this.url}/${s}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}schema(s){return new Lm(this.url,{headers:this.headers,schema:s,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}rpc(s,i={},{head:r=!1,get:d=!1,count:f}={}){var h;let g;const b=new URL(`${this.url}/rpc/${s}`);let p;const y=T=>T!==null&&typeof T=="object"&&(!Array.isArray(T)||T.some(y)),S=r&&Object.values(i).some(y);S?(g="POST",p=i):r||d?(g=r?"HEAD":"GET",Object.entries(i).filter(([T,C])=>C!==void 0).map(([T,C])=>[T,Array.isArray(C)?`{${C.join(",")}}`:`${C}`]).forEach(([T,C])=>{b.searchParams.append(T,C)})):(g="POST",p=i);const j=new Headers(this.headers);return S?j.set("Prefer",f?`count=${f},return=minimal`:"return=minimal"):f&&j.set("Prefer",`count=${f}`),new jn({method:g,url:b,headers:j,schema:this.schemaName,body:p,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch,urlLengthLimit:this.urlLengthLimit})}};class Yp{constructor(){}static detectEnvironment(){var s;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((s=navigator.userAgent)===null||s===void 0)&&s.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const i=globalThis.process;if(i){const r=i.versions;if(r&&r.node){const d=r.node,f=parseInt(d.replace(/^v/,"").split(".")[0]);return f>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${f} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${f} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const s=this.detectEnvironment();if(s.constructor)return s.constructor;let i=s.error||"WebSocket not supported in this environment.";throw s.workaround&&(i+=`

Suggested solution: ${s.workaround}`),new Error(i)}static createWebSocket(s,i){const r=this.getWebSocketConstructor();return new r(s,i)}static isWebSocketSupported(){try{const s=this.detectEnvironment();return s.type==="native"||s.type==="ws"}catch{return!1}}}const Kp="2.94.0",Xp=`realtime-js/${Kp}`,Qp="1.0.0",qm="2.0.0",hm=qm,Gc=1e4,Jp=1e3,Zp=100;var ls;(function(l){l[l.connecting=0]="connecting",l[l.open=1]="open",l[l.closing=2]="closing",l[l.closed=3]="closed"})(ls||(ls={}));var gt;(function(l){l.closed="closed",l.errored="errored",l.joined="joined",l.joining="joining",l.leaving="leaving"})(gt||(gt={}));var ca;(function(l){l.close="phx_close",l.error="phx_error",l.join="phx_join",l.reply="phx_reply",l.leave="phx_leave",l.access_token="access_token"})(ca||(ca={}));var Yc;(function(l){l.websocket="websocket"})(Yc||(Yc={}));var As;(function(l){l.Connecting="connecting",l.Open="open",l.Closing="closing",l.Closed="closed"})(As||(As={}));class Pp{constructor(s){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=s??[]}encode(s,i){if(s.event===this.BROADCAST_EVENT&&!(s.payload instanceof ArrayBuffer)&&typeof s.payload.event=="string")return i(this._binaryEncodeUserBroadcastPush(s));let r=[s.join_ref,s.ref,s.topic,s.event,s.payload];return i(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(s){var i;return this._isArrayBuffer((i=s.payload)===null||i===void 0?void 0:i.payload)?this._encodeBinaryUserBroadcastPush(s):this._encodeJsonUserBroadcastPush(s)}_encodeBinaryUserBroadcastPush(s){var i,r;const d=(r=(i=s.payload)===null||i===void 0?void 0:i.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(s,this.BINARY_ENCODING,d)}_encodeJsonUserBroadcastPush(s){var i,r;const d=(r=(i=s.payload)===null||i===void 0?void 0:i.payload)!==null&&r!==void 0?r:{},h=new TextEncoder().encode(JSON.stringify(d)).buffer;return this._encodeUserBroadcastPush(s,this.JSON_ENCODING,h)}_encodeUserBroadcastPush(s,i,r){var d,f;const h=s.topic,g=(d=s.ref)!==null&&d!==void 0?d:"",b=(f=s.join_ref)!==null&&f!==void 0?f:"",p=s.payload.event,y=this.allowedMetadataKeys?this._pick(s.payload,this.allowedMetadataKeys):{},S=Object.keys(y).length===0?"":JSON.stringify(y);if(b.length>255)throw new Error(`joinRef length ${b.length} exceeds maximum of 255`);if(g.length>255)throw new Error(`ref length ${g.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`topic length ${h.length} exceeds maximum of 255`);if(p.length>255)throw new Error(`userEvent length ${p.length} exceeds maximum of 255`);if(S.length>255)throw new Error(`metadata length ${S.length} exceeds maximum of 255`);const j=this.USER_BROADCAST_PUSH_META_LENGTH+b.length+g.length+h.length+p.length+S.length,T=new ArrayBuffer(this.HEADER_LENGTH+j);let C=new DataView(T),q=0;C.setUint8(q++,this.KINDS.userBroadcastPush),C.setUint8(q++,b.length),C.setUint8(q++,g.length),C.setUint8(q++,h.length),C.setUint8(q++,p.length),C.setUint8(q++,S.length),C.setUint8(q++,i),Array.from(b,W=>C.setUint8(q++,W.charCodeAt(0))),Array.from(g,W=>C.setUint8(q++,W.charCodeAt(0))),Array.from(h,W=>C.setUint8(q++,W.charCodeAt(0))),Array.from(p,W=>C.setUint8(q++,W.charCodeAt(0))),Array.from(S,W=>C.setUint8(q++,W.charCodeAt(0)));var L=new Uint8Array(T.byteLength+r.byteLength);return L.set(new Uint8Array(T),0),L.set(new Uint8Array(r),T.byteLength),L.buffer}decode(s,i){if(this._isArrayBuffer(s)){let r=this._binaryDecode(s);return i(r)}if(typeof s=="string"){const r=JSON.parse(s),[d,f,h,g,b]=r;return i({join_ref:d,ref:f,topic:h,event:g,payload:b})}return i({})}_binaryDecode(s){const i=new DataView(s),r=i.getUint8(0),d=new TextDecoder;switch(r){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(s,i,d)}}_decodeUserBroadcast(s,i,r){const d=i.getUint8(1),f=i.getUint8(2),h=i.getUint8(3),g=i.getUint8(4);let b=this.HEADER_LENGTH+4;const p=r.decode(s.slice(b,b+d));b=b+d;const y=r.decode(s.slice(b,b+f));b=b+f;const S=r.decode(s.slice(b,b+h));b=b+h;const j=s.slice(b,s.byteLength),T=g===this.JSON_ENCODING?JSON.parse(r.decode(j)):j,C={type:this.BROADCAST_EVENT,event:y,payload:T};return h>0&&(C.meta=JSON.parse(S)),{join_ref:null,ref:null,topic:p,event:this.BROADCAST_EVENT,payload:C}}_isArrayBuffer(s){var i;return s instanceof ArrayBuffer||((i=s==null?void 0:s.constructor)===null||i===void 0?void 0:i.name)==="ArrayBuffer"}_pick(s,i){return!s||typeof s!="object"?{}:Object.fromEntries(Object.entries(s).filter(([r])=>i.includes(r)))}}class Bm{constructor(s,i){this.callback=s,this.timerCalc=i,this.timer=void 0,this.tries=0,this.callback=s,this.timerCalc=i}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var et;(function(l){l.abstime="abstime",l.bool="bool",l.date="date",l.daterange="daterange",l.float4="float4",l.float8="float8",l.int2="int2",l.int4="int4",l.int4range="int4range",l.int8="int8",l.int8range="int8range",l.json="json",l.jsonb="jsonb",l.money="money",l.numeric="numeric",l.oid="oid",l.reltime="reltime",l.text="text",l.time="time",l.timestamp="timestamp",l.timestamptz="timestamptz",l.timetz="timetz",l.tsrange="tsrange",l.tstzrange="tstzrange"})(et||(et={}));const mm=(l,s,i={})=>{var r;const d=(r=i.skipTypes)!==null&&r!==void 0?r:[];return s?Object.keys(s).reduce((f,h)=>(f[h]=Wp(h,l,s,d),f),{}):{}},Wp=(l,s,i,r)=>{const d=s.find(g=>g.name===l),f=d==null?void 0:d.type,h=i[l];return f&&!r.includes(f)?Hm(f,h):Kc(h)},Hm=(l,s)=>{if(l.charAt(0)==="_"){const i=l.slice(1,l.length);return ab(s,i)}switch(l){case et.bool:return Fp(s);case et.float4:case et.float8:case et.int2:case et.int4:case et.int8:case et.numeric:case et.oid:return eb(s);case et.json:case et.jsonb:return tb(s);case et.timestamp:return sb(s);case et.abstime:case et.date:case et.daterange:case et.int4range:case et.int8range:case et.money:case et.reltime:case et.text:case et.time:case et.timestamptz:case et.timetz:case et.tsrange:case et.tstzrange:return Kc(s);default:return Kc(s)}},Kc=l=>l,Fp=l=>{switch(l){case"t":return!0;case"f":return!1;default:return l}},eb=l=>{if(typeof l=="string"){const s=parseFloat(l);if(!Number.isNaN(s))return s}return l},tb=l=>{if(typeof l=="string")try{return JSON.parse(l)}catch{return l}return l},ab=(l,s)=>{if(typeof l!="string")return l;const i=l.length-1,r=l[i];if(l[0]==="{"&&r==="}"){let f;const h=l.slice(1,i);try{f=JSON.parse("["+h+"]")}catch{f=h?h.split(","):[]}return f.map(g=>Hm(s,g))}return l},sb=l=>typeof l=="string"?l.replace(" ","T"):l,$m=l=>{const s=new URL(l);return s.protocol=s.protocol.replace(/^ws/i,"http"),s.pathname=s.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),s.pathname===""||s.pathname==="/"?s.pathname="/api/broadcast":s.pathname=s.pathname+"/api/broadcast",s.href};class Uc{constructor(s,i,r={},d=Gc){this.channel=s,this.event=i,this.payload=r,this.timeout=d,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(s){this.timeout=s,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(s){this.payload=Object.assign(Object.assign({},this.payload),s)}receive(s,i){var r;return this._hasReceived(s)&&i((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:s,callback:i}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const s=i=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=i,this._matchReceive(i)};this.channel._on(this.refEvent,{},s),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(s,i){this.refEvent&&this.channel._trigger(this.refEvent,{status:s,response:i})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:s,response:i}){this.recHooks.filter(r=>r.status===s).forEach(r=>r.callback(i))}_hasReceived(s){return this.receivedResp&&this.receivedResp.status===s}}var gm;(function(l){l.SYNC="sync",l.JOIN="join",l.LEAVE="leave"})(gm||(gm={}));class Al{constructor(s,i){this.channel=s,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(i==null?void 0:i.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},d=>{const{onJoin:f,onLeave:h,onSync:g}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Al.syncState(this.state,d,f,h),this.pendingDiffs.forEach(b=>{this.state=Al.syncDiff(this.state,b,f,h)}),this.pendingDiffs=[],g()}),this.channel._on(r.diff,{},d=>{const{onJoin:f,onLeave:h,onSync:g}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(d):(this.state=Al.syncDiff(this.state,d,f,h),g())}),this.onJoin((d,f,h)=>{this.channel._trigger("presence",{event:"join",key:d,currentPresences:f,newPresences:h})}),this.onLeave((d,f,h)=>{this.channel._trigger("presence",{event:"leave",key:d,currentPresences:f,leftPresences:h})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(s,i,r,d){const f=this.cloneDeep(s),h=this.transformState(i),g={},b={};return this.map(f,(p,y)=>{h[p]||(b[p]=y)}),this.map(h,(p,y)=>{const S=f[p];if(S){const j=y.map(L=>L.presence_ref),T=S.map(L=>L.presence_ref),C=y.filter(L=>T.indexOf(L.presence_ref)<0),q=S.filter(L=>j.indexOf(L.presence_ref)<0);C.length>0&&(g[p]=C),q.length>0&&(b[p]=q)}else g[p]=y}),this.syncDiff(f,{joins:g,leaves:b},r,d)}static syncDiff(s,i,r,d){const{joins:f,leaves:h}={joins:this.transformState(i.joins),leaves:this.transformState(i.leaves)};return r||(r=()=>{}),d||(d=()=>{}),this.map(f,(g,b)=>{var p;const y=(p=s[g])!==null&&p!==void 0?p:[];if(s[g]=this.cloneDeep(b),y.length>0){const S=s[g].map(T=>T.presence_ref),j=y.filter(T=>S.indexOf(T.presence_ref)<0);s[g].unshift(...j)}r(g,y,b)}),this.map(h,(g,b)=>{let p=s[g];if(!p)return;const y=b.map(S=>S.presence_ref);p=p.filter(S=>y.indexOf(S.presence_ref)<0),s[g]=p,d(g,p,b),p.length===0&&delete s[g]}),s}static map(s,i){return Object.getOwnPropertyNames(s).map(r=>i(r,s[r]))}static transformState(s){return s=this.cloneDeep(s),Object.getOwnPropertyNames(s).reduce((i,r)=>{const d=s[r];return"metas"in d?i[r]=d.metas.map(f=>(f.presence_ref=f.phx_ref,delete f.phx_ref,delete f.phx_ref_prev,f)):i[r]=d,i},{})}static cloneDeep(s){return JSON.parse(JSON.stringify(s))}onJoin(s){this.caller.onJoin=s}onLeave(s){this.caller.onLeave=s}onSync(s){this.caller.onSync=s}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var pm;(function(l){l.ALL="*",l.INSERT="INSERT",l.UPDATE="UPDATE",l.DELETE="DELETE"})(pm||(pm={}));var Ol;(function(l){l.BROADCAST="broadcast",l.PRESENCE="presence",l.POSTGRES_CHANGES="postgres_changes",l.SYSTEM="system"})(Ol||(Ol={}));var Ra;(function(l){l.SUBSCRIBED="SUBSCRIBED",l.TIMED_OUT="TIMED_OUT",l.CLOSED="CLOSED",l.CHANNEL_ERROR="CHANNEL_ERROR"})(Ra||(Ra={}));class Tn{constructor(s,i={config:{}},r){var d,f;if(this.topic=s,this.params=i,this.socket=r,this.bindings={},this.state=gt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=s.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},i.config),this.timeout=this.socket.timeout,this.joinPush=new Uc(this,ca.join,this.params,this.timeout),this.rejoinTimer=new Bm(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=gt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(h=>h.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=gt.closed,this.socket._remove(this)}),this._onError(h=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,h),this.state=gt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=gt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",h=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,h),this.state=gt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ca.reply,{},(h,g)=>{this._trigger(this._replyEventName(g),h)}),this.presence=new Al(this),this.broadcastEndpointURL=$m(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((f=(d=this.params.config)===null||d===void 0?void 0:d.broadcast)===null||f===void 0)&&f.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(s,i=this.timeout){var r,d,f;if(this.socket.isConnected()||this.socket.connect(),this.state==gt.closed){const{config:{broadcast:h,presence:g,private:b}}=this.params,p=(d=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(T=>T.filter))!==null&&d!==void 0?d:[],y=!!this.bindings[Ol.PRESENCE]&&this.bindings[Ol.PRESENCE].length>0||((f=this.params.config.presence)===null||f===void 0?void 0:f.enabled)===!0,S={},j={broadcast:h,presence:Object.assign(Object.assign({},g),{enabled:y}),postgres_changes:p,private:b};this.socket.accessTokenValue&&(S.access_token=this.socket.accessTokenValue),this._onError(T=>s==null?void 0:s(Ra.CHANNEL_ERROR,T)),this._onClose(()=>s==null?void 0:s(Ra.CLOSED)),this.updateJoinPayload(Object.assign({config:j},S)),this.joinedOnce=!0,this._rejoin(i),this.joinPush.receive("ok",async({postgres_changes:T})=>{var C;if(this.socket._isManualToken()||this.socket.setAuth(),T===void 0){s==null||s(Ra.SUBSCRIBED);return}else{const q=this.bindings.postgres_changes,L=(C=q==null?void 0:q.length)!==null&&C!==void 0?C:0,W=[];for(let Z=0;Z<L;Z++){const k=q[Z],{filter:{event:te,schema:he,table:fe,filter:ae}}=k,we=T&&T[Z];if(we&&we.event===te&&Tn.isFilterValueEqual(we.schema,he)&&Tn.isFilterValueEqual(we.table,fe)&&Tn.isFilterValueEqual(we.filter,ae))W.push(Object.assign(Object.assign({},k),{id:we.id}));else{this.unsubscribe(),this.state=gt.errored,s==null||s(Ra.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=W,s&&s(Ra.SUBSCRIBED);return}}).receive("error",T=>{this.state=gt.errored,s==null||s(Ra.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(T).join(", ")||"error")))}).receive("timeout",()=>{s==null||s(Ra.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(s,i={}){return await this.send({type:"presence",event:"track",payload:s},i.timeout||this.timeout)}async untrack(s={}){return await this.send({type:"presence",event:"untrack"},s)}on(s,i,r){return this.state===gt.joined&&s===Ol.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(s,i,r)}async httpSend(s,i,r={}){var d;if(i==null)return Promise.reject("Payload is required for httpSend()");const f={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(f.Authorization=`Bearer ${this.socket.accessTokenValue}`);const h={method:"POST",headers:f,body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:i,private:this.private}]})},g=await this._fetchWithTimeout(this.broadcastEndpointURL,h,(d=r.timeout)!==null&&d!==void 0?d:this.timeout);if(g.status===202)return{success:!0};let b=g.statusText;try{const p=await g.json();b=p.error||p.message||b}catch{}return Promise.reject(new Error(b))}async send(s,i={}){var r,d;if(!this._canPush()&&s.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:f,payload:h}=s,g={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(g.Authorization=`Bearer ${this.socket.accessTokenValue}`);const b={method:"POST",headers:g,body:JSON.stringify({messages:[{topic:this.subTopic,event:f,payload:h,private:this.private}]})};try{const p=await this._fetchWithTimeout(this.broadcastEndpointURL,b,(r=i.timeout)!==null&&r!==void 0?r:this.timeout);return await((d=p.body)===null||d===void 0?void 0:d.cancel()),p.ok?"ok":"error"}catch(p){return p.name==="AbortError"?"timed out":"error"}}else return new Promise(f=>{var h,g,b;const p=this._push(s.type,s,i.timeout||this.timeout);s.type==="broadcast"&&!(!((b=(g=(h=this.params)===null||h===void 0?void 0:h.config)===null||g===void 0?void 0:g.broadcast)===null||b===void 0)&&b.ack)&&f("ok"),p.receive("ok",()=>f("ok")),p.receive("error",()=>f("error")),p.receive("timeout",()=>f("timed out"))})}updateJoinPayload(s){this.joinPush.updatePayload(s)}unsubscribe(s=this.timeout){this.state=gt.leaving;const i=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ca.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(d=>{r=new Uc(this,ca.leave,{},s),r.receive("ok",()=>{i(),d("ok")}).receive("timeout",()=>{i(),d("timed out")}).receive("error",()=>{d("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(s=>s.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=gt.closed,this.bindings={}}async _fetchWithTimeout(s,i,r){const d=new AbortController,f=setTimeout(()=>d.abort(),r),h=await this.socket.fetch(s,Object.assign(Object.assign({},i),{signal:d.signal}));return clearTimeout(f),h}_push(s,i,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${s}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let d=new Uc(this,s,i,r);return this._canPush()?d.send():this._addToPushBuffer(d),d}_addToPushBuffer(s){if(s.startTimeout(),this.pushBuffer.push(s),this.pushBuffer.length>Zp){const i=this.pushBuffer.shift();i&&(i.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${i.event}`,i.payload))}}_onMessage(s,i,r){return i}_isMember(s){return this.topic===s}_joinRef(){return this.joinPush.ref}_trigger(s,i,r){var d,f;const h=s.toLocaleLowerCase(),{close:g,error:b,leave:p,join:y}=ca;if(r&&[g,b,p,y].indexOf(h)>=0&&r!==this._joinRef())return;let j=this._onMessage(h,i,r);if(i&&!j)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(h)?(d=this.bindings.postgres_changes)===null||d===void 0||d.filter(T=>{var C,q,L;return((C=T.filter)===null||C===void 0?void 0:C.event)==="*"||((L=(q=T.filter)===null||q===void 0?void 0:q.event)===null||L===void 0?void 0:L.toLocaleLowerCase())===h}).map(T=>T.callback(j,r)):(f=this.bindings[h])===null||f===void 0||f.filter(T=>{var C,q,L,W,Z,k;if(["broadcast","presence","postgres_changes"].includes(h))if("id"in T){const te=T.id,he=(C=T.filter)===null||C===void 0?void 0:C.event;return te&&((q=i.ids)===null||q===void 0?void 0:q.includes(te))&&(he==="*"||(he==null?void 0:he.toLocaleLowerCase())===((L=i.data)===null||L===void 0?void 0:L.type.toLocaleLowerCase()))}else{const te=(Z=(W=T==null?void 0:T.filter)===null||W===void 0?void 0:W.event)===null||Z===void 0?void 0:Z.toLocaleLowerCase();return te==="*"||te===((k=i==null?void 0:i.event)===null||k===void 0?void 0:k.toLocaleLowerCase())}else return T.type.toLocaleLowerCase()===h}).map(T=>{if(typeof j=="object"&&"ids"in j){const C=j.data,{schema:q,table:L,commit_timestamp:W,type:Z,errors:k}=C;j=Object.assign(Object.assign({},{schema:q,table:L,commit_timestamp:W,eventType:Z,new:{},old:{},errors:k}),this._getPayloadRecords(C))}T.callback(j,r)})}_isClosed(){return this.state===gt.closed}_isJoined(){return this.state===gt.joined}_isJoining(){return this.state===gt.joining}_isLeaving(){return this.state===gt.leaving}_replyEventName(s){return`chan_reply_${s}`}_on(s,i,r){const d=s.toLocaleLowerCase(),f={type:d,filter:i,callback:r};return this.bindings[d]?this.bindings[d].push(f):this.bindings[d]=[f],this}_off(s,i){const r=s.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(d=>{var f;return!(((f=d.type)===null||f===void 0?void 0:f.toLocaleLowerCase())===r&&Tn.isEqual(d.filter,i))})),this}static isEqual(s,i){if(Object.keys(s).length!==Object.keys(i).length)return!1;for(const r in s)if(s[r]!==i[r])return!1;return!0}static isFilterValueEqual(s,i){return(s??void 0)===(i??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(s){this._on(ca.close,{},s)}_onError(s){this._on(ca.error,{},i=>s(i))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(s=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=gt.joining,this.joinPush.resend(s))}_getPayloadRecords(s){const i={new:{},old:{}};return(s.type==="INSERT"||s.type==="UPDATE")&&(i.new=mm(s.columns,s.record)),(s.type==="UPDATE"||s.type==="DELETE")&&(i.old=mm(s.columns,s.old_record)),i}}const zc=()=>{},tr={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},nb=[1e3,2e3,5e3,1e4],lb=1e4,ib=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class rb{constructor(s,i){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Gc,this.transport=null,this.heartbeatIntervalMs=tr.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=zc,this.ref=0,this.reconnectTimer=null,this.vsn=hm,this.logger=zc,this.conn=null,this.sendBuffer=[],this.serializer=new Pp,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=d=>d?(...f)=>d(...f):(...f)=>fetch(...f),!(!((r=i==null?void 0:i.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=i.params.apikey,this.endPoint=`${s}/${Yc.websocket}`,this.httpEndpoint=$m(s),this._initializeOptions(i),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(i==null?void 0:i.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Yp.createWebSocket(this.endpointURL())}catch(s){this._setConnectionState("disconnected");const i=s.message;throw i.includes("Node.js")?new Error(`${i}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${i}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(s,i){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(s?this.conn.close(s,i??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(s){const i=await s.unsubscribe();return this.channels.length===0&&this.disconnect(),i}async removeAllChannels(){const s=await Promise.all(this.channels.map(i=>i.unsubscribe()));return this.channels=[],this.disconnect(),s}log(s,i,r){this.logger(s,i,r)}connectionState(){switch(this.conn&&this.conn.readyState){case ls.connecting:return As.Connecting;case ls.open:return As.Open;case ls.closing:return As.Closing;default:return As.Closed}}isConnected(){return this.connectionState()===As.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(s,i={config:{}}){const r=`realtime:${s}`,d=this.getChannels().find(f=>f.topic===r);if(d)return d;{const f=new Tn(`realtime:${s}`,i,this);return this.channels.push(f),f}}push(s){const{topic:i,event:r,payload:d,ref:f}=s,h=()=>{this.encode(s,g=>{var b;(b=this.conn)===null||b===void 0||b.send(g)})};this.log("push",`${i} ${r} (${f})`,d),this.isConnected()?h():this.sendBuffer.push(h)}async setAuth(s=null){this._authPromise=this._performAuth(s);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var s;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(i){this.log("error","error in heartbeat callback",i)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(i){this.log("error","error in heartbeat callback",i)}this._wasManualDisconnect=!1,(s=this.conn)===null||s===void 0||s.close(Jp,"heartbeat timeout"),setTimeout(()=>{var i;this.isConnected()||(i=this.reconnectTimer)===null||i===void 0||i.scheduleTimeout()},tr.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(i){this.log("error","error in heartbeat callback",i)}this._setAuthSafely("heartbeat")}onHeartbeat(s){this.heartbeatCallback=s}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(s=>s()),this.sendBuffer=[])}_makeRef(){let s=this.ref+1;return s===this.ref?this.ref=0:this.ref=s,this.ref.toString()}_leaveOpenTopic(s){let i=this.channels.find(r=>r.topic===s&&(r._isJoined()||r._isJoining()));i&&(this.log("transport",`leaving duplicate topic "${s}"`),i.unsubscribe())}_remove(s){this.channels=this.channels.filter(i=>i.topic!==s.topic)}_onConnMessage(s){this.decode(s.data,i=>{if(i.topic==="phoenix"&&i.event==="phx_reply"&&i.ref&&i.ref===this.pendingHeartbeatRef){const p=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(i.payload.status==="ok"?"ok":"error",p)}catch(y){this.log("error","error in heartbeat callback",y)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:r,event:d,payload:f,ref:h}=i,g=h?`(${h})`:"",b=f.status||"";this.log("receive",`${b} ${r} ${d} ${g}`.trim(),f),this.channels.filter(p=>p._isMember(r)).forEach(p=>p._trigger(d,f,h)),this._triggerStateCallbacks("message",i)})}_clearTimer(s){var i;s==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):s==="reconnect"&&((i=this.reconnectTimer)===null||i===void 0||i.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=s=>this._onConnError(s),this.conn.onmessage=s=>this._onConnMessage(s),this.conn.onclose=s=>this._onConnClose(s),this.conn.readyState===ls.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===ls.open||this.conn.readyState===ls.connecting)try{this.conn.close()}catch(s){this.log("error","Error closing connection",s)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(s=>s.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(i=>{this.log("error","error waiting for auth on connect",i),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const s=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(s),this.workerRef.onerror=i=>{this.log("worker","worker error",i.message),this._terminateWorker()},this.workerRef.onmessage=i=>{i.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(s){var i;this._setConnectionState("disconnected"),this.log("transport","close",s),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(i=this.reconnectTimer)===null||i===void 0||i.scheduleTimeout(),this._triggerStateCallbacks("close",s)}_onConnError(s){this._setConnectionState("disconnected"),this.log("transport",`${s}`),this._triggerChanError(),this._triggerStateCallbacks("error",s);try{this.heartbeatCallback("error")}catch(i){this.log("error","error in heartbeat callback",i)}}_triggerChanError(){this.channels.forEach(s=>s._trigger(ca.error))}_appendParams(s,i){if(Object.keys(i).length===0)return s;const r=s.match(/\?/)?"&":"?",d=new URLSearchParams(i);return`${s}${r}${d}`}_workerObjectUrl(s){let i;if(s)i=s;else{const r=new Blob([ib],{type:"application/javascript"});i=URL.createObjectURL(r)}return i}_setConnectionState(s,i=!1){this._connectionState=s,s==="connecting"?this._wasManualDisconnect=!1:s==="disconnecting"&&(this._wasManualDisconnect=i)}async _performAuth(s=null){let i,r=!1;if(s)i=s,r=!0;else if(this.accessToken)try{i=await this.accessToken()}catch(d){this.log("error","Error fetching access token from callback",d),i=this.accessTokenValue}else i=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=i&&(this.accessTokenValue=i,this.channels.forEach(d=>{const f={access_token:i,version:Xp};i&&d.updateJoinPayload(f),d.joinedOnce&&d._isJoined()&&d._push(ca.access_token,{access_token:i})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(s="general"){this._isManualToken()||this.setAuth().catch(i=>{this.log("error",`Error setting auth in ${s}`,i)})}_triggerStateCallbacks(s,i){try{this.stateChangeCallbacks[s].forEach(r=>{try{r(i)}catch(d){this.log("error",`error in ${s} callback`,d)}})}catch(r){this.log("error",`error triggering ${s} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new Bm(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},tr.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(s){var i,r,d,f,h,g,b,p,y,S,j,T;switch(this.transport=(i=s==null?void 0:s.transport)!==null&&i!==void 0?i:null,this.timeout=(r=s==null?void 0:s.timeout)!==null&&r!==void 0?r:Gc,this.heartbeatIntervalMs=(d=s==null?void 0:s.heartbeatIntervalMs)!==null&&d!==void 0?d:tr.HEARTBEAT_INTERVAL,this.worker=(f=s==null?void 0:s.worker)!==null&&f!==void 0?f:!1,this.accessToken=(h=s==null?void 0:s.accessToken)!==null&&h!==void 0?h:null,this.heartbeatCallback=(g=s==null?void 0:s.heartbeatCallback)!==null&&g!==void 0?g:zc,this.vsn=(b=s==null?void 0:s.vsn)!==null&&b!==void 0?b:hm,s!=null&&s.params&&(this.params=s.params),s!=null&&s.logger&&(this.logger=s.logger),(s!=null&&s.logLevel||s!=null&&s.log_level)&&(this.logLevel=s.logLevel||s.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(p=s==null?void 0:s.reconnectAfterMs)!==null&&p!==void 0?p:(C=>nb[C-1]||lb),this.vsn){case Qp:this.encode=(y=s==null?void 0:s.encode)!==null&&y!==void 0?y:((C,q)=>q(JSON.stringify(C))),this.decode=(S=s==null?void 0:s.decode)!==null&&S!==void 0?S:((C,q)=>q(JSON.parse(C)));break;case qm:this.encode=(j=s==null?void 0:s.encode)!==null&&j!==void 0?j:this.serializer.encode.bind(this.serializer),this.decode=(T=s==null?void 0:s.decode)!==null&&T!==void 0?T:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=s==null?void 0:s.workerUrl}}}var Cl=class extends Error{constructor(l,s){var i;super(l),this.name="IcebergError",this.status=s.status,this.icebergType=s.icebergType,this.icebergCode=s.icebergCode,this.details=s.details,this.isCommitStateUnknown=s.icebergType==="CommitStateUnknownException"||[500,502,504].includes(s.status)&&((i=s.icebergType)==null?void 0:i.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function ob(l,s,i){const r=new URL(s,l);if(i)for(const[d,f]of Object.entries(i))f!==void 0&&r.searchParams.set(d,f);return r.toString()}async function cb(l){return!l||l.type==="none"?{}:l.type==="bearer"?{Authorization:`Bearer ${l.token}`}:l.type==="header"?{[l.name]:l.value}:l.type==="custom"?await l.getHeaders():{}}function ub(l){const s=l.fetchImpl??globalThis.fetch;return{async request({method:i,path:r,query:d,body:f,headers:h}){const g=ob(l.baseUrl,r,d),b=await cb(l.auth),p=await s(g,{method:i,headers:{...f?{"Content-Type":"application/json"}:{},...b,...h},body:f?JSON.stringify(f):void 0}),y=await p.text(),S=(p.headers.get("content-type")||"").includes("application/json"),j=S&&y?JSON.parse(y):y;if(!p.ok){const T=S?j:void 0,C=T==null?void 0:T.error;throw new Cl((C==null?void 0:C.message)??`Request failed with status ${p.status}`,{status:p.status,icebergType:C==null?void 0:C.type,icebergCode:C==null?void 0:C.code,details:T})}return{status:p.status,headers:p.headers,data:j}}}}function ar(l){return l.join("")}var db=class{constructor(l,s=""){this.client=l,this.prefix=s}async listNamespaces(l){const s=l?{parent:ar(l.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:s})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(l,s){const i={namespace:l.namespace,properties:s==null?void 0:s.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:i})).data}async dropNamespace(l){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${ar(l.namespace)}`})}async loadNamespaceMetadata(l){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${ar(l.namespace)}`})).data.properties}}async namespaceExists(l){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${ar(l.namespace)}`}),!0}catch(s){if(s instanceof Cl&&s.status===404)return!1;throw s}}async createNamespaceIfNotExists(l,s){try{return await this.createNamespace(l,s)}catch(i){if(i instanceof Cl&&i.status===409)return;throw i}}};function bn(l){return l.join("")}var fb=class{constructor(l,s="",i){this.client=l,this.prefix=s,this.accessDelegation=i}async listTables(l){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${bn(l.namespace)}/tables`})).data.identifiers}async createTable(l,s){const i={};return this.accessDelegation&&(i["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${bn(l.namespace)}/tables`,body:s,headers:i})).data.metadata}async updateTable(l,s){const i=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${bn(l.namespace)}/tables/${l.name}`,body:s});return{"metadata-location":i.data["metadata-location"],metadata:i.data.metadata}}async dropTable(l,s){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${bn(l.namespace)}/tables/${l.name}`,query:{purgeRequested:String((s==null?void 0:s.purge)??!1)}})}async loadTable(l){const s={};return this.accessDelegation&&(s["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${bn(l.namespace)}/tables/${l.name}`,headers:s})).data.metadata}async tableExists(l){const s={};this.accessDelegation&&(s["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${bn(l.namespace)}/tables/${l.name}`,headers:s}),!0}catch(i){if(i instanceof Cl&&i.status===404)return!1;throw i}}async createTableIfNotExists(l,s){try{return await this.createTable(l,s)}catch(i){if(i instanceof Cl&&i.status===409)return await this.loadTable({namespace:l.namespace,name:s.name});throw i}}},hb=class{constructor(l){var r;let s="v1";l.catalogName&&(s+=`/${l.catalogName}`);const i=l.baseUrl.endsWith("/")?l.baseUrl:`${l.baseUrl}/`;this.client=ub({baseUrl:i,auth:l.auth,fetchImpl:l.fetch}),this.accessDelegation=(r=l.accessDelegation)==null?void 0:r.join(","),this.namespaceOps=new db(this.client,s),this.tableOps=new fb(this.client,s,this.accessDelegation)}async listNamespaces(l){return this.namespaceOps.listNamespaces(l)}async createNamespace(l,s){return this.namespaceOps.createNamespace(l,s)}async dropNamespace(l){await this.namespaceOps.dropNamespace(l)}async loadNamespaceMetadata(l){return this.namespaceOps.loadNamespaceMetadata(l)}async listTables(l){return this.tableOps.listTables(l)}async createTable(l,s){return this.tableOps.createTable(l,s)}async updateTable(l,s){return this.tableOps.updateTable(l,s)}async dropTable(l,s){await this.tableOps.dropTable(l,s)}async loadTable(l){return this.tableOps.loadTable(l)}async namespaceExists(l){return this.namespaceOps.namespaceExists(l)}async tableExists(l){return this.tableOps.tableExists(l)}async createNamespaceIfNotExists(l,s){return this.namespaceOps.createNamespaceIfNotExists(l,s)}async createTableIfNotExists(l,s){return this.tableOps.createTableIfNotExists(l,s)}},fr=class extends Error{constructor(l,s="storage",i,r){super(l),this.__isStorageError=!0,this.namespace=s,this.name=s==="vectors"?"StorageVectorsError":"StorageError",this.status=i,this.statusCode=r}};function hr(l){return typeof l=="object"&&l!==null&&"__isStorageError"in l}var sr=class extends fr{constructor(l,s,i,r="storage"){super(l,r,s,i),this.name=r==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=s,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Im=class extends fr{constructor(l,s,i="storage"){super(l,i),this.name=i==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=s}};const mb=l=>l?(...s)=>l(...s):(...s)=>fetch(...s),gb=l=>{if(typeof l!="object"||l===null)return!1;const s=Object.getPrototypeOf(l);return(s===null||s===Object.prototype||Object.getPrototypeOf(s)===null)&&!(Symbol.toStringTag in l)&&!(Symbol.iterator in l)},Xc=l=>{if(Array.isArray(l))return l.map(i=>Xc(i));if(typeof l=="function"||l!==Object(l))return l;const s={};return Object.entries(l).forEach(([i,r])=>{const d=i.replace(/([-_][a-z])/gi,f=>f.toUpperCase().replace(/[-_]/g,""));s[d]=Xc(r)}),s},pb=l=>!l||typeof l!="string"||l.length===0||l.length>100||l.trim()!==l||l.includes("/")||l.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(l);function Rl(l){"@babel/helpers - typeof";return Rl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Rl(l)}function bb(l,s){if(Rl(l)!="object"||!l)return l;var i=l[Symbol.toPrimitive];if(i!==void 0){var r=i.call(l,s);if(Rl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(l)}function vb(l){var s=bb(l,"string");return Rl(s)=="symbol"?s:s+""}function xb(l,s,i){return(s=vb(s))in l?Object.defineProperty(l,s,{value:i,enumerable:!0,configurable:!0,writable:!0}):l[s]=i,l}function bm(l,s){var i=Object.keys(l);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(l);s&&(r=r.filter(function(d){return Object.getOwnPropertyDescriptor(l,d).enumerable})),i.push.apply(i,r)}return i}function Oe(l){for(var s=1;s<arguments.length;s++){var i=arguments[s]!=null?arguments[s]:{};s%2?bm(Object(i),!0).forEach(function(r){xb(l,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(i)):bm(Object(i)).forEach(function(r){Object.defineProperty(l,r,Object.getOwnPropertyDescriptor(i,r))})}return l}const vm=l=>{var s;return l.msg||l.message||l.error_description||(typeof l.error=="string"?l.error:(s=l.error)===null||s===void 0?void 0:s.message)||JSON.stringify(l)},yb=async(l,s,i,r)=>{if(l&&typeof l=="object"&&"status"in l&&"ok"in l&&typeof l.status=="number"&&!(i!=null&&i.noResolveJson)){const d=l,f=d.status||500;if(typeof d.json=="function")d.json().then(h=>{const g=(h==null?void 0:h.statusCode)||(h==null?void 0:h.code)||f+"";s(new sr(vm(h),f,g,r))}).catch(()=>{if(r==="vectors"){const h=f+"";s(new sr(d.statusText||`HTTP ${f} error`,f,h,r))}else{const h=f+"";s(new sr(d.statusText||`HTTP ${f} error`,f,h,r))}});else{const h=f+"";s(new sr(d.statusText||`HTTP ${f} error`,f,h,r))}}else s(new Im(vm(l),l,r))},wb=(l,s,i,r)=>{const d={method:l,headers:(s==null?void 0:s.headers)||{}};return l==="GET"||l==="HEAD"||!r?Oe(Oe({},d),i):(gb(r)?(d.headers=Oe({"Content-Type":"application/json"},s==null?void 0:s.headers),d.body=JSON.stringify(r)):d.body=r,s!=null&&s.duplex&&(d.duplex=s.duplex),Oe(Oe({},d),i))};async function Nl(l,s,i,r,d,f,h){return new Promise((g,b)=>{l(i,wb(s,r,d,f)).then(p=>{if(!p.ok)throw p;if(r!=null&&r.noResolveJson)return p;if(h==="vectors"){const y=p.headers.get("content-type");if(p.headers.get("content-length")==="0"||p.status===204)return{};if(!y||!y.includes("application/json"))return{}}return p.json()}).then(p=>g(p)).catch(p=>yb(p,b,r,h))})}function Vm(l="storage"){return{get:async(s,i,r,d)=>Nl(s,"GET",i,r,d,void 0,l),post:async(s,i,r,d,f)=>Nl(s,"POST",i,d,f,r,l),put:async(s,i,r,d,f)=>Nl(s,"PUT",i,d,f,r,l),head:async(s,i,r,d)=>Nl(s,"HEAD",i,Oe(Oe({},r),{},{noResolveJson:!0}),d,void 0,l),remove:async(s,i,r,d,f)=>Nl(s,"DELETE",i,d,f,r,l)}}const _b=Vm("storage"),{get:Dl,post:oa,put:Qc,head:Sb,remove:tu}=_b,Xt=Vm("vectors");var On=class{constructor(l,s={},i,r="storage"){this.shouldThrowOnError=!1,this.url=l,this.headers=s,this.fetch=mb(i),this.namespace=r}throwOnError(){return this.shouldThrowOnError=!0,this}async handleOperation(l){var s=this;try{return{data:await l(),error:null}}catch(i){if(s.shouldThrowOnError)throw i;if(hr(i))return{data:null,error:i};throw i}}},jb=class{constructor(l,s){this.downloadFn=l,this.shouldThrowOnError=s}then(l,s){return this.execute().then(l,s)}async execute(){var l=this;try{return{data:(await l.downloadFn()).body,error:null}}catch(s){if(l.shouldThrowOnError)throw s;if(hr(s))return{data:null,error:s};throw s}}};let Gm;Gm=Symbol.toStringTag;var Nb=class{constructor(l,s){this.downloadFn=l,this.shouldThrowOnError=s,this[Gm]="BlobDownloadBuilder",this.promise=null}asStream(){return new jb(this.downloadFn,this.shouldThrowOnError)}then(l,s){return this.getPromise().then(l,s)}catch(l){return this.getPromise().catch(l)}finally(l){return this.getPromise().finally(l)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var l=this;try{return{data:await(await l.downloadFn()).blob(),error:null}}catch(s){if(l.shouldThrowOnError)throw s;if(hr(s))return{data:null,error:s};throw s}}};const Eb={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},xm={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var Tb=class extends On{constructor(l,s={},i,r){super(l,s,r,"storage"),this.bucketId=i}async uploadOrUpdate(l,s,i,r){var d=this;return d.handleOperation(async()=>{let f;const h=Oe(Oe({},xm),r);let g=Oe(Oe({},d.headers),l==="POST"&&{"x-upsert":String(h.upsert)});const b=h.metadata;typeof Blob<"u"&&i instanceof Blob?(f=new FormData,f.append("cacheControl",h.cacheControl),b&&f.append("metadata",d.encodeMetadata(b)),f.append("",i)):typeof FormData<"u"&&i instanceof FormData?(f=i,f.has("cacheControl")||f.append("cacheControl",h.cacheControl),b&&!f.has("metadata")&&f.append("metadata",d.encodeMetadata(b))):(f=i,g["cache-control"]=`max-age=${h.cacheControl}`,g["content-type"]=h.contentType,b&&(g["x-metadata"]=d.toBase64(d.encodeMetadata(b))),(typeof ReadableStream<"u"&&f instanceof ReadableStream||f&&typeof f=="object"&&"pipe"in f&&typeof f.pipe=="function")&&!h.duplex&&(h.duplex="half")),r!=null&&r.headers&&(g=Oe(Oe({},g),r.headers));const p=d._removeEmptyFolders(s),y=d._getFinalPath(p),S=await(l=="PUT"?Qc:oa)(d.fetch,`${d.url}/object/${y}`,f,Oe({headers:g},h!=null&&h.duplex?{duplex:h.duplex}:{}));return{path:p,id:S.Id,fullPath:S.Key}})}async upload(l,s,i){return this.uploadOrUpdate("POST",l,s,i)}async uploadToSignedUrl(l,s,i,r){var d=this;const f=d._removeEmptyFolders(l),h=d._getFinalPath(f),g=new URL(d.url+`/object/upload/sign/${h}`);return g.searchParams.set("token",s),d.handleOperation(async()=>{let b;const p=Oe({upsert:xm.upsert},r),y=Oe(Oe({},d.headers),{"x-upsert":String(p.upsert)});return typeof Blob<"u"&&i instanceof Blob?(b=new FormData,b.append("cacheControl",p.cacheControl),b.append("",i)):typeof FormData<"u"&&i instanceof FormData?(b=i,b.append("cacheControl",p.cacheControl)):(b=i,y["cache-control"]=`max-age=${p.cacheControl}`,y["content-type"]=p.contentType),{path:f,fullPath:(await Qc(d.fetch,g.toString(),b,{headers:y})).Key}})}async createSignedUploadUrl(l,s){var i=this;return i.handleOperation(async()=>{let r=i._getFinalPath(l);const d=Oe({},i.headers);s!=null&&s.upsert&&(d["x-upsert"]="true");const f=await oa(i.fetch,`${i.url}/object/upload/sign/${r}`,{},{headers:d}),h=new URL(i.url+f.url),g=h.searchParams.get("token");if(!g)throw new fr("No token returned by API");return{signedUrl:h.toString(),path:l,token:g}})}async update(l,s,i){return this.uploadOrUpdate("PUT",l,s,i)}async move(l,s,i){var r=this;return r.handleOperation(async()=>await oa(r.fetch,`${r.url}/object/move`,{bucketId:r.bucketId,sourceKey:l,destinationKey:s,destinationBucket:i==null?void 0:i.destinationBucket},{headers:r.headers}))}async copy(l,s,i){var r=this;return r.handleOperation(async()=>({path:(await oa(r.fetch,`${r.url}/object/copy`,{bucketId:r.bucketId,sourceKey:l,destinationKey:s,destinationBucket:i==null?void 0:i.destinationBucket},{headers:r.headers})).Key}))}async createSignedUrl(l,s,i){var r=this;return r.handleOperation(async()=>{let d=r._getFinalPath(l),f=await oa(r.fetch,`${r.url}/object/sign/${d}`,Oe({expiresIn:s},i!=null&&i.transform?{transform:i.transform}:{}),{headers:r.headers});const h=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return{signedUrl:encodeURI(`${r.url}${f.signedURL}${h}`)}})}async createSignedUrls(l,s,i){var r=this;return r.handleOperation(async()=>{const d=await oa(r.fetch,`${r.url}/object/sign/${r.bucketId}`,{expiresIn:s,paths:l},{headers:r.headers}),f=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return d.map(h=>Oe(Oe({},h),{},{signedUrl:h.signedURL?encodeURI(`${r.url}${h.signedURL}${f}`):null}))})}download(l,s){const i=typeof(s==null?void 0:s.transform)<"u"?"render/image/authenticated":"object",r=this.transformOptsToQueryString((s==null?void 0:s.transform)||{}),d=r?`?${r}`:"",f=this._getFinalPath(l),h=()=>Dl(this.fetch,`${this.url}/${i}/${f}${d}`,{headers:this.headers,noResolveJson:!0});return new Nb(h,this.shouldThrowOnError)}async info(l){var s=this;const i=s._getFinalPath(l);return s.handleOperation(async()=>Xc(await Dl(s.fetch,`${s.url}/object/info/${i}`,{headers:s.headers})))}async exists(l){var s=this;const i=s._getFinalPath(l);try{return await Sb(s.fetch,`${s.url}/object/${i}`,{headers:s.headers}),{data:!0,error:null}}catch(r){if(s.shouldThrowOnError)throw r;if(hr(r)&&r instanceof Im){const d=r.originalError;if([400,404].includes(d==null?void 0:d.status))return{data:!1,error:r}}throw r}}getPublicUrl(l,s){const i=this._getFinalPath(l),r=[],d=s!=null&&s.download?`download=${s.download===!0?"":s.download}`:"";d!==""&&r.push(d);const f=typeof(s==null?void 0:s.transform)<"u"?"render/image":"object",h=this.transformOptsToQueryString((s==null?void 0:s.transform)||{});h!==""&&r.push(h);let g=r.join("&");return g!==""&&(g=`?${g}`),{data:{publicUrl:encodeURI(`${this.url}/${f}/public/${i}${g}`)}}}async remove(l){var s=this;return s.handleOperation(async()=>await tu(s.fetch,`${s.url}/object/${s.bucketId}`,{prefixes:l},{headers:s.headers}))}async list(l,s,i){var r=this;return r.handleOperation(async()=>{const d=Oe(Oe(Oe({},Eb),s),{},{prefix:l||""});return await oa(r.fetch,`${r.url}/object/list/${r.bucketId}`,d,{headers:r.headers},i)})}async listV2(l,s){var i=this;return i.handleOperation(async()=>{const r=Oe({},l);return await oa(i.fetch,`${i.url}/object/list-v2/${i.bucketId}`,r,{headers:i.headers},s)})}encodeMetadata(l){return JSON.stringify(l)}toBase64(l){return typeof Buffer<"u"?Buffer.from(l).toString("base64"):btoa(l)}_getFinalPath(l){return`${this.bucketId}/${l.replace(/^\/+/,"")}`}_removeEmptyFolders(l){return l.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(l){const s=[];return l.width&&s.push(`width=${l.width}`),l.height&&s.push(`height=${l.height}`),l.resize&&s.push(`resize=${l.resize}`),l.format&&s.push(`format=${l.format}`),l.quality&&s.push(`quality=${l.quality}`),s.join("&")}};const Ab="2.94.0",Ll={"X-Client-Info":`storage-js/${Ab}`};var Ob=class extends On{constructor(l,s={},i,r){const d=new URL(l);r!=null&&r.useNewHostname&&/supabase\.(co|in|red)$/.test(d.hostname)&&!d.hostname.includes("storage.supabase.")&&(d.hostname=d.hostname.replace("supabase.","storage.supabase."));const f=d.href.replace(/\/$/,""),h=Oe(Oe({},Ll),s);super(f,h,i,"storage")}async listBuckets(l){var s=this;return s.handleOperation(async()=>{const i=s.listBucketOptionsToQueryString(l);return await Dl(s.fetch,`${s.url}/bucket${i}`,{headers:s.headers})})}async getBucket(l){var s=this;return s.handleOperation(async()=>await Dl(s.fetch,`${s.url}/bucket/${l}`,{headers:s.headers}))}async createBucket(l,s={public:!1}){var i=this;return i.handleOperation(async()=>await oa(i.fetch,`${i.url}/bucket`,{id:l,name:l,type:s.type,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:i.headers}))}async updateBucket(l,s){var i=this;return i.handleOperation(async()=>await Qc(i.fetch,`${i.url}/bucket/${l}`,{id:l,name:l,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:i.headers}))}async emptyBucket(l){var s=this;return s.handleOperation(async()=>await oa(s.fetch,`${s.url}/bucket/${l}/empty`,{},{headers:s.headers}))}async deleteBucket(l){var s=this;return s.handleOperation(async()=>await tu(s.fetch,`${s.url}/bucket/${l}`,{},{headers:s.headers}))}listBucketOptionsToQueryString(l){const s={};return l&&("limit"in l&&(s.limit=String(l.limit)),"offset"in l&&(s.offset=String(l.offset)),l.search&&(s.search=l.search),l.sortColumn&&(s.sortColumn=l.sortColumn),l.sortOrder&&(s.sortOrder=l.sortOrder)),Object.keys(s).length>0?"?"+new URLSearchParams(s).toString():""}},kb=class extends On{constructor(l,s={},i){const r=l.replace(/\/$/,""),d=Oe(Oe({},Ll),s);super(r,d,i,"storage")}async createBucket(l){var s=this;return s.handleOperation(async()=>await oa(s.fetch,`${s.url}/bucket`,{name:l},{headers:s.headers}))}async listBuckets(l){var s=this;return s.handleOperation(async()=>{const i=new URLSearchParams;(l==null?void 0:l.limit)!==void 0&&i.set("limit",l.limit.toString()),(l==null?void 0:l.offset)!==void 0&&i.set("offset",l.offset.toString()),l!=null&&l.sortColumn&&i.set("sortColumn",l.sortColumn),l!=null&&l.sortOrder&&i.set("sortOrder",l.sortOrder),l!=null&&l.search&&i.set("search",l.search);const r=i.toString(),d=r?`${s.url}/bucket?${r}`:`${s.url}/bucket`;return await Dl(s.fetch,d,{headers:s.headers})})}async deleteBucket(l){var s=this;return s.handleOperation(async()=>await tu(s.fetch,`${s.url}/bucket/${l}`,{},{headers:s.headers}))}from(l){var s=this;if(!pb(l))throw new fr("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const i=new hb({baseUrl:this.url,catalogName:l,auth:{type:"custom",getHeaders:async()=>s.headers},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(i,{get(d,f){const h=d[f];return typeof h!="function"?h:async(...g)=>{try{return{data:await h.apply(d,g),error:null}}catch(b){if(r)throw b;return{data:null,error:b}}}}})}},Cb=class extends On{constructor(l,s={},i){const r=l.replace(/\/$/,""),d=Oe(Oe({},Ll),{},{"Content-Type":"application/json"},s);super(r,d,i,"vectors")}async createIndex(l){var s=this;return s.handleOperation(async()=>await Xt.post(s.fetch,`${s.url}/CreateIndex`,l,{headers:s.headers})||{})}async getIndex(l,s){var i=this;return i.handleOperation(async()=>await Xt.post(i.fetch,`${i.url}/GetIndex`,{vectorBucketName:l,indexName:s},{headers:i.headers}))}async listIndexes(l){var s=this;return s.handleOperation(async()=>await Xt.post(s.fetch,`${s.url}/ListIndexes`,l,{headers:s.headers}))}async deleteIndex(l,s){var i=this;return i.handleOperation(async()=>await Xt.post(i.fetch,`${i.url}/DeleteIndex`,{vectorBucketName:l,indexName:s},{headers:i.headers})||{})}},Rb=class extends On{constructor(l,s={},i){const r=l.replace(/\/$/,""),d=Oe(Oe({},Ll),{},{"Content-Type":"application/json"},s);super(r,d,i,"vectors")}async putVectors(l){var s=this;if(l.vectors.length<1||l.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return s.handleOperation(async()=>await Xt.post(s.fetch,`${s.url}/PutVectors`,l,{headers:s.headers})||{})}async getVectors(l){var s=this;return s.handleOperation(async()=>await Xt.post(s.fetch,`${s.url}/GetVectors`,l,{headers:s.headers}))}async listVectors(l){var s=this;if(l.segmentCount!==void 0){if(l.segmentCount<1||l.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(l.segmentIndex!==void 0&&(l.segmentIndex<0||l.segmentIndex>=l.segmentCount))throw new Error(`segmentIndex must be between 0 and ${l.segmentCount-1}`)}return s.handleOperation(async()=>await Xt.post(s.fetch,`${s.url}/ListVectors`,l,{headers:s.headers}))}async queryVectors(l){var s=this;return s.handleOperation(async()=>await Xt.post(s.fetch,`${s.url}/QueryVectors`,l,{headers:s.headers}))}async deleteVectors(l){var s=this;if(l.keys.length<1||l.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return s.handleOperation(async()=>await Xt.post(s.fetch,`${s.url}/DeleteVectors`,l,{headers:s.headers})||{})}},Db=class extends On{constructor(l,s={},i){const r=l.replace(/\/$/,""),d=Oe(Oe({},Ll),{},{"Content-Type":"application/json"},s);super(r,d,i,"vectors")}async createBucket(l){var s=this;return s.handleOperation(async()=>await Xt.post(s.fetch,`${s.url}/CreateVectorBucket`,{vectorBucketName:l},{headers:s.headers})||{})}async getBucket(l){var s=this;return s.handleOperation(async()=>await Xt.post(s.fetch,`${s.url}/GetVectorBucket`,{vectorBucketName:l},{headers:s.headers}))}async listBuckets(l={}){var s=this;return s.handleOperation(async()=>await Xt.post(s.fetch,`${s.url}/ListVectorBuckets`,l,{headers:s.headers}))}async deleteBucket(l){var s=this;return s.handleOperation(async()=>await Xt.post(s.fetch,`${s.url}/DeleteVectorBucket`,{vectorBucketName:l},{headers:s.headers})||{})}},Ub=class extends Db{constructor(l,s={}){super(l,s.headers||{},s.fetch)}from(l){return new zb(this.url,this.headers,l,this.fetch)}async createBucket(l){var s=()=>super.createBucket,i=this;return s().call(i,l)}async getBucket(l){var s=()=>super.getBucket,i=this;return s().call(i,l)}async listBuckets(l={}){var s=()=>super.listBuckets,i=this;return s().call(i,l)}async deleteBucket(l){var s=()=>super.deleteBucket,i=this;return s().call(i,l)}},zb=class extends Cb{constructor(l,s,i,r){super(l,s,r),this.vectorBucketName=i}async createIndex(l){var s=()=>super.createIndex,i=this;return s().call(i,Oe(Oe({},l),{},{vectorBucketName:i.vectorBucketName}))}async listIndexes(l={}){var s=()=>super.listIndexes,i=this;return s().call(i,Oe(Oe({},l),{},{vectorBucketName:i.vectorBucketName}))}async getIndex(l){var s=()=>super.getIndex,i=this;return s().call(i,i.vectorBucketName,l)}async deleteIndex(l){var s=()=>super.deleteIndex,i=this;return s().call(i,i.vectorBucketName,l)}index(l){return new Mb(this.url,this.headers,this.vectorBucketName,l,this.fetch)}},Mb=class extends Rb{constructor(l,s,i,r,d){super(l,s,d),this.vectorBucketName=i,this.indexName=r}async putVectors(l){var s=()=>super.putVectors,i=this;return s().call(i,Oe(Oe({},l),{},{vectorBucketName:i.vectorBucketName,indexName:i.indexName}))}async getVectors(l){var s=()=>super.getVectors,i=this;return s().call(i,Oe(Oe({},l),{},{vectorBucketName:i.vectorBucketName,indexName:i.indexName}))}async listVectors(l={}){var s=()=>super.listVectors,i=this;return s().call(i,Oe(Oe({},l),{},{vectorBucketName:i.vectorBucketName,indexName:i.indexName}))}async queryVectors(l){var s=()=>super.queryVectors,i=this;return s().call(i,Oe(Oe({},l),{},{vectorBucketName:i.vectorBucketName,indexName:i.indexName}))}async deleteVectors(l){var s=()=>super.deleteVectors,i=this;return s().call(i,Oe(Oe({},l),{},{vectorBucketName:i.vectorBucketName,indexName:i.indexName}))}},Lb=class extends Ob{constructor(l,s={},i,r){super(l,s,i,r)}from(l){return new Tb(this.url,this.headers,l,this.fetch)}get vectors(){return new Ub(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new kb(this.url+"/iceberg",this.headers,this.fetch)}};const Ym="2.94.0",Nn=30*1e3,Jc=3,Mc=Jc*Nn,qb="http://localhost:9999",Bb="supabase.auth.token",Hb={"X-Client-Info":`gotrue-js/${Ym}`},Zc="X-Supabase-Api-Version",Km={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},$b=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Ib=600*1e3;class Ul extends Error{constructor(s,i,r){super(s),this.__isAuthError=!0,this.name="AuthError",this.status=i,this.code=r}}function Se(l){return typeof l=="object"&&l!==null&&"__isAuthError"in l}class Vb extends Ul{constructor(s,i,r){super(s,i,r),this.name="AuthApiError",this.status=i,this.code=r}}function Gb(l){return Se(l)&&l.name==="AuthApiError"}class Os extends Ul{constructor(s,i){super(s),this.name="AuthUnknownError",this.originalError=i}}class Da extends Ul{constructor(s,i,r,d){super(s,r,d),this.name=i,this.status=r}}class Kt extends Da{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Lc(l){return Se(l)&&l.name==="AuthSessionMissingError"}class vn extends Da{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class nr extends Da{constructor(s){super(s,"AuthInvalidCredentialsError",400,void 0)}}class lr extends Da{constructor(s,i=null){super(s,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=i}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Yb(l){return Se(l)&&l.name==="AuthImplicitGrantRedirectError"}class ym extends Da{constructor(s,i=null){super(s,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=i}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Kb extends Da{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class Pc extends Da{constructor(s,i){super(s,"AuthRetryableFetchError",i,void 0)}}function qc(l){return Se(l)&&l.name==="AuthRetryableFetchError"}class wm extends Da{constructor(s,i,r){super(s,"AuthWeakPasswordError",i,"weak_password"),this.reasons=r}}class Wc extends Da{constructor(s){super(s,"AuthInvalidJwtError",400,"invalid_jwt")}}const or="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),_m=` 	
\r=`.split(""),Xb=(()=>{const l=new Array(128);for(let s=0;s<l.length;s+=1)l[s]=-1;for(let s=0;s<_m.length;s+=1)l[_m[s].charCodeAt(0)]=-2;for(let s=0;s<or.length;s+=1)l[or[s].charCodeAt(0)]=s;return l})();function Sm(l,s,i){if(l!==null)for(s.queue=s.queue<<8|l,s.queuedBits+=8;s.queuedBits>=6;){const r=s.queue>>s.queuedBits-6&63;i(or[r]),s.queuedBits-=6}else if(s.queuedBits>0)for(s.queue=s.queue<<6-s.queuedBits,s.queuedBits=6;s.queuedBits>=6;){const r=s.queue>>s.queuedBits-6&63;i(or[r]),s.queuedBits-=6}}function Xm(l,s,i){const r=Xb[l];if(r>-1)for(s.queue=s.queue<<6|r,s.queuedBits+=6;s.queuedBits>=8;)i(s.queue>>s.queuedBits-8&255),s.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(l)}"`)}}function jm(l){const s=[],i=h=>{s.push(String.fromCodePoint(h))},r={utf8seq:0,codepoint:0},d={queue:0,queuedBits:0},f=h=>{Zb(h,r,i)};for(let h=0;h<l.length;h+=1)Xm(l.charCodeAt(h),d,f);return s.join("")}function Qb(l,s){if(l<=127){s(l);return}else if(l<=2047){s(192|l>>6),s(128|l&63);return}else if(l<=65535){s(224|l>>12),s(128|l>>6&63),s(128|l&63);return}else if(l<=1114111){s(240|l>>18),s(128|l>>12&63),s(128|l>>6&63),s(128|l&63);return}throw new Error(`Unrecognized Unicode codepoint: ${l.toString(16)}`)}function Jb(l,s){for(let i=0;i<l.length;i+=1){let r=l.charCodeAt(i);if(r>55295&&r<=56319){const d=(r-55296)*1024&65535;r=(l.charCodeAt(i+1)-56320&65535|d)+65536,i+=1}Qb(r,s)}}function Zb(l,s,i){if(s.utf8seq===0){if(l<=127){i(l);return}for(let r=1;r<6;r+=1)if((l>>7-r&1)===0){s.utf8seq=r;break}if(s.utf8seq===2)s.codepoint=l&31;else if(s.utf8seq===3)s.codepoint=l&15;else if(s.utf8seq===4)s.codepoint=l&7;else throw new Error("Invalid UTF-8 sequence");s.utf8seq-=1}else if(s.utf8seq>0){if(l<=127)throw new Error("Invalid UTF-8 sequence");s.codepoint=s.codepoint<<6|l&63,s.utf8seq-=1,s.utf8seq===0&&i(s.codepoint)}}function An(l){const s=[],i={queue:0,queuedBits:0},r=d=>{s.push(d)};for(let d=0;d<l.length;d+=1)Xm(l.charCodeAt(d),i,r);return new Uint8Array(s)}function Pb(l){const s=[];return Jb(l,i=>s.push(i)),new Uint8Array(s)}function ks(l){const s=[],i={queue:0,queuedBits:0},r=d=>{s.push(d)};return l.forEach(d=>Sm(d,i,r)),Sm(null,i,r),s.join("")}function Wb(l){return Math.round(Date.now()/1e3)+l}function Fb(){return Symbol("auth-callback")}const Nt=()=>typeof window<"u"&&typeof document<"u",Ns={tested:!1,writable:!1},Qm=()=>{if(!Nt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ns.tested)return Ns.writable;const l=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(l,l),globalThis.localStorage.removeItem(l),Ns.tested=!0,Ns.writable=!0}catch{Ns.tested=!0,Ns.writable=!1}return Ns.writable};function ev(l){const s={},i=new URL(l);if(i.hash&&i.hash[0]==="#")try{new URLSearchParams(i.hash.substring(1)).forEach((d,f)=>{s[f]=d})}catch{}return i.searchParams.forEach((r,d)=>{s[d]=r}),s}const Jm=l=>l?(...s)=>l(...s):(...s)=>fetch(...s),tv=l=>typeof l=="object"&&l!==null&&"status"in l&&"ok"in l&&"json"in l&&typeof l.json=="function",En=async(l,s,i)=>{await l.setItem(s,JSON.stringify(i))},Es=async(l,s)=>{const i=await l.getItem(s);if(!i)return null;try{return JSON.parse(i)}catch{return i}},jt=async(l,s)=>{await l.removeItem(s)};class mr{constructor(){this.promise=new mr.promiseConstructor((s,i)=>{this.resolve=s,this.reject=i})}}mr.promiseConstructor=Promise;function ir(l){const s=l.split(".");if(s.length!==3)throw new Wc("Invalid JWT structure");for(let r=0;r<s.length;r++)if(!$b.test(s[r]))throw new Wc("JWT not in base64url format");return{header:JSON.parse(jm(s[0])),payload:JSON.parse(jm(s[1])),signature:An(s[2]),raw:{header:s[0],payload:s[1]}}}async function av(l){return await new Promise(s=>{setTimeout(()=>s(null),l)})}function sv(l,s){return new Promise((r,d)=>{(async()=>{for(let f=0;f<1/0;f++)try{const h=await l(f);if(!s(f,null,h)){r(h);return}}catch(h){if(!s(f,h)){d(h);return}}})()})}function nv(l){return("0"+l.toString(16)).substr(-2)}function lv(){const s=new Uint32Array(56);if(typeof crypto>"u"){const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=i.length;let d="";for(let f=0;f<56;f++)d+=i.charAt(Math.floor(Math.random()*r));return d}return crypto.getRandomValues(s),Array.from(s,nv).join("")}async function iv(l){const i=new TextEncoder().encode(l),r=await crypto.subtle.digest("SHA-256",i),d=new Uint8Array(r);return Array.from(d).map(f=>String.fromCharCode(f)).join("")}async function rv(l){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),l;const i=await iv(l);return btoa(i).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function xn(l,s,i=!1){const r=lv();let d=r;i&&(d+="/PASSWORD_RECOVERY"),await En(l,`${s}-code-verifier`,d);const f=await rv(r);return[f,r===f?"plain":"s256"]}const ov=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function cv(l){const s=l.headers.get(Zc);if(!s||!s.match(ov))return null;try{return new Date(`${s}T00:00:00.0Z`)}catch{return null}}function uv(l){if(!l)throw new Error("Missing exp claim");const s=Math.floor(Date.now()/1e3);if(l<=s)throw new Error("JWT has expired")}function dv(l){switch(l){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const fv=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function yn(l){if(!fv.test(l))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Bc(){const l={};return new Proxy(l,{get:(s,i)=>{if(i==="__isUserNotAvailableProxy")return!0;if(typeof i=="symbol"){const r=i.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${i}" property of the session object is not supported. Please use getUser() instead.`)},set:(s,i)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${i}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(s,i)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${i}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function hv(l,s){return new Proxy(l,{get:(i,r,d)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const f=r.toString();if(f==="Symbol(Symbol.toPrimitive)"||f==="Symbol(Symbol.toStringTag)"||f==="Symbol(util.inspect.custom)"||f==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(i,r,d)}return!s.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),s.value=!0),Reflect.get(i,r,d)}})}function Nm(l){return JSON.parse(JSON.stringify(l))}const Ts=l=>l.msg||l.message||l.error_description||l.error||JSON.stringify(l),mv=[502,503,504];async function Em(l){var s;if(!tv(l))throw new Pc(Ts(l),0);if(mv.includes(l.status))throw new Pc(Ts(l),l.status);let i;try{i=await l.json()}catch(f){throw new Os(Ts(f),f)}let r;const d=cv(l);if(d&&d.getTime()>=Km["2024-01-01"].timestamp&&typeof i=="object"&&i&&typeof i.code=="string"?r=i.code:typeof i=="object"&&i&&typeof i.error_code=="string"&&(r=i.error_code),r){if(r==="weak_password")throw new wm(Ts(i),l.status,((s=i.weak_password)===null||s===void 0?void 0:s.reasons)||[]);if(r==="session_not_found")throw new Kt}else if(typeof i=="object"&&i&&typeof i.weak_password=="object"&&i.weak_password&&Array.isArray(i.weak_password.reasons)&&i.weak_password.reasons.length&&i.weak_password.reasons.reduce((f,h)=>f&&typeof h=="string",!0))throw new wm(Ts(i),l.status,i.weak_password.reasons);throw new Vb(Ts(i),l.status||500,r)}const gv=(l,s,i,r)=>{const d={method:l,headers:(s==null?void 0:s.headers)||{}};return l==="GET"?d:(d.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},s==null?void 0:s.headers),d.body=JSON.stringify(r),Object.assign(Object.assign({},d),i))};async function Ae(l,s,i,r){var d;const f=Object.assign({},r==null?void 0:r.headers);f[Zc]||(f[Zc]=Km["2024-01-01"].name),r!=null&&r.jwt&&(f.Authorization=`Bearer ${r.jwt}`);const h=(d=r==null?void 0:r.query)!==null&&d!==void 0?d:{};r!=null&&r.redirectTo&&(h.redirect_to=r.redirectTo);const g=Object.keys(h).length?"?"+new URLSearchParams(h).toString():"",b=await pv(l,s,i+g,{headers:f,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(b):{data:Object.assign({},b),error:null}}async function pv(l,s,i,r,d,f){const h=gv(s,r,d,f);let g;try{g=await l(i,Object.assign({},h))}catch(b){throw console.error(b),new Pc(Ts(b),0)}if(g.ok||await Em(g),r!=null&&r.noResolveJson)return g;try{return await g.json()}catch(b){await Em(b)}}function ra(l){var s;let i=null;xv(l)&&(i=Object.assign({},l),l.expires_at||(i.expires_at=Wb(l.expires_in)));const r=(s=l.user)!==null&&s!==void 0?s:l;return{data:{session:i,user:r},error:null}}function Tm(l){const s=ra(l);return!s.error&&l.weak_password&&typeof l.weak_password=="object"&&Array.isArray(l.weak_password.reasons)&&l.weak_password.reasons.length&&l.weak_password.message&&typeof l.weak_password.message=="string"&&l.weak_password.reasons.reduce((i,r)=>i&&typeof r=="string",!0)&&(s.data.weak_password=l.weak_password),s}function is(l){var s;return{data:{user:(s=l.user)!==null&&s!==void 0?s:l},error:null}}function bv(l){return{data:l,error:null}}function vv(l){const{action_link:s,email_otp:i,hashed_token:r,redirect_to:d,verification_type:f}=l,h=dr(l,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),g={action_link:s,email_otp:i,hashed_token:r,redirect_to:d,verification_type:f},b=Object.assign({},h);return{data:{properties:g,user:b},error:null}}function Am(l){return l}function xv(l){return l.access_token&&l.refresh_token&&l.expires_in}const Hc=["global","local","others"];class yv{constructor({url:s="",headers:i={},fetch:r}){this.url=s,this.headers=i,this.fetch=Jm(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(s,i=Hc[0]){if(Hc.indexOf(i)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Hc.join(", ")}`);try{return await Ae(this.fetch,"POST",`${this.url}/logout?scope=${i}`,{headers:this.headers,jwt:s,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Se(r))return{data:null,error:r};throw r}}async inviteUserByEmail(s,i={}){try{return await Ae(this.fetch,"POST",`${this.url}/invite`,{body:{email:s,data:i.data},headers:this.headers,redirectTo:i.redirectTo,xform:is})}catch(r){if(Se(r))return{data:{user:null},error:r};throw r}}async generateLink(s){try{const{options:i}=s,r=dr(s,["options"]),d=Object.assign(Object.assign({},r),i);return"newEmail"in r&&(d.new_email=r==null?void 0:r.newEmail,delete d.newEmail),await Ae(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:d,headers:this.headers,xform:vv,redirectTo:i==null?void 0:i.redirectTo})}catch(i){if(Se(i))return{data:{properties:null,user:null},error:i};throw i}}async createUser(s){try{return await Ae(this.fetch,"POST",`${this.url}/admin/users`,{body:s,headers:this.headers,xform:is})}catch(i){if(Se(i))return{data:{user:null},error:i};throw i}}async listUsers(s){var i,r,d,f,h,g,b;try{const p={nextPage:null,lastPage:0,total:0},y=await Ae(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(i=s==null?void 0:s.page)===null||i===void 0?void 0:i.toString())!==null&&r!==void 0?r:"",per_page:(f=(d=s==null?void 0:s.perPage)===null||d===void 0?void 0:d.toString())!==null&&f!==void 0?f:""},xform:Am});if(y.error)throw y.error;const S=await y.json(),j=(h=y.headers.get("x-total-count"))!==null&&h!==void 0?h:0,T=(b=(g=y.headers.get("link"))===null||g===void 0?void 0:g.split(","))!==null&&b!==void 0?b:[];return T.length>0&&(T.forEach(C=>{const q=parseInt(C.split(";")[0].split("=")[1].substring(0,1)),L=JSON.parse(C.split(";")[1].split("=")[1]);p[`${L}Page`]=q}),p.total=parseInt(j)),{data:Object.assign(Object.assign({},S),p),error:null}}catch(p){if(Se(p))return{data:{users:[]},error:p};throw p}}async getUserById(s){yn(s);try{return await Ae(this.fetch,"GET",`${this.url}/admin/users/${s}`,{headers:this.headers,xform:is})}catch(i){if(Se(i))return{data:{user:null},error:i};throw i}}async updateUserById(s,i){yn(s);try{return await Ae(this.fetch,"PUT",`${this.url}/admin/users/${s}`,{body:i,headers:this.headers,xform:is})}catch(r){if(Se(r))return{data:{user:null},error:r};throw r}}async deleteUser(s,i=!1){yn(s);try{return await Ae(this.fetch,"DELETE",`${this.url}/admin/users/${s}`,{headers:this.headers,body:{should_soft_delete:i},xform:is})}catch(r){if(Se(r))return{data:{user:null},error:r};throw r}}async _listFactors(s){yn(s.userId);try{const{data:i,error:r}=await Ae(this.fetch,"GET",`${this.url}/admin/users/${s.userId}/factors`,{headers:this.headers,xform:d=>({data:{factors:d},error:null})});return{data:i,error:r}}catch(i){if(Se(i))return{data:null,error:i};throw i}}async _deleteFactor(s){yn(s.userId),yn(s.id);try{return{data:await Ae(this.fetch,"DELETE",`${this.url}/admin/users/${s.userId}/factors/${s.id}`,{headers:this.headers}),error:null}}catch(i){if(Se(i))return{data:null,error:i};throw i}}async _listOAuthClients(s){var i,r,d,f,h,g,b;try{const p={nextPage:null,lastPage:0,total:0},y=await Ae(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(i=s==null?void 0:s.page)===null||i===void 0?void 0:i.toString())!==null&&r!==void 0?r:"",per_page:(f=(d=s==null?void 0:s.perPage)===null||d===void 0?void 0:d.toString())!==null&&f!==void 0?f:""},xform:Am});if(y.error)throw y.error;const S=await y.json(),j=(h=y.headers.get("x-total-count"))!==null&&h!==void 0?h:0,T=(b=(g=y.headers.get("link"))===null||g===void 0?void 0:g.split(","))!==null&&b!==void 0?b:[];return T.length>0&&(T.forEach(C=>{const q=parseInt(C.split(";")[0].split("=")[1].substring(0,1)),L=JSON.parse(C.split(";")[1].split("=")[1]);p[`${L}Page`]=q}),p.total=parseInt(j)),{data:Object.assign(Object.assign({},S),p),error:null}}catch(p){if(Se(p))return{data:{clients:[]},error:p};throw p}}async _createOAuthClient(s){try{return await Ae(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:s,headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(Se(i))return{data:null,error:i};throw i}}async _getOAuthClient(s){try{return await Ae(this.fetch,"GET",`${this.url}/admin/oauth/clients/${s}`,{headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(Se(i))return{data:null,error:i};throw i}}async _updateOAuthClient(s,i){try{return await Ae(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${s}`,{body:i,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Se(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(s){try{return await Ae(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${s}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(i){if(Se(i))return{data:null,error:i};throw i}}async _regenerateOAuthClientSecret(s){try{return await Ae(this.fetch,"POST",`${this.url}/admin/oauth/clients/${s}/regenerate_secret`,{headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(Se(i))return{data:null,error:i};throw i}}}function Om(l={}){return{getItem:s=>l[s]||null,setItem:(s,i)=>{l[s]=i},removeItem:s=>{delete l[s]}}}const wn={debug:!!(globalThis&&Qm()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Zm extends Error{constructor(s){super(s),this.isAcquireTimeout=!0}}class wv extends Zm{}async function _v(l,s,i){wn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",l,s);const r=new globalThis.AbortController;return s>0&&setTimeout(()=>{r.abort(),wn.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",l)},s),await Promise.resolve().then(()=>globalThis.navigator.locks.request(l,s===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async d=>{if(d){wn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",l,d.name);try{return await i()}finally{wn.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",l,d.name)}}else{if(s===0)throw wn.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",l),new wv(`Acquiring an exclusive Navigator LockManager lock "${l}" immediately failed`);if(wn.debug)try{const f=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(f,null,"  "))}catch(f){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",f)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await i()}}))}function Sv(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Pm(l){if(!/^0x[a-fA-F0-9]{40}$/.test(l))throw new Error(`@supabase/auth-js: Address "${l}" is invalid.`);return l.toLowerCase()}function jv(l){return parseInt(l,16)}function Nv(l){const s=new TextEncoder().encode(l);return"0x"+Array.from(s,r=>r.toString(16).padStart(2,"0")).join("")}function Ev(l){var s;const{chainId:i,domain:r,expirationTime:d,issuedAt:f=new Date,nonce:h,notBefore:g,requestId:b,resources:p,scheme:y,uri:S,version:j}=l;{if(!Number.isInteger(i))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${i}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(h&&h.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${h}`);if(!S)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(j!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${j}`);if(!((s=l.statement)===null||s===void 0)&&s.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${l.statement}`)}const T=Pm(l.address),C=y?`${y}://${r}`:r,q=l.statement?`${l.statement}
`:"",L=`${C} wants you to sign in with your Ethereum account:
${T}

${q}`;let W=`URI: ${S}
Version: ${j}
Chain ID: ${i}${h?`
Nonce: ${h}`:""}
Issued At: ${f.toISOString()}`;if(d&&(W+=`
Expiration Time: ${d.toISOString()}`),g&&(W+=`
Not Before: ${g.toISOString()}`),b&&(W+=`
Request ID: ${b}`),p){let Z=`
Resources:`;for(const k of p){if(!k||typeof k!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${k}`);Z+=`
- ${k}`}W+=Z}return`${L}
${W}`}class ht extends Error{constructor({message:s,code:i,cause:r,name:d}){var f;super(s,{cause:r}),this.__isWebAuthnError=!0,this.name=(f=d??(r instanceof Error?r.name:void 0))!==null&&f!==void 0?f:"Unknown Error",this.code=i}}class cr extends ht{constructor(s,i){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i,message:s}),this.name="WebAuthnUnknownError",this.originalError=i}}function Tv({error:l,options:s}){var i,r,d;const{publicKey:f}=s;if(!f)throw Error("options was missing required publicKey property");if(l.name==="AbortError"){if(s.signal instanceof AbortSignal)return new ht({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:l})}else if(l.name==="ConstraintError"){if(((i=f.authenticatorSelection)===null||i===void 0?void 0:i.requireResidentKey)===!0)return new ht({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:l});if(s.mediation==="conditional"&&((r=f.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new ht({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:l});if(((d=f.authenticatorSelection)===null||d===void 0?void 0:d.userVerification)==="required")return new ht({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:l})}else{if(l.name==="InvalidStateError")return new ht({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:l});if(l.name==="NotAllowedError")return new ht({message:l.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:l});if(l.name==="NotSupportedError")return f.pubKeyCredParams.filter(g=>g.type==="public-key").length===0?new ht({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:l}):new ht({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:l});if(l.name==="SecurityError"){const h=window.location.hostname;if(Wm(h)){if(f.rp.id!==h)return new ht({message:`The RP ID "${f.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:l})}else return new ht({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:l})}else if(l.name==="TypeError"){if(f.user.id.byteLength<1||f.user.id.byteLength>64)return new ht({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:l})}else if(l.name==="UnknownError")return new ht({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:l})}return new ht({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:l})}function Av({error:l,options:s}){const{publicKey:i}=s;if(!i)throw Error("options was missing required publicKey property");if(l.name==="AbortError"){if(s.signal instanceof AbortSignal)return new ht({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:l})}else{if(l.name==="NotAllowedError")return new ht({message:l.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:l});if(l.name==="SecurityError"){const r=window.location.hostname;if(Wm(r)){if(i.rpId!==r)return new ht({message:`The RP ID "${i.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:l})}else return new ht({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:l})}else if(l.name==="UnknownError")return new ht({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:l})}return new ht({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:l})}class Ov{createNewAbortSignal(){if(this.controller){const i=new Error("Cancelling existing WebAuthn API call for new one");i.name="AbortError",this.controller.abort(i)}const s=new AbortController;return this.controller=s,s.signal}cancelCeremony(){if(this.controller){const s=new Error("Manually cancelling existing WebAuthn API call");s.name="AbortError",this.controller.abort(s),this.controller=void 0}}}const kv=new Ov;function Cv(l){if(!l)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(l);const{challenge:s,user:i,excludeCredentials:r}=l,d=dr(l,["challenge","user","excludeCredentials"]),f=An(s).buffer,h=Object.assign(Object.assign({},i),{id:An(i.id).buffer}),g=Object.assign(Object.assign({},d),{challenge:f,user:h});if(r&&r.length>0){g.excludeCredentials=new Array(r.length);for(let b=0;b<r.length;b++){const p=r[b];g.excludeCredentials[b]=Object.assign(Object.assign({},p),{id:An(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return g}function Rv(l){if(!l)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(l);const{challenge:s,allowCredentials:i}=l,r=dr(l,["challenge","allowCredentials"]),d=An(s).buffer,f=Object.assign(Object.assign({},r),{challenge:d});if(i&&i.length>0){f.allowCredentials=new Array(i.length);for(let h=0;h<i.length;h++){const g=i[h];f.allowCredentials[h]=Object.assign(Object.assign({},g),{id:An(g.id).buffer,type:g.type||"public-key",transports:g.transports})}}return f}function Dv(l){var s;if("toJSON"in l&&typeof l.toJSON=="function")return l.toJSON();const i=l;return{id:l.id,rawId:l.id,response:{attestationObject:ks(new Uint8Array(l.response.attestationObject)),clientDataJSON:ks(new Uint8Array(l.response.clientDataJSON))},type:"public-key",clientExtensionResults:l.getClientExtensionResults(),authenticatorAttachment:(s=i.authenticatorAttachment)!==null&&s!==void 0?s:void 0}}function Uv(l){var s;if("toJSON"in l&&typeof l.toJSON=="function")return l.toJSON();const i=l,r=l.getClientExtensionResults(),d=l.response;return{id:l.id,rawId:l.id,response:{authenticatorData:ks(new Uint8Array(d.authenticatorData)),clientDataJSON:ks(new Uint8Array(d.clientDataJSON)),signature:ks(new Uint8Array(d.signature)),userHandle:d.userHandle?ks(new Uint8Array(d.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(s=i.authenticatorAttachment)!==null&&s!==void 0?s:void 0}}function Wm(l){return l==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(l)}function km(){var l,s;return!!(Nt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((l=navigator==null?void 0:navigator.credentials)===null||l===void 0?void 0:l.create)=="function"&&typeof((s=navigator==null?void 0:navigator.credentials)===null||s===void 0?void 0:s.get)=="function")}async function zv(l){try{const s=await navigator.credentials.create(l);return s?s instanceof PublicKeyCredential?{data:s,error:null}:{data:null,error:new cr("Browser returned unexpected credential type",s)}:{data:null,error:new cr("Empty credential response",s)}}catch(s){return{data:null,error:Tv({error:s,options:l})}}}async function Mv(l){try{const s=await navigator.credentials.get(l);return s?s instanceof PublicKeyCredential?{data:s,error:null}:{data:null,error:new cr("Browser returned unexpected credential type",s)}:{data:null,error:new cr("Empty credential response",s)}}catch(s){return{data:null,error:Av({error:s,options:l})}}}const Lv={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},qv={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function ur(...l){const s=d=>d!==null&&typeof d=="object"&&!Array.isArray(d),i=d=>d instanceof ArrayBuffer||ArrayBuffer.isView(d),r={};for(const d of l)if(d)for(const f in d){const h=d[f];if(h!==void 0)if(Array.isArray(h))r[f]=h;else if(i(h))r[f]=h;else if(s(h)){const g=r[f];s(g)?r[f]=ur(g,h):r[f]=ur(h)}else r[f]=h}return r}function Bv(l,s){return ur(Lv,l,s||{})}function Hv(l,s){return ur(qv,l,s||{})}class $v{constructor(s){this.client=s,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(s){return this.client.mfa.enroll(Object.assign(Object.assign({},s),{factorType:"webauthn"}))}async _challenge({factorId:s,webauthn:i,friendlyName:r,signal:d},f){var h;try{const{data:g,error:b}=await this.client.mfa.challenge({factorId:s,webauthn:i});if(!g)return{data:null,error:b};const p=d??kv.createNewAbortSignal();if(g.webauthn.type==="create"){const{user:y}=g.webauthn.credential_options.publicKey;if(!y.name){const S=r;if(S)y.name=`${y.id}:${S}`;else{const T=(await this.client.getUser()).data.user,C=((h=T==null?void 0:T.user_metadata)===null||h===void 0?void 0:h.name)||(T==null?void 0:T.email)||(T==null?void 0:T.id)||"User";y.name=`${y.id}:${C}`}}y.displayName||(y.displayName=y.name)}switch(g.webauthn.type){case"create":{const y=Bv(g.webauthn.credential_options.publicKey,f==null?void 0:f.create),{data:S,error:j}=await zv({publicKey:y,signal:p});return S?{data:{factorId:s,challengeId:g.id,webauthn:{type:g.webauthn.type,credential_response:S}},error:null}:{data:null,error:j}}case"request":{const y=Hv(g.webauthn.credential_options.publicKey,f==null?void 0:f.request),{data:S,error:j}=await Mv(Object.assign(Object.assign({},g.webauthn.credential_options),{publicKey:y,signal:p}));return S?{data:{factorId:s,challengeId:g.id,webauthn:{type:g.webauthn.type,credential_response:S}},error:null}:{data:null,error:j}}}}catch(g){return Se(g)?{data:null,error:g}:{data:null,error:new Os("Unexpected error in challenge",g)}}}async _verify({challengeId:s,factorId:i,webauthn:r}){return this.client.mfa.verify({factorId:i,challengeId:s,webauthn:r})}async _authenticate({factorId:s,webauthn:{rpId:i=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:d}={}},f){if(!i)return{data:null,error:new Ul("rpId is required for WebAuthn authentication")};try{if(!km())return{data:null,error:new Os("Browser does not support WebAuthn",null)};const{data:h,error:g}=await this.challenge({factorId:s,webauthn:{rpId:i,rpOrigins:r},signal:d},{request:f});if(!h)return{data:null,error:g};const{webauthn:b}=h;return this._verify({factorId:s,challengeId:h.challengeId,webauthn:{type:b.type,rpId:i,rpOrigins:r,credential_response:b.credential_response}})}catch(h){return Se(h)?{data:null,error:h}:{data:null,error:new Os("Unexpected error in authenticate",h)}}}async _register({friendlyName:s,webauthn:{rpId:i=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:d}={}},f){if(!i)return{data:null,error:new Ul("rpId is required for WebAuthn registration")};try{if(!km())return{data:null,error:new Os("Browser does not support WebAuthn",null)};const{data:h,error:g}=await this._enroll({friendlyName:s});if(!h)return await this.client.mfa.listFactors().then(y=>{var S;return(S=y.data)===null||S===void 0?void 0:S.all.find(j=>j.factor_type==="webauthn"&&j.friendly_name===s&&j.status!=="unverified")}).then(y=>y?this.client.mfa.unenroll({factorId:y==null?void 0:y.id}):void 0),{data:null,error:g};const{data:b,error:p}=await this._challenge({factorId:h.id,friendlyName:h.friendly_name,webauthn:{rpId:i,rpOrigins:r},signal:d},{create:f});return b?this._verify({factorId:h.id,challengeId:b.challengeId,webauthn:{rpId:i,rpOrigins:r,type:b.webauthn.type,credential_response:b.webauthn.credential_response}}):{data:null,error:p}}catch(h){return Se(h)?{data:null,error:h}:{data:null,error:new Os("Unexpected error in register",h)}}}}Sv();const Iv={url:qb,storageKey:Bb,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Hb,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function Cm(l,s,i){return await i()}const _n={};class zl{get jwks(){var s,i;return(i=(s=_n[this.storageKey])===null||s===void 0?void 0:s.jwks)!==null&&i!==void 0?i:{keys:[]}}set jwks(s){_n[this.storageKey]=Object.assign(Object.assign({},_n[this.storageKey]),{jwks:s})}get jwks_cached_at(){var s,i;return(i=(s=_n[this.storageKey])===null||s===void 0?void 0:s.cachedAt)!==null&&i!==void 0?i:Number.MIN_SAFE_INTEGER}set jwks_cached_at(s){_n[this.storageKey]=Object.assign(Object.assign({},_n[this.storageKey]),{cachedAt:s})}constructor(s){var i,r,d;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const f=Object.assign(Object.assign({},Iv),s);if(this.storageKey=f.storageKey,this.instanceID=(i=zl.nextInstanceID[this.storageKey])!==null&&i!==void 0?i:0,zl.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!f.debug,typeof f.debug=="function"&&(this.logger=f.debug),this.instanceID>0&&Nt()){const h=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(h),this.logDebugMessages&&console.trace(h)}if(this.persistSession=f.persistSession,this.autoRefreshToken=f.autoRefreshToken,this.admin=new yv({url:f.url,headers:f.headers,fetch:f.fetch}),this.url=f.url,this.headers=f.headers,this.fetch=Jm(f.fetch),this.lock=f.lock||Cm,this.detectSessionInUrl=f.detectSessionInUrl,this.flowType=f.flowType,this.hasCustomAuthorizationHeader=f.hasCustomAuthorizationHeader,this.throwOnError=f.throwOnError,this.lockAcquireTimeout=f.lockAcquireTimeout,f.lock?this.lock=f.lock:this.persistSession&&Nt()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=_v:this.lock=Cm,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new $v(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(f.storage?this.storage=f.storage:Qm()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Om(this.memoryStorage)),f.userStorage&&(this.userStorage=f.userStorage)):(this.memoryStorage={},this.storage=Om(this.memoryStorage)),Nt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(h){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",h)}(d=this.broadcastChannel)===null||d===void 0||d.addEventListener("message",async h=>{this._debug("received broadcast notification from other tab or client",h);try{await this._notifyAllSubscribers(h.data.event,h.data.session,!1)}catch(g){this._debug("#broadcastChannel","error",g)}})}this.initialize().catch(h=>{this._debug("#initialize()","error",h)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(s){if(this.throwOnError&&s&&s.error)throw s.error;return s}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Ym}) ${new Date().toISOString()}`}_debug(...s){return this.logDebugMessages&&this.logger(this._logPrefix(),...s),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var s;try{let i={},r="none";if(Nt()&&(i=ev(window.location.href),this._isImplicitGrantCallback(i)?r="implicit":await this._isPKCECallback(i)&&(r="pkce")),Nt()&&this.detectSessionInUrl&&r!=="none"){const{data:d,error:f}=await this._getSessionFromURL(i,r);if(f){if(this._debug("#_initialize()","error detecting session from URL",f),Yb(f)){const b=(s=f.details)===null||s===void 0?void 0:s.code;if(b==="identity_already_exists"||b==="identity_not_found"||b==="single_identity_not_deletable")return{error:f}}return{error:f}}const{session:h,redirectType:g}=d;return this._debug("#_initialize()","detected session in URL",h,"redirect type",g),await this._saveSession(h),setTimeout(async()=>{g==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",h):await this._notifyAllSubscribers("SIGNED_IN",h)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(i){return Se(i)?this._returnResult({error:i}):this._returnResult({error:new Os("Unexpected error during initialization",i)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(s){var i,r,d;try{const f=await Ae(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(i=s==null?void 0:s.options)===null||i===void 0?void 0:i.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(d=s==null?void 0:s.options)===null||d===void 0?void 0:d.captchaToken}},xform:ra}),{data:h,error:g}=f;if(g||!h)return this._returnResult({data:{user:null,session:null},error:g});const b=h.session,p=h.user;return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",b)),this._returnResult({data:{user:p,session:b},error:null})}catch(f){if(Se(f))return this._returnResult({data:{user:null,session:null},error:f});throw f}}async signUp(s){var i,r,d;try{let f;if("email"in s){const{email:y,password:S,options:j}=s;let T=null,C=null;this.flowType==="pkce"&&([T,C]=await xn(this.storage,this.storageKey)),f=await Ae(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:j==null?void 0:j.emailRedirectTo,body:{email:y,password:S,data:(i=j==null?void 0:j.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:j==null?void 0:j.captchaToken},code_challenge:T,code_challenge_method:C},xform:ra})}else if("phone"in s){const{phone:y,password:S,options:j}=s;f=await Ae(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:y,password:S,data:(r=j==null?void 0:j.data)!==null&&r!==void 0?r:{},channel:(d=j==null?void 0:j.channel)!==null&&d!==void 0?d:"sms",gotrue_meta_security:{captcha_token:j==null?void 0:j.captchaToken}},xform:ra})}else throw new nr("You must provide either an email or phone number and a password");const{data:h,error:g}=f;if(g||!h)return await jt(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:g});const b=h.session,p=h.user;return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",b)),this._returnResult({data:{user:p,session:b},error:null})}catch(f){if(await jt(this.storage,`${this.storageKey}-code-verifier`),Se(f))return this._returnResult({data:{user:null,session:null},error:f});throw f}}async signInWithPassword(s){try{let i;if("email"in s){const{email:f,password:h,options:g}=s;i=await Ae(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:f,password:h,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken}},xform:Tm})}else if("phone"in s){const{phone:f,password:h,options:g}=s;i=await Ae(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:f,password:h,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken}},xform:Tm})}else throw new nr("You must provide either an email or phone number and a password");const{data:r,error:d}=i;if(d)return this._returnResult({data:{user:null,session:null},error:d});if(!r||!r.session||!r.user){const f=new vn;return this._returnResult({data:{user:null,session:null},error:f})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:d})}catch(i){if(Se(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithOAuth(s){var i,r,d,f;return await this._handleProviderSignIn(s.provider,{redirectTo:(i=s.options)===null||i===void 0?void 0:i.redirectTo,scopes:(r=s.options)===null||r===void 0?void 0:r.scopes,queryParams:(d=s.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:(f=s.options)===null||f===void 0?void 0:f.skipBrowserRedirect})}async exchangeCodeForSession(s){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(s))}async signInWithWeb3(s){const{chain:i}=s;switch(i){case"ethereum":return await this.signInWithEthereum(s);case"solana":return await this.signInWithSolana(s);default:throw new Error(`@supabase/auth-js: Unsupported chain "${i}"`)}}async signInWithEthereum(s){var i,r,d,f,h,g,b,p,y,S,j;let T,C;if("message"in s)T=s.message,C=s.signature;else{const{chain:q,wallet:L,statement:W,options:Z}=s;let k;if(Nt())if(typeof L=="object")k=L;else{const be=window;if("ethereum"in be&&typeof be.ethereum=="object"&&"request"in be.ethereum&&typeof be.ethereum.request=="function")k=be.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof L!="object"||!(Z!=null&&Z.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");k=L}const te=new URL((i=Z==null?void 0:Z.url)!==null&&i!==void 0?i:window.location.href),he=await k.request({method:"eth_requestAccounts"}).then(be=>be).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!he||he.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const fe=Pm(he[0]);let ae=(r=Z==null?void 0:Z.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!ae){const be=await k.request({method:"eth_chainId"});ae=jv(be)}const we={domain:te.host,address:fe,statement:W,uri:te.href,version:"1",chainId:ae,nonce:(d=Z==null?void 0:Z.signInWithEthereum)===null||d===void 0?void 0:d.nonce,issuedAt:(h=(f=Z==null?void 0:Z.signInWithEthereum)===null||f===void 0?void 0:f.issuedAt)!==null&&h!==void 0?h:new Date,expirationTime:(g=Z==null?void 0:Z.signInWithEthereum)===null||g===void 0?void 0:g.expirationTime,notBefore:(b=Z==null?void 0:Z.signInWithEthereum)===null||b===void 0?void 0:b.notBefore,requestId:(p=Z==null?void 0:Z.signInWithEthereum)===null||p===void 0?void 0:p.requestId,resources:(y=Z==null?void 0:Z.signInWithEthereum)===null||y===void 0?void 0:y.resources};T=Ev(we),C=await k.request({method:"personal_sign",params:[Nv(T),fe]})}try{const{data:q,error:L}=await Ae(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:T,signature:C},!((S=s.options)===null||S===void 0)&&S.captchaToken?{gotrue_meta_security:{captcha_token:(j=s.options)===null||j===void 0?void 0:j.captchaToken}}:null),xform:ra});if(L)throw L;if(!q||!q.session||!q.user){const W=new vn;return this._returnResult({data:{user:null,session:null},error:W})}return q.session&&(await this._saveSession(q.session),await this._notifyAllSubscribers("SIGNED_IN",q.session)),this._returnResult({data:Object.assign({},q),error:L})}catch(q){if(Se(q))return this._returnResult({data:{user:null,session:null},error:q});throw q}}async signInWithSolana(s){var i,r,d,f,h,g,b,p,y,S,j,T;let C,q;if("message"in s)C=s.message,q=s.signature;else{const{chain:L,wallet:W,statement:Z,options:k}=s;let te;if(Nt())if(typeof W=="object")te=W;else{const fe=window;if("solana"in fe&&typeof fe.solana=="object"&&("signIn"in fe.solana&&typeof fe.solana.signIn=="function"||"signMessage"in fe.solana&&typeof fe.solana.signMessage=="function"))te=fe.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof W!="object"||!(k!=null&&k.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");te=W}const he=new URL((i=k==null?void 0:k.url)!==null&&i!==void 0?i:window.location.href);if("signIn"in te&&te.signIn){const fe=await te.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},k==null?void 0:k.signInWithSolana),{version:"1",domain:he.host,uri:he.href}),Z?{statement:Z}:null));let ae;if(Array.isArray(fe)&&fe[0]&&typeof fe[0]=="object")ae=fe[0];else if(fe&&typeof fe=="object"&&"signedMessage"in fe&&"signature"in fe)ae=fe;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in ae&&"signature"in ae&&(typeof ae.signedMessage=="string"||ae.signedMessage instanceof Uint8Array)&&ae.signature instanceof Uint8Array)C=typeof ae.signedMessage=="string"?ae.signedMessage:new TextDecoder().decode(ae.signedMessage),q=ae.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in te)||typeof te.signMessage!="function"||!("publicKey"in te)||typeof te!="object"||!te.publicKey||!("toBase58"in te.publicKey)||typeof te.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");C=[`${he.host} wants you to sign in with your Solana account:`,te.publicKey.toBase58(),...Z?["",Z,""]:[""],"Version: 1",`URI: ${he.href}`,`Issued At: ${(d=(r=k==null?void 0:k.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&d!==void 0?d:new Date().toISOString()}`,...!((f=k==null?void 0:k.signInWithSolana)===null||f===void 0)&&f.notBefore?[`Not Before: ${k.signInWithSolana.notBefore}`]:[],...!((h=k==null?void 0:k.signInWithSolana)===null||h===void 0)&&h.expirationTime?[`Expiration Time: ${k.signInWithSolana.expirationTime}`]:[],...!((g=k==null?void 0:k.signInWithSolana)===null||g===void 0)&&g.chainId?[`Chain ID: ${k.signInWithSolana.chainId}`]:[],...!((b=k==null?void 0:k.signInWithSolana)===null||b===void 0)&&b.nonce?[`Nonce: ${k.signInWithSolana.nonce}`]:[],...!((p=k==null?void 0:k.signInWithSolana)===null||p===void 0)&&p.requestId?[`Request ID: ${k.signInWithSolana.requestId}`]:[],...!((S=(y=k==null?void 0:k.signInWithSolana)===null||y===void 0?void 0:y.resources)===null||S===void 0)&&S.length?["Resources",...k.signInWithSolana.resources.map(ae=>`- ${ae}`)]:[]].join(`
`);const fe=await te.signMessage(new TextEncoder().encode(C),"utf8");if(!fe||!(fe instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");q=fe}}try{const{data:L,error:W}=await Ae(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:C,signature:ks(q)},!((j=s.options)===null||j===void 0)&&j.captchaToken?{gotrue_meta_security:{captcha_token:(T=s.options)===null||T===void 0?void 0:T.captchaToken}}:null),xform:ra});if(W)throw W;if(!L||!L.session||!L.user){const Z=new vn;return this._returnResult({data:{user:null,session:null},error:Z})}return L.session&&(await this._saveSession(L.session),await this._notifyAllSubscribers("SIGNED_IN",L.session)),this._returnResult({data:Object.assign({},L),error:W})}catch(L){if(Se(L))return this._returnResult({data:{user:null,session:null},error:L});throw L}}async _exchangeCodeForSession(s){const i=await Es(this.storage,`${this.storageKey}-code-verifier`),[r,d]=(i??"").split("/");try{if(!r&&this.flowType==="pkce")throw new Kb;const{data:f,error:h}=await Ae(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:s,code_verifier:r},xform:ra});if(await jt(this.storage,`${this.storageKey}-code-verifier`),h)throw h;if(!f||!f.session||!f.user){const g=new vn;return this._returnResult({data:{user:null,session:null,redirectType:null},error:g})}return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",f.session)),this._returnResult({data:Object.assign(Object.assign({},f),{redirectType:d??null}),error:h})}catch(f){if(await jt(this.storage,`${this.storageKey}-code-verifier`),Se(f))return this._returnResult({data:{user:null,session:null,redirectType:null},error:f});throw f}}async signInWithIdToken(s){try{const{options:i,provider:r,token:d,access_token:f,nonce:h}=s,g=await Ae(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:d,access_token:f,nonce:h,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},xform:ra}),{data:b,error:p}=g;if(p)return this._returnResult({data:{user:null,session:null},error:p});if(!b||!b.session||!b.user){const y=new vn;return this._returnResult({data:{user:null,session:null},error:y})}return b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),this._returnResult({data:b,error:p})}catch(i){if(Se(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithOtp(s){var i,r,d,f,h;try{if("email"in s){const{email:g,options:b}=s;let p=null,y=null;this.flowType==="pkce"&&([p,y]=await xn(this.storage,this.storageKey));const{error:S}=await Ae(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:g,data:(i=b==null?void 0:b.data)!==null&&i!==void 0?i:{},create_user:(r=b==null?void 0:b.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:b==null?void 0:b.captchaToken},code_challenge:p,code_challenge_method:y},redirectTo:b==null?void 0:b.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:S})}if("phone"in s){const{phone:g,options:b}=s,{data:p,error:y}=await Ae(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:g,data:(d=b==null?void 0:b.data)!==null&&d!==void 0?d:{},create_user:(f=b==null?void 0:b.shouldCreateUser)!==null&&f!==void 0?f:!0,gotrue_meta_security:{captcha_token:b==null?void 0:b.captchaToken},channel:(h=b==null?void 0:b.channel)!==null&&h!==void 0?h:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:p==null?void 0:p.message_id},error:y})}throw new nr("You must provide either an email or phone number.")}catch(g){if(await jt(this.storage,`${this.storageKey}-code-verifier`),Se(g))return this._returnResult({data:{user:null,session:null},error:g});throw g}}async verifyOtp(s){var i,r;try{let d,f;"options"in s&&(d=(i=s.options)===null||i===void 0?void 0:i.redirectTo,f=(r=s.options)===null||r===void 0?void 0:r.captchaToken);const{data:h,error:g}=await Ae(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},s),{gotrue_meta_security:{captcha_token:f}}),redirectTo:d,xform:ra});if(g)throw g;if(!h)throw new Error("An error occurred on token verification.");const b=h.session,p=h.user;return b!=null&&b.access_token&&(await this._saveSession(b),await this._notifyAllSubscribers(s.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",b)),this._returnResult({data:{user:p,session:b},error:null})}catch(d){if(Se(d))return this._returnResult({data:{user:null,session:null},error:d});throw d}}async signInWithSSO(s){var i,r,d,f,h;try{let g=null,b=null;this.flowType==="pkce"&&([g,b]=await xn(this.storage,this.storageKey));const p=await Ae(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in s?{provider_id:s.providerId}:null),"domain"in s?{domain:s.domain}:null),{redirect_to:(r=(i=s.options)===null||i===void 0?void 0:i.redirectTo)!==null&&r!==void 0?r:void 0}),!((d=s==null?void 0:s.options)===null||d===void 0)&&d.captchaToken?{gotrue_meta_security:{captcha_token:s.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:g,code_challenge_method:b}),headers:this.headers,xform:bv});return!((f=p.data)===null||f===void 0)&&f.url&&Nt()&&!(!((h=s.options)===null||h===void 0)&&h.skipBrowserRedirect)&&window.location.assign(p.data.url),this._returnResult(p)}catch(g){if(await jt(this.storage,`${this.storageKey}-code-verifier`),Se(g))return this._returnResult({data:null,error:g});throw g}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async s=>{const{data:{session:i},error:r}=s;if(r)throw r;if(!i)throw new Kt;const{error:d}=await Ae(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:i.access_token});return this._returnResult({data:{user:null,session:null},error:d})})}catch(s){if(Se(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async resend(s){try{const i=`${this.url}/resend`;if("email"in s){const{email:r,type:d,options:f}=s,{error:h}=await Ae(this.fetch,"POST",i,{headers:this.headers,body:{email:r,type:d,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},redirectTo:f==null?void 0:f.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}else if("phone"in s){const{phone:r,type:d,options:f}=s,{data:h,error:g}=await Ae(this.fetch,"POST",i,{headers:this.headers,body:{phone:r,type:d,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:h==null?void 0:h.message_id},error:g})}throw new nr("You must provide either an email or phone number and a type")}catch(i){if(Se(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async i=>i))}async _acquireLock(s,i){this._debug("#_acquireLock","begin",s);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),d=(async()=>(await r,await i()))();return this.pendingInLock.push((async()=>{try{await d}catch{}})()),d}return await this.lock(`lock:${this.storageKey}`,s,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=i();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const d=[...this.pendingInLock];await Promise.all(d),this.pendingInLock.splice(0,d.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(s){this._debug("#_useSession","begin");try{const i=await this.__loadSession();return await s(i)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let s=null;const i=await Es(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",i),i!==null&&(this._isValidSession(i)?s=i:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!s)return{data:{session:null},error:null};const r=s.expires_at?s.expires_at*1e3-Date.now()<Mc:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",s.expires_at),!r){if(this.userStorage){const h=await Es(this.userStorage,this.storageKey+"-user");h!=null&&h.user?s.user=h.user:s.user=Bc()}if(this.storage.isServer&&s.user&&!s.user.__isUserNotAvailableProxy){const h={value:this.suppressGetSessionWarning};s.user=hv(s.user,h),h.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:s},error:null}}const{data:d,error:f}=await this._callRefreshToken(s.refresh_token);return f?this._returnResult({data:{session:null},error:f}):this._returnResult({data:{session:d},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(s){if(s)return await this._getUser(s);await this.initializePromise;const i=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return i.data.user&&(this.suppressGetSessionWarning=!0),i}async _getUser(s){try{return s?await Ae(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:s,xform:is}):await this._useSession(async i=>{var r,d,f;const{data:h,error:g}=i;if(g)throw g;return!(!((r=h.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Kt}:await Ae(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(f=(d=h.session)===null||d===void 0?void 0:d.access_token)!==null&&f!==void 0?f:void 0,xform:is})})}catch(i){if(Se(i))return Lc(i)&&(await this._removeSession(),await jt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:i});throw i}}async updateUser(s,i={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(s,i))}async _updateUser(s,i={}){try{return await this._useSession(async r=>{const{data:d,error:f}=r;if(f)throw f;if(!d.session)throw new Kt;const h=d.session;let g=null,b=null;this.flowType==="pkce"&&s.email!=null&&([g,b]=await xn(this.storage,this.storageKey));const{data:p,error:y}=await Ae(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:i==null?void 0:i.emailRedirectTo,body:Object.assign(Object.assign({},s),{code_challenge:g,code_challenge_method:b}),jwt:h.access_token,xform:is});if(y)throw y;return h.user=p.user,await this._saveSession(h),await this._notifyAllSubscribers("USER_UPDATED",h),this._returnResult({data:{user:h.user},error:null})})}catch(r){if(await jt(this.storage,`${this.storageKey}-code-verifier`),Se(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(s){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(s))}async _setSession(s){try{if(!s.access_token||!s.refresh_token)throw new Kt;const i=Date.now()/1e3;let r=i,d=!0,f=null;const{payload:h}=ir(s.access_token);if(h.exp&&(r=h.exp,d=r<=i),d){const{data:g,error:b}=await this._callRefreshToken(s.refresh_token);if(b)return this._returnResult({data:{user:null,session:null},error:b});if(!g)return{data:{user:null,session:null},error:null};f=g}else{const{data:g,error:b}=await this._getUser(s.access_token);if(b)return this._returnResult({data:{user:null,session:null},error:b});f={access_token:s.access_token,refresh_token:s.refresh_token,user:g.user,token_type:"bearer",expires_in:r-i,expires_at:r},await this._saveSession(f),await this._notifyAllSubscribers("SIGNED_IN",f)}return this._returnResult({data:{user:f.user,session:f},error:null})}catch(i){if(Se(i))return this._returnResult({data:{session:null,user:null},error:i});throw i}}async refreshSession(s){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(s))}async _refreshSession(s){try{return await this._useSession(async i=>{var r;if(!s){const{data:h,error:g}=i;if(g)throw g;s=(r=h.session)!==null&&r!==void 0?r:void 0}if(!(s!=null&&s.refresh_token))throw new Kt;const{data:d,error:f}=await this._callRefreshToken(s.refresh_token);return f?this._returnResult({data:{user:null,session:null},error:f}):d?this._returnResult({data:{user:d.user,session:d},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(i){if(Se(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async _getSessionFromURL(s,i){try{if(!Nt())throw new lr("No browser detected.");if(s.error||s.error_description||s.error_code)throw new lr(s.error_description||"Error in URL with unspecified error_description",{error:s.error||"unspecified_error",code:s.error_code||"unspecified_code"});switch(i){case"implicit":if(this.flowType==="pkce")throw new ym("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new lr("Not a valid implicit grant flow url.");break;default:}if(i==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!s.code)throw new ym("No code detected.");const{data:Z,error:k}=await this._exchangeCodeForSession(s.code);if(k)throw k;const te=new URL(window.location.href);return te.searchParams.delete("code"),window.history.replaceState(window.history.state,"",te.toString()),{data:{session:Z.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:d,access_token:f,refresh_token:h,expires_in:g,expires_at:b,token_type:p}=s;if(!f||!g||!h||!p)throw new lr("No session defined in URL");const y=Math.round(Date.now()/1e3),S=parseInt(g);let j=y+S;b&&(j=parseInt(b));const T=j-y;T*1e3<=Nn&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${T}s, should have been closer to ${S}s`);const C=j-S;y-C>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",C,j,y):y-C<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",C,j,y);const{data:q,error:L}=await this._getUser(f);if(L)throw L;const W={provider_token:r,provider_refresh_token:d,access_token:f,expires_in:S,expires_at:j,refresh_token:h,token_type:p,user:q.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:W,redirectType:s.type},error:null})}catch(r){if(Se(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(s){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),s):!!(s.access_token||s.error_description)}async _isPKCECallback(s){const i=await Es(this.storage,`${this.storageKey}-code-verifier`);return!!(s.code&&i)}async signOut(s={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(s))}async _signOut({scope:s}={scope:"global"}){return await this._useSession(async i=>{var r;const{data:d,error:f}=i;if(f&&!Lc(f))return this._returnResult({error:f});const h=(r=d.session)===null||r===void 0?void 0:r.access_token;if(h){const{error:g}=await this.admin.signOut(h,s);if(g&&!(Gb(g)&&(g.status===404||g.status===401||g.status===403)||Lc(g)))return this._returnResult({error:g})}return s!=="others"&&(await this._removeSession(),await jt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(s){const i=Fb(),r={id:i,callback:s,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",i),this.stateChangeEmitters.delete(i)}};return this._debug("#onAuthStateChange()","registered callback with id",i),this.stateChangeEmitters.set(i,r),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(i)})))(),{data:{subscription:r}}}async _emitInitialSession(s){return await this._useSession(async i=>{var r,d;try{const{data:{session:f},error:h}=i;if(h)throw h;await((r=this.stateChangeEmitters.get(s))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",f)),this._debug("INITIAL_SESSION","callback id",s,"session",f)}catch(f){await((d=this.stateChangeEmitters.get(s))===null||d===void 0?void 0:d.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",s,"error",f),console.error(f)}})}async resetPasswordForEmail(s,i={}){let r=null,d=null;this.flowType==="pkce"&&([r,d]=await xn(this.storage,this.storageKey,!0));try{return await Ae(this.fetch,"POST",`${this.url}/recover`,{body:{email:s,code_challenge:r,code_challenge_method:d,gotrue_meta_security:{captcha_token:i.captchaToken}},headers:this.headers,redirectTo:i.redirectTo})}catch(f){if(await jt(this.storage,`${this.storageKey}-code-verifier`),Se(f))return this._returnResult({data:null,error:f});throw f}}async getUserIdentities(){var s;try{const{data:i,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(s=i.user.identities)!==null&&s!==void 0?s:[]},error:null})}catch(i){if(Se(i))return this._returnResult({data:null,error:i});throw i}}async linkIdentity(s){return"token"in s?this.linkIdentityIdToken(s):this.linkIdentityOAuth(s)}async linkIdentityOAuth(s){var i;try{const{data:r,error:d}=await this._useSession(async f=>{var h,g,b,p,y;const{data:S,error:j}=f;if(j)throw j;const T=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,s.provider,{redirectTo:(h=s.options)===null||h===void 0?void 0:h.redirectTo,scopes:(g=s.options)===null||g===void 0?void 0:g.scopes,queryParams:(b=s.options)===null||b===void 0?void 0:b.queryParams,skipBrowserRedirect:!0});return await Ae(this.fetch,"GET",T,{headers:this.headers,jwt:(y=(p=S.session)===null||p===void 0?void 0:p.access_token)!==null&&y!==void 0?y:void 0})});if(d)throw d;return Nt()&&!(!((i=s.options)===null||i===void 0)&&i.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),this._returnResult({data:{provider:s.provider,url:r==null?void 0:r.url},error:null})}catch(r){if(Se(r))return this._returnResult({data:{provider:s.provider,url:null},error:r});throw r}}async linkIdentityIdToken(s){return await this._useSession(async i=>{var r;try{const{error:d,data:{session:f}}=i;if(d)throw d;const{options:h,provider:g,token:b,access_token:p,nonce:y}=s,S=await Ae(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=f==null?void 0:f.access_token)!==null&&r!==void 0?r:void 0,body:{provider:g,id_token:b,access_token:p,nonce:y,link_identity:!0,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:ra}),{data:j,error:T}=S;return T?this._returnResult({data:{user:null,session:null},error:T}):!j||!j.session||!j.user?this._returnResult({data:{user:null,session:null},error:new vn}):(j.session&&(await this._saveSession(j.session),await this._notifyAllSubscribers("USER_UPDATED",j.session)),this._returnResult({data:j,error:T}))}catch(d){if(await jt(this.storage,`${this.storageKey}-code-verifier`),Se(d))return this._returnResult({data:{user:null,session:null},error:d});throw d}})}async unlinkIdentity(s){try{return await this._useSession(async i=>{var r,d;const{data:f,error:h}=i;if(h)throw h;return await Ae(this.fetch,"DELETE",`${this.url}/user/identities/${s.identity_id}`,{headers:this.headers,jwt:(d=(r=f.session)===null||r===void 0?void 0:r.access_token)!==null&&d!==void 0?d:void 0})})}catch(i){if(Se(i))return this._returnResult({data:null,error:i});throw i}}async _refreshAccessToken(s){const i=`#_refreshAccessToken(${s.substring(0,5)}...)`;this._debug(i,"begin");try{const r=Date.now();return await sv(async d=>(d>0&&await av(200*Math.pow(2,d-1)),this._debug(i,"refreshing attempt",d),await Ae(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:s},headers:this.headers,xform:ra})),(d,f)=>{const h=200*Math.pow(2,d);return f&&qc(f)&&Date.now()+h-r<Nn})}catch(r){if(this._debug(i,"error",r),Se(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(i,"end")}}_isValidSession(s){return typeof s=="object"&&s!==null&&"access_token"in s&&"refresh_token"in s&&"expires_at"in s}async _handleProviderSignIn(s,i){const r=await this._getUrlForProvider(`${this.url}/authorize`,s,{redirectTo:i.redirectTo,scopes:i.scopes,queryParams:i.queryParams});return this._debug("#_handleProviderSignIn()","provider",s,"options",i,"url",r),Nt()&&!i.skipBrowserRedirect&&window.location.assign(r),{data:{provider:s,url:r},error:null}}async _recoverAndRefresh(){var s,i;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const d=await Es(this.storage,this.storageKey);if(d&&this.userStorage){let h=await Es(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!h&&(h={user:d.user},await En(this.userStorage,this.storageKey+"-user",h)),d.user=(s=h==null?void 0:h.user)!==null&&s!==void 0?s:Bc()}else if(d&&!d.user&&!d.user){const h=await Es(this.storage,this.storageKey+"-user");h&&(h!=null&&h.user)?(d.user=h.user,await jt(this.storage,this.storageKey+"-user"),await En(this.storage,this.storageKey,d)):d.user=Bc()}if(this._debug(r,"session from storage",d),!this._isValidSession(d)){this._debug(r,"session is not valid"),d!==null&&await this._removeSession();return}const f=((i=d.expires_at)!==null&&i!==void 0?i:1/0)*1e3-Date.now()<Mc;if(this._debug(r,`session has${f?"":" not"} expired with margin of ${Mc}s`),f){if(this.autoRefreshToken&&d.refresh_token){const{error:h}=await this._callRefreshToken(d.refresh_token);h&&(console.error(h),qc(h)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",h),await this._removeSession()))}}else if(d.user&&d.user.__isUserNotAvailableProxy===!0)try{const{data:h,error:g}=await this._getUser(d.access_token);!g&&(h!=null&&h.user)?(d.user=h.user,await this._saveSession(d),await this._notifyAllSubscribers("SIGNED_IN",d)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(h){console.error("Error getting user data:",h),this._debug(r,"error getting user data, skipping SIGNED_IN notification",h)}else await this._notifyAllSubscribers("SIGNED_IN",d)}catch(d){this._debug(r,"error",d),console.error(d);return}finally{this._debug(r,"end")}}async _callRefreshToken(s){var i,r;if(!s)throw new Kt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const d=`#_callRefreshToken(${s.substring(0,5)}...)`;this._debug(d,"begin");try{this.refreshingDeferred=new mr;const{data:f,error:h}=await this._refreshAccessToken(s);if(h)throw h;if(!f.session)throw new Kt;await this._saveSession(f.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",f.session);const g={data:f.session,error:null};return this.refreshingDeferred.resolve(g),g}catch(f){if(this._debug(d,"error",f),Se(f)){const h={data:null,error:f};return qc(f)||await this._removeSession(),(i=this.refreshingDeferred)===null||i===void 0||i.resolve(h),h}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(f),f}finally{this.refreshingDeferred=null,this._debug(d,"end")}}async _notifyAllSubscribers(s,i,r=!0){const d=`#_notifyAllSubscribers(${s})`;this._debug(d,"begin",i,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:s,session:i});const f=[],h=Array.from(this.stateChangeEmitters.values()).map(async g=>{try{await g.callback(s,i)}catch(b){f.push(b)}});if(await Promise.all(h),f.length>0){for(let g=0;g<f.length;g+=1)console.error(f[g]);throw f[0]}}finally{this._debug(d,"end")}}async _saveSession(s){this._debug("#_saveSession()",s),this.suppressGetSessionWarning=!0,await jt(this.storage,`${this.storageKey}-code-verifier`);const i=Object.assign({},s),r=i.user&&i.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&i.user&&await En(this.userStorage,this.storageKey+"-user",{user:i.user});const d=Object.assign({},i);delete d.user;const f=Nm(d);await En(this.storage,this.storageKey,f)}else{const d=Nm(i);await En(this.storage,this.storageKey,d)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await jt(this.storage,this.storageKey),await jt(this.storage,this.storageKey+"-code-verifier"),await jt(this.storage,this.storageKey+"-user"),this.userStorage&&await jt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const s=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{s&&Nt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",s)}catch(i){console.error("removing visibilitychange callback failed",i)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const s=setInterval(()=>this._autoRefreshTokenTick(),Nn);this.autoRefreshTicker=s,s&&typeof s=="object"&&typeof s.unref=="function"?s.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(s);const i=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=i,i&&typeof i=="object"&&typeof i.unref=="function"?i.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(i)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const s=this.autoRefreshTicker;this.autoRefreshTicker=null,s&&clearInterval(s);const i=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,i&&clearTimeout(i)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const s=Date.now();try{return await this._useSession(async i=>{const{data:{session:r}}=i;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const d=Math.floor((r.expires_at*1e3-s)/Nn);this._debug("#_autoRefreshTokenTick()",`access token expires in ${d} ticks, a tick lasts ${Nn}ms, refresh threshold is ${Jc} ticks`),d<=Jc&&await this._callRefreshToken(r.refresh_token)})}catch(i){console.error("Auto refresh tick failed with error. This is likely a transient error.",i)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(s){if(s.isAcquireTimeout||s instanceof Zm)this._debug("auto refresh token tick lock not available");else throw s}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Nt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(s){this._debug("#visibilityChangedCallback","error",s)}},window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(s){console.error("_handleVisibilityChange",s)}}async _onVisibilityChanged(s){const i=`#_onVisibilityChanged(${s})`;this._debug(i,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),s||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(i,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(s,i,r){const d=[`provider=${encodeURIComponent(i)}`];if(r!=null&&r.redirectTo&&d.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&d.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[f,h]=await xn(this.storage,this.storageKey),g=new URLSearchParams({code_challenge:`${encodeURIComponent(f)}`,code_challenge_method:`${encodeURIComponent(h)}`});d.push(g.toString())}if(r!=null&&r.queryParams){const f=new URLSearchParams(r.queryParams);d.push(f.toString())}return r!=null&&r.skipBrowserRedirect&&d.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${s}?${d.join("&")}`}async _unenroll(s){try{return await this._useSession(async i=>{var r;const{data:d,error:f}=i;return f?this._returnResult({data:null,error:f}):await Ae(this.fetch,"DELETE",`${this.url}/factors/${s.factorId}`,{headers:this.headers,jwt:(r=d==null?void 0:d.session)===null||r===void 0?void 0:r.access_token})})}catch(i){if(Se(i))return this._returnResult({data:null,error:i});throw i}}async _enroll(s){try{return await this._useSession(async i=>{var r,d;const{data:f,error:h}=i;if(h)return this._returnResult({data:null,error:h});const g=Object.assign({friendly_name:s.friendlyName,factor_type:s.factorType},s.factorType==="phone"?{phone:s.phone}:s.factorType==="totp"?{issuer:s.issuer}:{}),{data:b,error:p}=await Ae(this.fetch,"POST",`${this.url}/factors`,{body:g,headers:this.headers,jwt:(r=f==null?void 0:f.session)===null||r===void 0?void 0:r.access_token});return p?this._returnResult({data:null,error:p}):(s.factorType==="totp"&&b.type==="totp"&&(!((d=b==null?void 0:b.totp)===null||d===void 0)&&d.qr_code)&&(b.totp.qr_code=`data:image/svg+xml;utf-8,${b.totp.qr_code}`),this._returnResult({data:b,error:null}))})}catch(i){if(Se(i))return this._returnResult({data:null,error:i});throw i}}async _verify(s){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async i=>{var r;const{data:d,error:f}=i;if(f)return this._returnResult({data:null,error:f});const h=Object.assign({challenge_id:s.challengeId},"webauthn"in s?{webauthn:Object.assign(Object.assign({},s.webauthn),{credential_response:s.webauthn.type==="create"?Dv(s.webauthn.credential_response):Uv(s.webauthn.credential_response)})}:{code:s.code}),{data:g,error:b}=await Ae(this.fetch,"POST",`${this.url}/factors/${s.factorId}/verify`,{body:h,headers:this.headers,jwt:(r=d==null?void 0:d.session)===null||r===void 0?void 0:r.access_token});return b?this._returnResult({data:null,error:b}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+g.expires_in},g)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",g),this._returnResult({data:g,error:b}))})}catch(i){if(Se(i))return this._returnResult({data:null,error:i});throw i}})}async _challenge(s){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async i=>{var r;const{data:d,error:f}=i;if(f)return this._returnResult({data:null,error:f});const h=await Ae(this.fetch,"POST",`${this.url}/factors/${s.factorId}/challenge`,{body:s,headers:this.headers,jwt:(r=d==null?void 0:d.session)===null||r===void 0?void 0:r.access_token});if(h.error)return h;const{data:g}=h;if(g.type!=="webauthn")return{data:g,error:null};switch(g.webauthn.type){case"create":return{data:Object.assign(Object.assign({},g),{webauthn:Object.assign(Object.assign({},g.webauthn),{credential_options:Object.assign(Object.assign({},g.webauthn.credential_options),{publicKey:Cv(g.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},g),{webauthn:Object.assign(Object.assign({},g.webauthn),{credential_options:Object.assign(Object.assign({},g.webauthn.credential_options),{publicKey:Rv(g.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(i){if(Se(i))return this._returnResult({data:null,error:i});throw i}})}async _challengeAndVerify(s){const{data:i,error:r}=await this._challenge({factorId:s.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:s.factorId,challengeId:i.id,code:s.code})}async _listFactors(){var s;const{data:{user:i},error:r}=await this.getUser();if(r)return{data:null,error:r};const d={all:[],phone:[],totp:[],webauthn:[]};for(const f of(s=i==null?void 0:i.factors)!==null&&s!==void 0?s:[])d.all.push(f),f.status==="verified"&&d[f.factor_type].push(f);return{data:d,error:null}}async _getAuthenticatorAssuranceLevel(s){var i,r,d,f;if(s)try{const{payload:T}=ir(s);let C=null;T.aal&&(C=T.aal);let q=C;const{data:{user:L},error:W}=await this.getUser(s);if(W)return this._returnResult({data:null,error:W});((r=(i=L==null?void 0:L.factors)===null||i===void 0?void 0:i.filter(te=>te.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(q="aal2");const k=T.amr||[];return{data:{currentLevel:C,nextLevel:q,currentAuthenticationMethods:k},error:null}}catch(T){if(Se(T))return this._returnResult({data:null,error:T});throw T}const{data:{session:h},error:g}=await this.getSession();if(g)return this._returnResult({data:null,error:g});if(!h)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:b}=ir(h.access_token);let p=null;b.aal&&(p=b.aal);let y=p;((f=(d=h.user.factors)===null||d===void 0?void 0:d.filter(T=>T.status==="verified"))!==null&&f!==void 0?f:[]).length>0&&(y="aal2");const j=b.amr||[];return{data:{currentLevel:p,nextLevel:y,currentAuthenticationMethods:j},error:null}}async _getAuthorizationDetails(s){try{return await this._useSession(async i=>{const{data:{session:r},error:d}=i;return d?this._returnResult({data:null,error:d}):r?await Ae(this.fetch,"GET",`${this.url}/oauth/authorizations/${s}`,{headers:this.headers,jwt:r.access_token,xform:f=>({data:f,error:null})}):this._returnResult({data:null,error:new Kt})})}catch(i){if(Se(i))return this._returnResult({data:null,error:i});throw i}}async _approveAuthorization(s,i){try{return await this._useSession(async r=>{const{data:{session:d},error:f}=r;if(f)return this._returnResult({data:null,error:f});if(!d)return this._returnResult({data:null,error:new Kt});const h=await Ae(this.fetch,"POST",`${this.url}/oauth/authorizations/${s}/consent`,{headers:this.headers,jwt:d.access_token,body:{action:"approve"},xform:g=>({data:g,error:null})});return h.data&&h.data.redirect_url&&Nt()&&!(i!=null&&i.skipBrowserRedirect)&&window.location.assign(h.data.redirect_url),h})}catch(r){if(Se(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(s,i){try{return await this._useSession(async r=>{const{data:{session:d},error:f}=r;if(f)return this._returnResult({data:null,error:f});if(!d)return this._returnResult({data:null,error:new Kt});const h=await Ae(this.fetch,"POST",`${this.url}/oauth/authorizations/${s}/consent`,{headers:this.headers,jwt:d.access_token,body:{action:"deny"},xform:g=>({data:g,error:null})});return h.data&&h.data.redirect_url&&Nt()&&!(i!=null&&i.skipBrowserRedirect)&&window.location.assign(h.data.redirect_url),h})}catch(r){if(Se(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async s=>{const{data:{session:i},error:r}=s;return r?this._returnResult({data:null,error:r}):i?await Ae(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:i.access_token,xform:d=>({data:d,error:null})}):this._returnResult({data:null,error:new Kt})})}catch(s){if(Se(s))return this._returnResult({data:null,error:s});throw s}}async _revokeOAuthGrant(s){try{return await this._useSession(async i=>{const{data:{session:r},error:d}=i;return d?this._returnResult({data:null,error:d}):r?(await Ae(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:s.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Kt})})}catch(i){if(Se(i))return this._returnResult({data:null,error:i});throw i}}async fetchJwk(s,i={keys:[]}){let r=i.keys.find(g=>g.kid===s);if(r)return r;const d=Date.now();if(r=this.jwks.keys.find(g=>g.kid===s),r&&this.jwks_cached_at+Ib>d)return r;const{data:f,error:h}=await Ae(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(h)throw h;return!f.keys||f.keys.length===0||(this.jwks=f,this.jwks_cached_at=d,r=f.keys.find(g=>g.kid===s),!r)?null:r}async getClaims(s,i={}){try{let r=s;if(!r){const{data:T,error:C}=await this.getSession();if(C||!T.session)return this._returnResult({data:null,error:C});r=T.session.access_token}const{header:d,payload:f,signature:h,raw:{header:g,payload:b}}=ir(r);i!=null&&i.allowExpired||uv(f.exp);const p=!d.alg||d.alg.startsWith("HS")||!d.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(d.kid,i!=null&&i.keys?{keys:i.keys}:i==null?void 0:i.jwks);if(!p){const{error:T}=await this.getUser(r);if(T)throw T;return{data:{claims:f,header:d,signature:h},error:null}}const y=dv(d.alg),S=await crypto.subtle.importKey("jwk",p,y,!0,["verify"]);if(!await crypto.subtle.verify(y,S,h,Pb(`${g}.${b}`)))throw new Wc("Invalid JWT signature");return{data:{claims:f,header:d,signature:h},error:null}}catch(r){if(Se(r))return this._returnResult({data:null,error:r});throw r}}}zl.nextInstanceID={};const Vv=zl,Gv="2.94.0";let Tl="";typeof Deno<"u"?Tl="deno":typeof document<"u"?Tl="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Tl="react-native":Tl="node";const Yv={"X-Client-Info":`supabase-js-${Tl}/${Gv}`},Kv={headers:Yv},Xv={schema:"public"},Qv={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Jv={};function Ml(l){"@babel/helpers - typeof";return Ml=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Ml(l)}function Zv(l,s){if(Ml(l)!="object"||!l)return l;var i=l[Symbol.toPrimitive];if(i!==void 0){var r=i.call(l,s);if(Ml(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(l)}function Pv(l){var s=Zv(l,"string");return Ml(s)=="symbol"?s:s+""}function Wv(l,s,i){return(s=Pv(s))in l?Object.defineProperty(l,s,{value:i,enumerable:!0,configurable:!0,writable:!0}):l[s]=i,l}function Rm(l,s){var i=Object.keys(l);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(l);s&&(r=r.filter(function(d){return Object.getOwnPropertyDescriptor(l,d).enumerable})),i.push.apply(i,r)}return i}function it(l){for(var s=1;s<arguments.length;s++){var i=arguments[s]!=null?arguments[s]:{};s%2?Rm(Object(i),!0).forEach(function(r){Wv(l,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(i)):Rm(Object(i)).forEach(function(r){Object.defineProperty(l,r,Object.getOwnPropertyDescriptor(i,r))})}return l}const Fv=l=>l?(...s)=>l(...s):(...s)=>fetch(...s),ex=()=>Headers,tx=(l,s,i)=>{const r=Fv(i),d=ex();return async(f,h)=>{var g;const b=(g=await s())!==null&&g!==void 0?g:l;let p=new d(h==null?void 0:h.headers);return p.has("apikey")||p.set("apikey",l),p.has("Authorization")||p.set("Authorization",`Bearer ${b}`),r(f,it(it({},h),{},{headers:p}))}};function ax(l){return l.endsWith("/")?l:l+"/"}function sx(l,s){var i,r;const{db:d,auth:f,realtime:h,global:g}=l,{db:b,auth:p,realtime:y,global:S}=s,j={db:it(it({},b),d),auth:it(it({},p),f),realtime:it(it({},y),h),storage:{},global:it(it(it({},S),g),{},{headers:it(it({},(i=S==null?void 0:S.headers)!==null&&i!==void 0?i:{}),(r=g==null?void 0:g.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return l.accessToken?j.accessToken=l.accessToken:delete j.accessToken,j}function nx(l){const s=l==null?void 0:l.trim();if(!s)throw new Error("supabaseUrl is required.");if(!s.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(ax(s))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var lx=class extends Vv{constructor(l){super(l)}},ix=class{constructor(l,s,i){var r,d;this.supabaseUrl=l,this.supabaseKey=s;const f=nx(l);if(!s)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",f),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",f),this.storageUrl=new URL("storage/v1",f),this.functionsUrl=new URL("functions/v1",f);const h=`sb-${f.hostname.split(".")[0]}-auth-token`,g={db:Xv,realtime:Jv,auth:it(it({},Qv),{},{storageKey:h}),global:Kv},b=sx(i??{},g);if(this.storageKey=(r=b.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(d=b.global.headers)!==null&&d!==void 0?d:{},b.accessToken)this.accessToken=b.accessToken,this.auth=new Proxy({},{get:(y,S)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(S)} is not possible`)}});else{var p;this.auth=this._initSupabaseAuthClient((p=b.auth)!==null&&p!==void 0?p:{},this.headers,b.global.fetch)}this.fetch=tx(s,this._getAccessToken.bind(this),b.global.fetch),this.realtime=this._initRealtimeClient(it({headers:this.headers,accessToken:this._getAccessToken.bind(this)},b.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(y=>this.realtime.setAuth(y)).catch(y=>console.warn("Failed to set initial Realtime auth token:",y)),this.rest=new Gp(new URL("rest/v1",f).href,{headers:this.headers,schema:b.db.schema,fetch:this.fetch,timeout:b.db.timeout,urlLengthLimit:b.db.urlLengthLimit}),this.storage=new Lb(this.storageUrl.href,this.headers,this.fetch,i==null?void 0:i.storage),b.accessToken||this._listenForAuthEvents()}get functions(){return new Mp(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(l){return this.rest.from(l)}schema(l){return this.rest.schema(l)}rpc(l,s={},i={head:!1,get:!1,count:void 0}){return this.rest.rpc(l,s,i)}channel(l,s={config:{}}){return this.realtime.channel(l,s)}getChannels(){return this.realtime.getChannels()}removeChannel(l){return this.realtime.removeChannel(l)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var l=this,s,i;if(l.accessToken)return await l.accessToken();const{data:r}=await l.auth.getSession();return(s=(i=r.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:l.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:l,persistSession:s,detectSessionInUrl:i,storage:r,userStorage:d,storageKey:f,flowType:h,lock:g,debug:b,throwOnError:p},y,S){const j={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new lx({url:this.authUrl.href,headers:it(it({},j),y),storageKey:f,autoRefreshToken:l,persistSession:s,detectSessionInUrl:i,storage:r,userStorage:d,flowType:h,lock:g,debug:b,throwOnError:p,fetch:S,hasCustomAuthorizationHeader:Object.keys(this.headers).some(T=>T.toLowerCase()==="authorization")})}_initRealtimeClient(l){return new rb(this.realtimeUrl.href,it(it({},l),{},{params:it(it({},{apikey:this.supabaseKey}),l==null?void 0:l.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((l,s)=>{this._handleTokenChanged(l,"CLIENT",s==null?void 0:s.access_token)})}_handleTokenChanged(l,s,i){(l==="TOKEN_REFRESHED"||l==="SIGNED_IN")&&this.changedAccessToken!==i?(this.changedAccessToken=i,this.realtime.setAuth(i)):l==="SIGNED_OUT"&&(this.realtime.setAuth(),s=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const rx=(l,s,i)=>new ix(l,s,i);function ox(){if(typeof window<"u")return!1;const l=globalThis.process;if(!l)return!1;const s=l.version;if(s==null)return!1;const i=s.match(/^v(\d+)\./);return i?parseInt(i[1],10)<=18:!1}ox()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const cx="https://obnddbarhbkrlfaojedg.supabase.co",ux="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9ibmRkYmFyaGJrcmxmYW9qZWRnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njg0NTcyNzksImV4cCI6MjA4NDAzMzI3OX0.209m4hDKb89nDf84LwRWiTGibj1Z11wPX7we4umc-ZU",ue=rx(cx,ux),Dm=["CONSULTATION","IMAGING","LABORATORY","PROCEDURE","PHARMACY","PREVENTION","FOOD","SUPPLIES","HOSPITALIZATION"],dx=({isOpen:l,onClose:s,vets:i,clinicSettings:r,onUpdateClinicSettings:d,onAddVet:f,onRemoveVet:h})=>{const[g,b]=N.useState("general"),[p,y]=N.useState(""),[S,j]=N.useState(""),[T,C]=N.useState(""),[q,L]=N.useState(!1),[W,Z]=N.useState([]),[k,te]=N.useState("CONSULTATION"),[he,fe]=N.useState(""),[ae,we]=N.useState({name:"",price:"",sku:""}),[be,ke]=N.useState(!1),[Te,se]=N.useState(null);N.useEffect(()=>{l&&g==="catalog"&&me()},[l,g]);const me=async()=>{try{const{data:K,error:oe}=await ue.from("service_catalog").select("*").eq("is_active",!0).order("name");if(oe)throw oe;K&&Z(K)}catch(K){console.error("Failed to fetch catalog:",K.message)}},je=async K=>{if(K.preventDefault(),!q){if(!S.trim()){alert(" .");return}if(!p.trim()||!p.includes("@")){alert("   .");return}if(!T.trim()){alert("( ) .");return}if(i.some(oe=>{var x;return((x=oe.email)==null?void 0:x.toLowerCase())===p.trim().toLowerCase()})){alert("  .");return}L(!0);try{await f({email:p.trim().toLowerCase(),name:S.trim(),specialty:T.trim(),avatar:`https://i.pravatar.cc/150?u=${S}_${Date.now()}`}),y(""),j(""),C("")}finally{L(!1)}}},ne=async K=>{if(K.preventDefault(),!(!ae.name.trim()||!ae.price)){ke(!0);try{const oe=ae.sku.trim().toUpperCase(),{error:x}=await ue.from("service_catalog").insert([{category:k,name:ae.name,default_price:parseFloat(ae.price),sku_code:oe||null,is_active:!0}]);if(x)throw x.code==="23505"?new Error("  (SKU)."):x;await me(),we({name:"",price:"",sku:""})}catch(oe){alert(oe.message)}finally{ke(!1)}}},A=async K=>{se(K)},R=async()=>{if(Te)try{const{data:K,error:oe}=await ue.from("service_catalog").delete().eq("id",Te).select();if(oe){const{data:x,error:H}=await ue.from("service_catalog").update({is_active:!1}).eq("id",Te).select();if(H)throw H;alert("    '' .")}await me()}catch(K){alert("   : "+(K.message||"Unknown Error"))}finally{se(null)}},re=N.useMemo(()=>{const K=he.toLowerCase();return W.filter(oe=>{const x=oe.category===k,H=oe.name.toLowerCase().includes(K),$=(oe.sku_code||"").toLowerCase().includes(K);return x&&(H||$)})},[W,k,he]);return l?c.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-slate-950/60 backdrop-blur-sm p-6 animate-in fade-in duration-200",children:[Te&&c.jsx("div",{className:"absolute inset-0 z-[110] flex items-center justify-center bg-black/50 backdrop-blur-sm",children:c.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-2xl max-w-md w-full mx-4 animate-in zoom-in-95 duration-200",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[c.jsx("div",{className:"w-10 h-10 rounded-full bg-rose-100 flex items-center justify-center",children:c.jsx("i",{className:"fas fa-exclamation-triangle text-rose-600"})}),c.jsx("h3",{className:"text-sm font-black text-slate-800 uppercase tracking-tight",children:"Delete Item"})]}),c.jsx("p",{className:"text-xs text-slate-600 mb-6",children:"   ?     ."}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:()=>se(null),className:"flex-1 py-2 px-4 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded font-bold text-xs uppercase tracking-wide transition-colors",children:"Cancel"}),c.jsx("button",{onClick:R,className:"flex-1 py-2 px-4 bg-rose-600 hover:bg-rose-700 text-white rounded font-bold text-xs uppercase tracking-wide transition-colors",children:"Delete"})]})]})}),c.jsxs("div",{className:"bg-white rounded-xl w-full max-w-6xl h-[85vh] shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200 flex text-xs font-sans border border-slate-200",children:[c.jsxs("div",{className:"w-48 bg-slate-900 text-slate-300 flex flex-col border-r border-slate-800 flex-shrink-0",children:[c.jsxs("div",{className:"p-4 border-b border-slate-800 flex items-center gap-2 mb-2",children:[c.jsx("div",{className:"w-6 h-6 bg-blue-600 rounded flex items-center justify-center text-white shadow-sm shadow-blue-500/20",children:c.jsx("i",{className:"fas fa-cog text-xs"})}),c.jsx("span",{className:"font-bold text-white tracking-tight text-sm",children:"Admin"})]}),c.jsxs("div",{className:"px-2 space-y-1",children:[c.jsxs("button",{onClick:()=>b("general"),className:`w-full flex items-center gap-3 px-3 py-2 rounded transition-all text-[11px] font-bold uppercase tracking-wide ${g==="general"?"bg-blue-600 text-white shadow-lg shadow-blue-900/20":"text-slate-400 hover:bg-white/5 hover:text-slate-200"}`,children:[c.jsx("i",{className:"fas fa-sliders-h w-4 text-center"})," General"]}),c.jsxs("button",{onClick:()=>b("catalog"),className:`w-full flex items-center gap-3 px-3 py-2 rounded transition-all text-[11px] font-bold uppercase tracking-wide ${g==="catalog"?"bg-blue-600 text-white shadow-lg shadow-blue-900/20":"text-slate-400 hover:bg-white/5 hover:text-slate-200"}`,children:[c.jsx("i",{className:"fas fa-tags w-4 text-center"})," Catalog"]})]}),c.jsx("div",{className:"mt-auto p-4 border-t border-slate-800",children:c.jsx("div",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-widest text-center",children:"VETPULSE v1.9.5"})})]}),c.jsxs("div",{className:"flex-1 flex flex-col bg-slate-50 overflow-hidden relative",children:[c.jsxs("div",{className:"h-12 border-b border-slate-200 bg-white px-5 flex items-center justify-between flex-shrink-0 shadow-sm z-20",children:[c.jsx("div",{children:c.jsxs("h2",{className:"font-black text-slate-800 text-sm uppercase tracking-tight flex items-center gap-2",children:[g==="general"?c.jsx("i",{className:"fas fa-sliders-h text-slate-400"}):c.jsx("i",{className:"fas fa-tags text-slate-400"}),g==="general"?"Clinic Settings":"Service Catalog Management"]})}),c.jsx("button",{onClick:s,className:"w-7 h-7 rounded-lg hover:bg-slate-100 text-slate-400 hover:text-slate-700 transition-all flex items-center justify-center",children:c.jsx("i",{className:"fas fa-times text-sm"})})]}),c.jsxs("div",{className:"flex-1 overflow-hidden relative",children:[g==="general"&&c.jsx("div",{className:"h-full overflow-y-auto custom-scrollbar p-5",children:c.jsxs("div",{className:"grid grid-cols-12 gap-6",children:[c.jsxs("div",{className:"col-span-4 space-y-6",children:[c.jsxs("div",{className:"bg-white border border-slate-200 rounded-lg p-4 shadow-sm",children:[c.jsxs("div",{className:"flex items-center justify-between mb-3 border-b border-slate-100 pb-2",children:[c.jsx("h3",{className:"text-[11px] font-black text-slate-700 uppercase tracking-wide",children:"Operation Hours"}),c.jsx("button",{onClick:()=>d({...r,isLunchEnabled:!r.isLunchEnabled}),className:`w-8 h-4 rounded-full transition-all relative ${r.isLunchEnabled?"bg-blue-500":"bg-slate-200"}`,children:c.jsx("div",{className:`absolute top-0.5 w-3 h-3 bg-white rounded-full transition-all shadow-sm ${r.isLunchEnabled?"left-4.5":"left-0.5"}`})})]}),c.jsx("div",{className:`space-y-3 transition-opacity ${r.isLunchEnabled?"opacity-100":"opacity-40 pointer-events-none"}`,children:c.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-[9px] font-bold text-slate-400 block mb-1",children:"Lunch Start"}),c.jsx("input",{type:"time",value:r.lunchStartTime,onChange:K=>d({...r,lunchStartTime:K.target.value}),className:"w-full bg-slate-50 border border-slate-200 rounded px-2 py-1.5 text-xs font-bold text-slate-900 outline-none focus:border-blue-500"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-[9px] font-bold text-slate-400 block mb-1",children:"Lunch End"}),c.jsx("input",{type:"time",value:r.lunchEndTime,onChange:K=>d({...r,lunchEndTime:K.target.value}),className:"w-full bg-slate-50 border border-slate-200 rounded px-2 py-1.5 text-xs font-bold text-slate-900 outline-none focus:border-blue-500"})]})]})})]}),c.jsxs("div",{className:"bg-white border border-slate-200 rounded-lg p-4 shadow-sm",children:[c.jsxs("h3",{className:"text-[11px] font-black text-slate-700 uppercase tracking-wide mb-3 border-b border-slate-100 pb-2 flex items-center gap-2",children:[c.jsx("i",{className:"fas fa-server text-blue-500"})," Local Image Server"]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-[9px] font-bold text-slate-400 block",children:"Server URL (HTTPS Required for Camera)"}),c.jsx("input",{type:"text",value:r.imageServerUrl||"",onChange:K=>d({...r,imageServerUrl:K.target.value}),placeholder:"https://192.168.0.x:3000",className:"w-full bg-slate-50 border border-slate-200 rounded px-3 py-2 text-xs font-mono font-medium text-slate-900 outline-none focus:border-blue-500 placeholder:text-slate-300"}),c.jsxs("p",{className:"text-[9px] text-slate-400 leading-relaxed",children:["* Enter the URL of your local hospital PC running the image server script.",c.jsx("br",{}),"* If using self-signed certs, install profile on iPad."]})]})]}),c.jsxs("div",{className:"bg-white border border-slate-200 rounded-lg p-4 shadow-sm",children:[c.jsx("h3",{className:"text-[11px] font-black text-slate-700 uppercase tracking-wide mb-3 border-b border-slate-100 pb-2",children:"Register Practitioner"}),c.jsxs("form",{onSubmit:je,className:"space-y-3",children:[c.jsx("input",{type:"text",value:S,onChange:K=>j(K.target.value),placeholder:"Name (e.g. Dr. Kim)",className:"w-full bg-slate-50 border border-slate-200 rounded px-3 py-2 text-xs font-bold text-slate-900 outline-none focus:border-blue-500"}),c.jsx("input",{type:"text",value:T,onChange:K=>C(K.target.value),placeholder:"Specialty (e.g. Surgery)",className:"w-full bg-slate-50 border border-slate-200 rounded px-3 py-2 text-xs font-bold text-slate-900 outline-none focus:border-blue-500"}),c.jsx("input",{type:"email",value:p,onChange:K=>y(K.target.value),placeholder:"Google Email",className:"w-full bg-slate-50 border border-slate-200 rounded px-3 py-2 text-xs font-bold text-slate-900 outline-none focus:border-blue-500"}),c.jsx("button",{type:"submit",disabled:q,className:"w-full py-2 bg-slate-900 text-white rounded font-black text-[10px] uppercase tracking-widest hover:bg-black disabled:opacity-50",children:q?"Processing...":"Register Staff"})]})]})]}),c.jsxs("div",{className:"col-span-8 bg-white border border-slate-200 rounded-lg overflow-hidden shadow-sm flex flex-col",children:[c.jsxs("div",{className:"px-4 py-3 border-b border-slate-200 bg-slate-50/50 flex justify-between items-center",children:[c.jsx("h3",{className:"text-[11px] font-black text-slate-700 uppercase tracking-wide",children:"Active Staff List"}),c.jsxs("span",{className:"text-[10px] font-bold text-slate-400",children:[i.length," Members"]})]}),c.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:c.jsxs("table",{className:"w-full text-left border-collapse",children:[c.jsx("thead",{className:"bg-slate-50 sticky top-0 z-10",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-2 border-b border-slate-200 text-[9px] font-black text-slate-400 uppercase tracking-wider",children:"Profile"}),c.jsx("th",{className:"px-4 py-2 border-b border-slate-200 text-[9px] font-black text-slate-400 uppercase tracking-wider",children:"Specialty"}),c.jsx("th",{className:"px-4 py-2 border-b border-slate-200 text-[9px] font-black text-slate-400 uppercase tracking-wider",children:"Contact (Email)"}),c.jsx("th",{className:"px-4 py-2 border-b border-slate-200 w-10"})]})}),c.jsx("tbody",{className:"divide-y divide-slate-100",children:i.map(K=>c.jsxs("tr",{className:"hover:bg-blue-50/50 group transition-colors",children:[c.jsx("td",{className:"px-4 py-2.5",children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("img",{src:K.avatar,className:"w-8 h-8 rounded-lg object-cover border border-slate-200",alt:""}),c.jsx("span",{className:"text-xs font-bold text-slate-800",children:K.name})]})}),c.jsx("td",{className:"px-4 py-2.5",children:c.jsx("span",{className:"text-[10px] font-bold text-blue-600 bg-blue-50 px-2 py-0.5 rounded",children:K.specialty})}),c.jsx("td",{className:"px-4 py-2.5",children:c.jsx("span",{className:"text-[11px] font-medium text-slate-500 font-mono",children:K.email})}),c.jsx("td",{className:"px-4 py-2.5 text-center",children:c.jsx("button",{onClick:()=>h(K.id),className:"text-slate-300 hover:text-rose-500 opacity-0 group-hover:opacity-100 transition-opacity",children:c.jsx("i",{className:"fas fa-trash-alt"})})})]},K.id))})]})})]})]})}),g==="catalog"&&c.jsxs("div",{className:"flex h-full",children:[c.jsxs("div",{className:"w-72 bg-white border-r border-slate-200 flex flex-col flex-shrink-0 z-10",children:[c.jsxs("div",{className:"p-4 border-b border-slate-100 bg-slate-50/30",children:[c.jsxs("h3",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest mb-3 flex items-center gap-1",children:[c.jsx("i",{className:"fas fa-plus-circle text-blue-500"})," Add New Item"]}),c.jsxs("form",{onSubmit:ne,className:"space-y-2",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-[9px] font-bold text-slate-400",children:"Category"}),c.jsx("select",{value:k,onChange:K=>te(K.target.value),className:"w-full bg-white border border-slate-200 rounded px-2 py-1.5 text-xs font-bold text-slate-800 outline-none focus:border-blue-500",children:Dm.map(K=>c.jsx("option",{value:K,children:K},K))})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-[9px] font-bold text-slate-400",children:"Item Name"}),c.jsx("input",{required:!0,type:"text",value:ae.name,onChange:K=>we({...ae,name:K.target.value}),className:"w-full bg-white border border-slate-200 rounded px-2 py-1.5 text-xs font-bold text-slate-800 outline-none focus:border-blue-500 placeholder:text-slate-300",placeholder:"e.g. Basic Exam"})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-[9px] font-bold text-slate-400",children:"Price ()"}),c.jsx("input",{required:!0,type:"number",value:ae.price,onChange:K=>we({...ae,price:K.target.value}),className:"w-full bg-white border border-slate-200 rounded px-2 py-1.5 text-xs font-bold text-slate-800 outline-none focus:border-blue-500 placeholder:text-slate-300 text-right",placeholder:"0"})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-[9px] font-bold text-slate-400",children:"SKU"}),c.jsx("input",{type:"text",value:ae.sku,onChange:K=>we({...ae,sku:K.target.value.toUpperCase()}),className:"w-full bg-white border border-slate-200 rounded px-2 py-1.5 text-xs font-bold text-slate-800 outline-none focus:border-blue-500 placeholder:text-slate-300 uppercase",placeholder:"CODE"})]})]}),c.jsx("button",{disabled:be,type:"submit",className:"w-full mt-2 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded font-black text-[10px] uppercase tracking-widest shadow-sm active:scale-95 transition-all disabled:opacity-50",children:be?"Saving...":"Add Item"})]})]}),c.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-2",children:[c.jsx("h3",{className:"px-2 py-2 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Filter By Category"}),c.jsx("div",{className:"space-y-0.5",children:Dm.map(K=>c.jsxs("button",{onClick:()=>te(K),className:`w-full flex justify-between items-center px-3 py-2 rounded text-[10px] font-bold uppercase transition-all ${k===K?"bg-blue-50 text-blue-700 border border-blue-100 shadow-sm":"text-slate-500 hover:bg-slate-50 hover:text-slate-800 border border-transparent"}`,children:[c.jsx("span",{children:K}),c.jsx("span",{className:`px-1.5 py-0.5 rounded text-[9px] ${k===K?"bg-blue-200 text-blue-800":"bg-slate-100 text-slate-400"}`,children:W.filter(oe=>oe.category===K).length})]},K))})]})]}),c.jsxs("div",{className:"flex-1 flex flex-col bg-white overflow-hidden",children:[c.jsxs("div",{className:"px-5 py-3 border-b border-slate-100 flex items-center justify-between bg-white",children:[c.jsxs("h3",{className:"text-xs font-black text-slate-800 uppercase tracking-tight flex items-center gap-2",children:[c.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-blue-500"})," ",k]}),c.jsxs("div",{className:"relative w-64",children:[c.jsx("input",{type:"text",placeholder:"Search in category...",value:he,onChange:K=>fe(K.target.value),className:"w-full pl-8 pr-3 py-1.5 bg-slate-50 border border-slate-200 rounded-full text-xs font-bold text-slate-700 outline-none focus:border-blue-500 transition-all"}),c.jsx("i",{className:"fas fa-search absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 text-xs"})]})]}),c.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:re.length===0?c.jsxs("div",{className:"h-full flex flex-col items-center justify-center opacity-30",children:[c.jsx("i",{className:"fas fa-box-open text-4xl mb-3 text-slate-300"}),c.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"No Items Found"})]}):c.jsx("div",{className:"divide-y divide-slate-50",children:re.map(K=>c.jsxs("div",{className:"grid grid-cols-12 px-5 py-2 items-center hover:bg-blue-50/50 group transition-colors",children:[c.jsxs("div",{className:"col-span-6 flex items-center gap-2 min-w-0",children:[c.jsx("span",{className:"text-[11px] font-bold text-slate-700 truncate",children:K.name}),K.sku_code&&c.jsx("span",{className:"text-[9px] bg-slate-100 text-slate-500 px-1.5 py-0.5 rounded font-mono border border-slate-200 uppercase",children:K.sku_code})]}),c.jsx("div",{className:"col-span-4 text-right",children:c.jsxs("span",{className:"text-[11px] font-bold text-slate-600 font-mono",children:["",K.default_price.toLocaleString()]})}),c.jsx("div",{className:"col-span-2 text-center",children:c.jsx("button",{onClick:oe=>{oe.stopPropagation(),A(K.id)},className:"w-8 h-8 rounded-lg hover:bg-rose-50 text-slate-300 hover:text-rose-500 transition-all flex items-center justify-center mx-auto border border-transparent hover:border-rose-100",children:c.jsx("i",{className:"fas fa-trash-alt text-[11px]"})})})]},K.id))})})]})]})]})]})]})]}):null},fx={DHPPL:"VAC-DHPPL",Corona:"VAC-COR","Kennel Cough":"VAC-KC",Rabies:"VAC-RAB","FVRC P+C":"VAC-CVRP","FVRC P+C + Leukemia":"VAC-CVRP",Influenza:"VAC-CIV"},Sn=l=>{if(!l)return"";try{const s=new Date(l);return isNaN(s.getTime())?"":s.toISOString().split("T")[0]}catch{return""}},$c=l=>{if(!l)return"text-blue-950";const s=new Date(l),i=new Date;i.setHours(0,0,0,0),s.setHours(0,0,0,0);const r=s.getTime()-i.getTime(),d=Math.ceil(r/(1e3*60*60*24));return d<0?"text-rose-600":d<=7?"text-emerald-600":"text-blue-950"},hx=({initialDate:l,onSelect:s,onClose:i,position:r})=>{const[d,f]=N.useState(l?new Date(l):new Date),h=N.useRef(null);N.useEffect(()=>{const j=T=>{h.current&&!h.current.contains(T.target)&&i()};return document.addEventListener("mousedown",j),()=>document.removeEventListener("mousedown",j)},[i]);const g=d.getFullYear(),b=d.getMonth(),p=new Date(g,b+1,0).getDate(),y=new Date(g,b,1).getDay(),S=[];for(let j=0;j<y;j++)S.push(null);for(let j=1;j<=p;j++)S.push(j);return c.jsxs("div",{ref:h,className:"fixed z-[200] bg-white border border-slate-300 shadow-2xl rounded-lg p-2 w-48 animate-in zoom-in-95 duration-150",style:{left:r.x,top:r.y},onClick:j=>j.stopPropagation(),children:[c.jsxs("div",{className:"flex justify-between items-center mb-2 px-1",children:[c.jsx("button",{onClick:()=>f(new Date(g,b-1,1)),className:"text-slate-400 hover:text-blue-600",children:c.jsx("i",{className:"fas fa-chevron-left text-[10px]"})}),c.jsxs("span",{className:"text-[10px] font-black text-slate-900 uppercase",children:[g,".",String(b+1).padStart(2,"0")]}),c.jsx("button",{onClick:()=>f(new Date(g,b+1,1)),className:"text-slate-400 hover:text-blue-600",children:c.jsx("i",{className:"fas fa-chevron-right text-[10px]"})})]}),c.jsxs("div",{className:"grid grid-cols-7 gap-1",children:[["S","M","T","W","T","F","S"].map(j=>c.jsx("div",{className:"text-[8px] font-black text-slate-400 text-center",children:j},j)),S.map((j,T)=>c.jsx("div",{onClick:()=>j&&s(new Date(g,b,j+1).toISOString().split("T")[0]),className:`h-5 flex items-center justify-center text-[10px] rounded cursor-pointer transition-colors ${j?"hover:bg-blue-600 hover:text-white font-bold text-slate-700":""}`,children:j},T))]}),c.jsx("button",{onClick:()=>s(new Date().toISOString().split("T")[0]),className:"w-full mt-2 py-1 bg-slate-100 hover:bg-slate-200 text-[9px] font-black text-slate-600 rounded uppercase",children:"Today"})]})},mx=({patient:l,onUpdatePatient:s})=>{var ge;const i=N.useRef(null),[r,d]=N.useState([]),[f,h]=N.useState([]),[g,b]=N.useState(null),[p,y]=N.useState(null),[S,j]=N.useState(""),[T,C]=N.useState(["weight","monitoring","memo","vaccines"]),[q,L]=N.useState(null),[W,Z]=N.useState(null),[k,te]=N.useState({x:50,y:50}),[he,fe]=N.useState(!1),[ae,we]=N.useState(null),[be,ke]=N.useState(null),[Te,se]=N.useState(!1),[me,je]=N.useState(""),[ne,A]=N.useState(null),[R,re]=N.useState(!1),[K,oe]=N.useState((l==null?void 0:l.medical_memo)||"");N.useEffect(()=>{oe((l==null?void 0:l.medical_memo)||"")},[l==null?void 0:l.medical_memo]),N.useEffect(()=>{g&&!Te&&je(g.long_term_med_info||"")},[g,Te]),N.useEffect(()=>{const Y=F=>{F.key==="Escape"&&(ke(null),we(null),se(!1),A(null),re(!1))};return window.addEventListener("keydown",Y,{capture:!0}),()=>window.removeEventListener("keydown",Y,{capture:!0})},[]);const x=N.useCallback(async()=>{if(!(l!=null&&l.id))return;const Y=await ue.from("patient_weights").select("*").eq("patient_id",l.id).order("recorded_at",{ascending:!1}).limit(7);Y.data&&d(Y.data);const F=l.species===At.CAT?"patient_vaccination_feline":"patient_vaccination_canine",le=await ue.from(F).select("*").eq("patient_id",l.id);le.data&&h(le.data);const D=await ue.from("patient_reminders").select("*").eq("patient_id",l.id).single();D.data?b(D.data):b(null);const I=await ue.from("patient_parasites").select("*").eq("patient_id",l.id).single();I.data?y(I.data):y(null)},[l==null?void 0:l.id,l==null?void 0:l.species]);N.useEffect(()=>{l!=null&&l.id&&x()},[x,l==null?void 0:l.id]);const H=async(Y,F)=>{await s({[Y]:F})},$=async()=>{if(!(l!=null&&l.id)||!S||isNaN(parseFloat(S)))return;const Y=parseFloat(S),{data:F,error:le}=await ue.from("patient_weights").insert([{patient_id:l.id,weight:Y,recorded_at:new Date().toISOString()}]).select();!le&&F&&(d(D=>[F[0],...D]),j(""),await s({weight:Y}))},J=async(Y,F)=>{const{error:le}=await ue.from("patient_weights").update({weight:F}).eq("id",Y);le||(d(D=>D.map(I=>I.id===Y?{...I,weight:F}:I)),ke(null),r.length>0&&r[0].id===Y&&await s({weight:F}))},ce=Y=>{Y.preventDefault(),fe(!0)},ve=N.useCallback(Y=>{if(!he||!i.current)return;const F=i.current.getBoundingClientRect();te({x:Math.max(20,Math.min(80,(Y.clientX-F.left)/F.width*100)),y:Math.max(20,Math.min(80,(Y.clientY-F.top)/F.height*100))})},[he]),ye=N.useCallback(()=>fe(!1),[]);if(N.useEffect(()=>(he?(window.addEventListener("mousemove",ve),window.addEventListener("mouseup",ye)):(window.removeEventListener("mousemove",ve),window.removeEventListener("mouseup",ye)),()=>{window.removeEventListener("mousemove",ve),window.removeEventListener("mouseup",ye)}),[he,ve,ye]),!l)return c.jsx("div",{className:"h-full flex items-center justify-center text-slate-300 text-xs font-black uppercase",children:"Select Patient"});const qe=(Y,F,le=0)=>{if(!Y)return"";const D=new Date(Y);if(F==="heartworm"||F==="external")D.setMonth(D.getMonth()+1);else if(F==="internal")D.setMonth(D.getMonth()+3);else if(F==="scaling"||F==="antibody")D.setFullYear(D.getFullYear()+1);else if(F==="med"){const I=(g==null?void 0:g.med_interval_days)||30;D.setDate(D.getDate()+I)}else F==="DHPPL"||F==="Corona"||F==="Kennel Cough"||F==="Influenza"?le>=(F==="DHPPL"?5:2)?D.setFullYear(D.getFullYear()+1):D.setDate(D.getDate()+14):["FVRC P+C","FVRC P+C + Leukemia"].includes(F)?le>=3?D.setFullYear(D.getFullYear()+1):D.setDate(D.getDate()+21):F==="Rabies"&&D.setFullYear(D.getFullYear()+1);return D.toISOString().split("T")[0]},Ue=async(Y,F,le,D)=>{let I=D;le&&!I&&(I=qe(le,Y,F));const pe=l.species===At.CAT?"patient_vaccination_feline":"patient_vaccination_canine",{error:ze}=await ue.from(pe).upsert({patient_id:l.id,vaccine_name:Y,current_round:F,last_date:le||null,next_date:I||null},{onConflict:"patient_id, vaccine_name"});if(!ze&&(x(),le&&(l!=null&&l.id))){const Ye=fx[Y];if(Ye)try{const{data:Xe}=await ue.from("service_catalog").select("*").ilike("sku_code",Ye).single();if(Xe){let{data:Ie}=await ue.from("billing_invoices").select("id").eq("patient_id",l.id).eq("status","Unpaid").single();if(!Ie){const{data:vt}=await ue.from("billing_invoices").insert({patient_id:l.id,status:"Unpaid"}).select().single();Ie=vt}Ie&&await ue.from("billing_items").insert({invoice_id:Ie.id,service_id:Xe.id,item_name:Xe.name,category:Xe.category,unit_price:Xe.default_price,quantity:1,total_price:Xe.default_price,created_at:new Date().toISOString()})}}catch(Xe){console.error("Auto-billing failed:",Xe)}}},ie=async(Y,F,le,D)=>{let I=le;F&&I===void 0&&(I=qe(F,Y));const pe={patient_id:l.id,...D};F!==void 0&&(pe[`last_${Y}_date`]=F),I!==void 0&&(pe[`next_${Y}_date`]=I);const{error:ze}=await ue.from("patient_reminders").upsert(pe,{onConflict:"patient_id"});ze||x()},de=async(Y,F,le)=>{let D=le;F&&D===void 0&&(D=qe(F,Y));const I={patient_id:l.id};F!==void 0&&(I[`last_${Y}_date`]=F),D!==void 0&&(I[`next_${Y}_date`]=D);const{error:pe}=await ue.from("patient_parasites").upsert(I,{onConflict:"patient_id"});pe||x()},Q=(Y,F,le,D)=>{Y.preventDefault(),we({type:F,key:le,field:D,x:Y.clientX,y:Math.min(Y.clientY,window.innerHeight-250)})},G=async Y=>{if(!ae)return;const{type:F,key:le,field:D}=ae;if(F==="vaccine"){const I=f.find(Ye=>Ye.vaccine_name===le),pe=D.includes("next");let ze=(I==null?void 0:I.current_round)||0;pe||(ze+=1),await Ue(le,ze,pe?(I==null?void 0:I.last_date)||null:Y,pe?Y:null)}else if(F==="reminder"){const I=g==null?void 0:g[`last_${le}_date`];await ie(le,D.includes("next")?I:Y,D.includes("next")?Y:void 0)}else if(F==="parasite"){const I=p==null?void 0:p[`last_${le}_date`];await de(le,D.includes("next")?I:Y,D.includes("next")?Y:void 0)}we(null)},w=()=>{if(r.length===0)return c.jsx("div",{className:"text-[10px] text-slate-500 text-center py-4 italic font-bold",children:"No records"});const F=Math.max(...r.map(Ie=>Ie.weight),1)+.5,le={top:4,bottom:8,left:10,right:4},D=100,I=100,pe=D-le.left-le.right,ze=I-le.top-le.bottom,Ye=pe/r.length,Xe=Math.max(.5,Ye*.4);return c.jsxs("svg",{viewBox:`0 0 ${D} ${I}`,className:"w-full h-full overflow-visible",children:[c.jsx("line",{x1:le.left,y1:le.top,x2:le.left,y2:le.top+ze,stroke:"#000000",strokeWidth:"0.2"}),[0,F/2,F].map((Ie,vt)=>{const Mt=le.top+ze-Ie/F*ze;return c.jsxs("g",{children:[c.jsx("line",{x1:le.left-.5,y1:Mt,x2:D-le.right,y2:Mt,stroke:"#e2e8f0",strokeWidth:"0.1"}),c.jsx("text",{x:le.left-2,y:Mt+.6,textAnchor:"end",className:"fill-slate-900 font-black",style:{fontSize:"3px"},children:Ie.toFixed(1)})]},vt)}),[...r].reverse().map((Ie,vt)=>{const Mt=Ie.weight/F*ze,Cs=le.left+vt*Ye+Ye/2-Xe/2,kn=le.top+ze-Mt;return c.jsxs("g",{onDoubleClick:()=>ke(Ie),className:"cursor-pointer group",children:[c.jsx("rect",{x:Cs,y:kn,width:Xe,height:Mt,fill:vt===r.length-1?"#2563eb":"#475569",rx:"0.1",className:"group-hover:fill-blue-400"}),c.jsx("text",{x:Cs+Xe/2,y:kn-1.5,textAnchor:"middle",className:"font-black fill-black",style:{fontSize:"3.5px"},children:Ie.weight})]},vt)})]})},M={memo:c.jsxs("div",{className:"bg-white border border-slate-300 p-2 flex flex-col overflow-hidden rounded-sm",draggable:!0,onDragStart:()=>L("memo"),onDragOver:Y=>{Y.preventDefault(),Z("memo")},onDrop:()=>{if(q&&q!=="memo"){const Y=[...T],F=Y.indexOf(q),le=Y.indexOf("memo");[Y[F],Y[le]]=[Y[le],Y[F]],C(Y)}},children:[c.jsxs("div",{className:"flex items-center gap-1.5 mb-1 border-b border-slate-300 pb-1 flex-shrink-0 cursor-grab active:cursor-grabbing",children:[c.jsx("i",{className:"fas fa-sticky-note text-blue-700 text-[9px]"}),c.jsx("span",{className:"text-[10px] font-black text-slate-950 uppercase tracking-tighter",children:"Clinical Notes"})]}),c.jsx("textarea",{value:K,onChange:Y=>oe(Y.target.value),onBlur:()=>H("medical_memo",K),className:"flex-1 bg-slate-50 border border-slate-200 rounded p-1.5 text-[11px] text-slate-950 font-bold outline-none focus:bg-white focus:border-blue-500 resize-none"})]},"memo"),weight:c.jsxs("div",{className:"bg-white border border-slate-300 p-2 flex flex-col overflow-hidden rounded-sm",children:[c.jsxs("div",{className:"flex items-center justify-between mb-1 border-b border-slate-300 pb-1 flex-shrink-0",children:[c.jsxs("div",{className:"flex items-center gap-1.5",children:[c.jsx("i",{className:"fas fa-chart-line text-blue-700 text-[9px]"}),c.jsx("span",{className:"text-[10px] font-black text-slate-950 uppercase tracking-tighter",children:"Weight History"})]}),c.jsxs("div",{className:"flex gap-1",children:[c.jsx("input",{type:"number",step:"0.1",value:S,onChange:Y=>j(Y.target.value),className:"w-11 h-5 bg-slate-50 border border-slate-300 rounded text-[10px] px-1 outline-none font-black",placeholder:"0.0"}),c.jsx("button",{onClick:$,className:"h-5 px-2 bg-slate-900 text-white rounded text-[9px] font-black",children:"ADD"})]})]}),c.jsx("div",{className:"flex-1 relative overflow-hidden bg-slate-50 rounded border border-slate-100 p-0.5",children:w()})]},"weight"),monitoring:c.jsxs("div",{className:"bg-white border border-slate-300 p-2 overflow-y-auto custom-scrollbar rounded-sm",children:[c.jsxs("div",{className:"flex items-center gap-1.5 mb-1 border-b border-slate-300 pb-1",children:[c.jsx("i",{className:"fas fa-clipboard-check text-blue-700 text-[9px]"}),c.jsx("span",{className:"text-[10px] font-black text-slate-950 uppercase tracking-tighter",children:"Recurring Items"})]}),c.jsx("div",{className:"space-y-2 mt-1.5",children:[{label:"Long-term Med",id:"med",data:g},{label:"Scaling",id:"scaling",data:g},{label:"Antibody",id:"antibody",data:g}].map(Y=>{var le,D;const F=(le=Y.data)==null?void 0:le[`next_${Y.id}_date`];return c.jsxs("div",{className:"bg-slate-50 p-2 border border-slate-200 rounded flex flex-col gap-1.5",children:[c.jsxs("div",{className:"flex items-center gap-1.5",children:[c.jsx("span",{className:"text-[10px] font-black text-slate-900 w-24",children:Y.label}),c.jsxs("div",{className:"flex gap-1 items-center flex-1",children:[c.jsx("input",{type:"date",readOnly:!0,value:Sn((D=Y.data)==null?void 0:D[`last_${Y.id}_date`]),onDoubleClick:I=>Q(I,"reminder",Y.id,"last"),className:"bg-white border border-slate-300 rounded text-[11px] text-slate-950 p-0.5 outline-none flex-1 font-black cursor-pointer"}),c.jsx("span",{className:"text-[11px] text-slate-950 font-black",children:""}),c.jsx("input",{type:"date",readOnly:!0,value:Sn(F),onDoubleClick:I=>Q(I,"reminder",Y.id,"next"),className:`bg-blue-50 border-blue-200 rounded text-[11px] p-0.5 flex-1 font-black cursor-pointer outline-none transition-colors ${$c(F)}`})]})]}),Y.id==="med"&&c.jsx("div",{className:"pl-1 border-l-2 border-blue-200 ml-1 flex flex-col gap-1",children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"text",value:Te?me:(g==null?void 0:g.long_term_med_info)||"",placeholder:"[Medication Info]",readOnly:!Te,onDoubleClick:()=>{je((g==null?void 0:g.long_term_med_info)||""),se(!0)},onChange:I=>je(I.target.value),onBlur:()=>{se(!1),(g==null?void 0:g.long_term_med_info)!==me&&ie("med",void 0,void 0,{long_term_med_info:me})},onKeyDown:I=>{I.key==="Enter"&&I.currentTarget.blur()},className:`flex-1 text-[10px] p-1 rounded font-black outline-none transition-all ${Te?"bg-white border border-blue-500":"bg-transparent text-slate-500 hover:bg-slate-100/50"}`}),c.jsxs("div",{className:"flex items-center gap-1 bg-slate-200 rounded px-1",children:[c.jsx("i",{className:"fas fa-clock text-[8px] text-slate-500"}),R?c.jsx("input",{autoFocus:!0,type:"number",className:"w-8 text-[9px] bg-white text-center outline-none",defaultValue:(g==null?void 0:g.med_interval_days)||30,onBlur:I=>{re(!1),ie("med",void 0,void 0,{med_interval_days:parseInt(I.target.value)||30})}}):c.jsxs("span",{onDoubleClick:()=>re(!0),className:"text-[9px] font-bold text-slate-600 cursor-pointer",children:[(g==null?void 0:g.med_interval_days)||30,"d"]})]})]})})]},Y.id)})})]},"monitoring"),vaccines:c.jsxs("div",{className:"bg-white border border-slate-300 p-2 overflow-y-auto custom-scrollbar rounded-sm",children:[c.jsxs("div",{className:"flex items-center gap-1.5 mb-1 border-b border-slate-300 pb-1",children:[c.jsx("i",{className:"fas fa-syringe text-blue-700 text-[9px]"}),c.jsx("span",{className:"text-[10px] font-black text-slate-950 uppercase tracking-tighter",children:"Vaccines & Parasites"})]}),c.jsxs("div",{className:"grid grid-cols-1 gap-1.5 mt-1.5",children:[[{id:"heartworm",label:"Heartworm"},{id:"external",label:"External"},{id:"internal",label:"Internal"}].map(Y=>{const F=p==null?void 0:p[`next_${Y.id}_date`];return c.jsxs("div",{className:"flex items-center gap-1.5 bg-slate-50 p-1.5 border border-slate-200 rounded",children:[c.jsx("span",{className:"text-[10px] font-black text-slate-900 w-16",children:Y.label}),c.jsx("input",{type:"date",readOnly:!0,value:Sn(p==null?void 0:p[`last_${Y.id}_date`]),onDoubleClick:le=>Q(le,"parasite",Y.id,"last"),className:"bg-white border border-slate-300 rounded text-[11px] text-slate-950 p-0.5 outline-none flex-1 font-black cursor-pointer"}),c.jsx("input",{type:"date",readOnly:!0,value:Sn(F),onDoubleClick:le=>Q(le,"parasite",Y.id,"next"),className:`bg-blue-50 border-blue-200 rounded text-[11px] p-0.5 flex-1 font-black cursor-pointer outline-none transition-colors ${$c(F)}`})]},Y.id)}),c.jsx("div",{className:"h-px bg-slate-300 my-0.5"}),(l.species===At.CAT?["FVRC P+C","FVRC P+C + Leukemia","Rabies"]:["DHPPL","Corona","Kennel Cough","Influenza","Rabies"]).map(Y=>{const F=f.find(I=>I.vaccine_name===Y),le=(F==null?void 0:F.current_round)||0,D=F==null?void 0:F.next_date;return c.jsxs("div",{className:"flex items-center gap-1.5 bg-slate-50 p-1.5 border border-slate-200 rounded",children:[c.jsx("span",{className:"text-[10px] font-black text-slate-900 w-14 truncate",title:Y,children:Y}),c.jsx("div",{className:"relative w-8 flex justify-center",children:ne===Y?c.jsx("input",{autoFocus:!0,type:"number",defaultValue:le,onBlur:I=>{Ue(Y,parseInt(I.target.value)||0,(F==null?void 0:F.last_date)||null),A(null)},className:"w-8 h-5 text-center text-[10px] font-black border border-blue-500 rounded outline-none bg-white z-10 p-0"}):c.jsxs("span",{onDoubleClick:()=>A(Y),className:"w-8 h-5 flex items-center justify-center text-[10px] font-black text-slate-600 bg-slate-200/50 rounded cursor-pointer hover:bg-slate-200 hover:text-blue-600",children:[le,""]})}),c.jsx("input",{type:"date",readOnly:!0,value:Sn(F==null?void 0:F.last_date),onDoubleClick:I=>Q(I,"vaccine",Y,"last"),className:"bg-white border border-slate-300 rounded text-[11px] text-slate-950 p-0.5 outline-none flex-1 font-black cursor-pointer"}),c.jsx("input",{type:"date",readOnly:!0,value:Sn(D),onDoubleClick:I=>Q(I,"vaccine",Y,"next"),className:`bg-blue-50 border-blue-200 rounded text-[11px] p-0.5 flex-1 font-black cursor-pointer outline-none transition-colors ${$c(D)}`})]},Y)})]})]},"vaccines")};return c.jsxs("div",{ref:i,className:`relative grid gap-1 h-full bg-slate-300 p-0.5 transition-all duration-75 ${he?"cursor-move select-none":""}`,style:{gridTemplateColumns:`${k.x}% ${100-k.x}%`,gridTemplateRows:`${k.y}% ${100-k.y}%`},children:[T.map(Y=>M[Y]),c.jsx("div",{onMouseDown:ce,className:"absolute z-50 flex items-center justify-center cursor-move",style:{left:`${k.x}%`,top:`${k.y}%`,transform:"translate(-50%, -50%)",width:"24px",height:"24px"},children:c.jsx("div",{className:"w-6 h-6 rounded-full bg-white border border-slate-400 shadow-xl flex items-center justify-center",children:c.jsx("i",{className:"fas fa-plus text-[10px] text-slate-600"})})}),ae&&c.jsx(hx,{initialDate:ae.type==="vaccine"?(ge=f.find(Y=>Y.vaccine_name===ae.key))==null?void 0:ge[ae.field.includes("next")?"next_date":"last_date"]:ae.type==="reminder"?g==null?void 0:g[`${ae.field.includes("next")?"next":"last"}_${ae.key}_date`]:p==null?void 0:p[`${ae.field.includes("next")?"next":"last"}_${ae.key}_date`],position:{x:ae.x,y:ae.y},onSelect:G,onClose:()=>we(null)}),be&&c.jsx("div",{className:"absolute inset-0 z-[60] flex items-center justify-center bg-black/20 backdrop-blur-[1px]",children:c.jsxs("div",{className:"bg-white p-5 rounded-xl shadow-2xl border border-slate-300 w-64 animate-in zoom-in-95 duration-200",children:[c.jsx("h4",{className:"font-black text-slate-900 text-xs mb-4 uppercase",children:"Edit Weight Record"}),c.jsx("input",{type:"number",step:"0.01",autoFocus:!0,defaultValue:be.weight,onKeyDown:Y=>{Y.key==="Enter"&&J(be.id,parseFloat(Y.target.value))},className:"w-full bg-white border border-blue-200 rounded p-2 text-lg font-black text-blue-600 outline-none focus:border-blue-500 mb-4"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:()=>ke(null),className:"flex-1 py-2 bg-slate-100 text-slate-500 rounded font-black text-[10px]",children:"CANCEL"}),c.jsx("button",{onClick:()=>J(be.id,parseFloat(document.querySelector('input[type="number"]').value)),className:"flex-1 py-2 bg-blue-600 text-white rounded font-black text-[10px]",children:"UPDATE"})]})]})})]})},gx=(l,s)=>{const i=new Date;i.setHours(0,0,0,0),i.setDate(1),i.setFullYear(i.getFullYear()-l),i.setMonth(i.getMonth()-s);const r=i.getFullYear(),d=String(i.getMonth()+1).padStart(2,"0"),f=String(i.getDate()).padStart(2,"0");return`${r}-${d}-${f}`},px=l=>{if(!l)return{years:0,months:0};const[s,i,r]=l.split("-").map(Number),d=new Date(s,i-1,r),f=new Date;f.setHours(0,0,0,0);let h=f.getFullYear()-d.getFullYear(),g=f.getMonth()-d.getMonth();return(g<0||g===0&&f.getDate()<d.getDate())&&(h--,g+=12),{years:Math.max(0,h),months:Math.max(0,g)}},bx=({patients:l,vets:s,waitlist:i,selectedPatientId:r,showDashboard:d,isAnyModalOpen:f,onRegisterPatient:h,onUpdatePatient:g,onUpdateWaitlist:b,onAddToWaitlist:p,onRemoveFromWaitlist:y,onSelectPatient:S})=>{var le;const[j,T]=N.useState(""),[C,q]=N.useState(!1),[L,W]=N.useState(null),[Z,k]=N.useState(!1),[te,he]=N.useState(null),[fe,ae]=N.useState(null),[we,be]=N.useState(null),[ke,Te]=N.useState(320),[se,me]=N.useState(!1),je=N.useRef(null),[ne,A]=N.useState({}),[R,re]=N.useState([]),[K,oe]=N.useState(!1),[x,H]=N.useState({chartNumber:"",name:"",owner:"",phone:"",breed:"",species:At.DOG,gender:"Intact Male"}),[$,J]=N.useState(""),[ce,ve]=N.useState("");N.useEffect(()=>{(async()=>{const{data:I}=await ue.from("breeds").select("*").order("name");I&&re(I)})()},[]);const ye=N.useMemo(()=>{if(!x.species)return[];const D=R.filter(pe=>pe.species===x.species),I=x.breed.trim().toLowerCase();return I?D.filter(pe=>pe.name.toLowerCase().includes(I)):D},[R,x.species,x.breed]),qe=N.useCallback(()=>me(!0),[]),Ue=N.useCallback(()=>me(!1),[]),ie=N.useCallback(D=>{if(se){const I=D.clientX;I>=250&&I<=600&&Te(I)}},[se]);N.useEffect(()=>(window.addEventListener("mousemove",ie),window.addEventListener("mouseup",Ue),()=>{window.removeEventListener("mousemove",ie),window.removeEventListener("mouseup",Ue)}),[ie,Ue]);const de=N.useMemo(()=>{const D=j.trim().toLowerCase();if(D.length<1)return[];const I=D.replace(/[^0-9]/g,"");return l.filter(pe=>{const ze=pe.name.toLowerCase(),Ye=pe.owner.toLowerCase(),Xe=pe.phone.replace(/[^0-9]/g,""),Ie=(pe.chartNumber||"").toLowerCase();return ze.includes(D)||Ye.includes(D)||I.length>0&&Xe.includes(I)||Ie.includes(D)})},[j,l]),Q=async D=>{if(D.preventDefault(),!Z){k(!0);try{const I=gx(parseInt($)||0,parseInt(ce)||0);let pe=null;const ze={...x,birth_date:I,chart_number:x.chartNumber};delete ze.chartNumber,L?pe=await g(L,ze):pe=await h({...ze,avatar:`https://i.pravatar.cc/150?u=${x.name}_${Date.now()}`}),pe&&(q(!1),W(null),S(pe.id),H({chartNumber:"",name:"",owner:"",phone:"",breed:"",species:At.DOG,gender:"Intact Male"}),J(""),ve(""))}catch(I){console.error(I)}finally{k(!1)}}},G=(D,I)=>{D.preventDefault(),D.stopPropagation();const pe=px(I.birth_date);H({chartNumber:I.chartNumber||"",name:I.name,owner:I.owner,phone:I.phone,breed:I.breed,species:I.species,gender:I.gender}),J(String(pe.years)),ve(String(pe.months)),W(I.id),S(""),q(!0)},w=N.useMemo(()=>{const D={unassigned:[]};return s.forEach(I=>D[I.id]=[]),i.forEach(I=>{const pe=I.vetId;pe&&D[pe]?D[pe].push(I):D.unassigned.push(I)}),D},[i,s]),M=(D,I,pe)=>{he(I),ae(pe),D.dataTransfer.effectAllowed="move",D.currentTarget.classList.add("opacity-50")},ge=D=>{he(null),ae(null),be(null),D.currentTarget.classList.remove("opacity-50")},Y=async(D,I)=>{if(D.preventDefault(),!(!te||!fe)){if(fe==="waitlist"){const pe=i.find(ze=>ze.id===te);pe&&pe.vetId!==I&&await b(te,{vetId:I})}else if(fe==="patient"){const pe=l.find(ze=>ze.id===te);pe&&await p({patientId:pe.id,patientName:pe.name,breed:pe.breed,ownerName:pe.owner,vetId:I,memo:"",type:"Consultation"})}be(null)}},F=N.useMemo(()=>l.find(D=>D.id===r)||null,[r,l]);return c.jsxs("div",{className:`flex h-full bg-slate-200 overflow-hidden text-xs font-sans ${se?"cursor-col-resize select-none":""}`,children:[c.jsxs("div",{ref:je,style:{width:`${ke}px`},className:"relative border-r border-slate-300 flex flex-col bg-white z-10",children:[c.jsxs("div",{className:"p-3 border-b border-slate-200 bg-slate-50 flex items-center justify-between",children:[c.jsx("h2",{className:"font-bold text-gray-800",children:"Patient Search"}),c.jsx("button",{type:"button",onClick:()=>{q(!0),W(null),H({chartNumber:"",name:"",owner:"",phone:"",breed:"",species:At.DOG,gender:"Intact Male"}),J(""),ve(""),S("")},className:"px-2 py-1 bg-blue-600 text-white rounded text-[10px] font-bold hover:bg-blue-700",children:"Register New"})]}),c.jsx("div",{className:"p-2 border-b border-slate-200",children:c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"text",placeholder:"Name / Owner / Phone...",value:j,onChange:D=>T(D.target.value),className:"w-full pl-8 pr-2 py-1.5 bg-white border border-slate-300 rounded text-[11px] text-gray-900 outline-none focus:border-blue-500 font-bold placeholder:text-gray-400"}),c.jsx("i",{className:"fas fa-search absolute left-2.5 top-1/2 -translate-y-1/2 text-gray-400"})]})}),c.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:[j.trim().length>0&&c.jsxs("div",{className:"p-1",children:[c.jsx("div",{className:"px-2 py-1 bg-slate-100 text-[10px] font-bold text-gray-600 border-b border-slate-200 mb-1",children:"Search Results"}),de.map(D=>c.jsxs("div",{draggable:!0,onDragStart:I=>M(I,D.id,"patient"),onDragEnd:ge,onDoubleClick:()=>{q(!1),S(D.id)},className:`px-2 py-1.5 cursor-pointer border-b border-slate-100 flex items-center gap-2 hover:bg-blue-50 transition-colors group ${r===D.id?"bg-blue-50":""}`,children:[c.jsx("img",{src:D.avatar,className:"w-8 h-8 rounded border border-slate-200 flex-shrink-0",alt:""}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"font-black text-gray-900 truncate",children:D.name}),c.jsx("span",{className:"text-[10px] text-gray-600 font-bold",children:D.breed})]}),c.jsxs("div",{className:"text-[10px] text-gray-500 flex justify-between",children:[c.jsx("span",{className:"truncate font-bold",children:D.owner}),c.jsx("span",{className:"font-bold",children:D.phone.slice(-4)})]}),D.chartNumber&&c.jsxs("div",{className:"text-[9px] text-blue-600 font-mono mt-0.5",children:["#",D.chartNumber]})]}),c.jsx("button",{type:"button",onClick:I=>G(I,D),className:"w-7 h-7 rounded-lg flex items-center justify-center text-blue-600 bg-white border border-blue-200 shadow-sm hover:bg-blue-600 hover:text-white hover:border-blue-600 transition-all z-20",title:"Edit Patient Info",children:c.jsx("i",{className:"fas fa-edit text-[11px]"})})]},D.id))]}),c.jsxs("div",{className:"p-1",children:[c.jsxs("div",{className:"px-2 py-1 bg-slate-100 text-[10px] font-bold text-gray-500 border-b border-slate-200 mb-1 flex justify-between items-center",children:[c.jsx("span",{children:"Live Waitlist"}),c.jsxs("span",{className:"text-blue-600 font-bold",children:[i.length," cases"]})]}),s.map(D=>{var I;return c.jsxs("div",{className:`mb-1 border border-transparent rounded ${we===D.id?"bg-blue-50 border-blue-300":""}`,onDragOver:pe=>{pe.preventDefault(),be(D.id)},onDrop:pe=>Y(pe,D.id),children:[c.jsxs("div",{onClick:()=>A(pe=>({...pe,[D.id]:!pe[D.id]})),className:"px-2 py-1 bg-slate-50 border border-slate-200 flex justify-between items-center cursor-pointer hover:bg-slate-100",children:[c.jsx("span",{className:"font-black text-gray-700",children:D.name}),c.jsx("span",{className:"text-[10px] text-blue-600 font-black",children:((I=w[D.id])==null?void 0:I.length)||0})]}),!ne[D.id]&&c.jsx("div",{className:"min-h-[10px]",children:w[D.id].map(pe=>c.jsxs("div",{draggable:!0,onDragStart:ze=>M(ze,pe.id,"waitlist"),onDoubleClick:()=>S(pe.patientId),className:`px-2 py-1.5 border-b border-slate-100 flex justify-between items-center hover:bg-slate-50 group cursor-pointer ${r===pe.patientId?"bg-blue-50/30":""}`,children:[c.jsxs("div",{className:"flex-1 truncate",children:[c.jsx("span",{className:"font-black text-gray-900",children:pe.patientName}),c.jsxs("span",{className:"ml-1 text-[10px] text-gray-500 font-bold",children:["[",pe.type,"]"]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-[10px] text-gray-500 font-bold",children:pe.time}),c.jsx("button",{onClick:ze=>{ze.stopPropagation(),y(pe.id)},className:"text-gray-300 hover:text-rose-500 opacity-0 group-hover:opacity-100",children:c.jsx("i",{className:"fas fa-times"})})]})]},pe.id))})]},D.id)}),c.jsxs("div",{className:`mt-2 border border-transparent rounded ${we==="unassigned"?"bg-amber-50 border-amber-300":""}`,onDragOver:D=>{D.preventDefault(),be("unassigned")},onDrop:D=>Y(D,""),children:[c.jsxs("div",{onClick:()=>A(D=>({...D,unassigned:!D.unassigned})),className:"px-2 py-1 bg-amber-50 border border-amber-200 flex justify-between items-center cursor-pointer",children:[c.jsx("span",{className:"font-black text-amber-900 uppercase tracking-tighter",children:"Unassigned Queue"}),c.jsx("span",{className:"text-[10px] text-amber-900 font-black",children:((le=w.unassigned)==null?void 0:le.length)||0})]}),!ne.unassigned&&c.jsx("div",{className:"min-h-[10px]",children:w.unassigned.map(D=>c.jsxs("div",{draggable:!0,onDragStart:I=>M(I,D.id,"waitlist"),onDragEnd:ge,onDoubleClick:()=>S(D.patientId),className:"px-2 py-1.5 border-b border-slate-100 flex justify-between items-center bg-white hover:bg-amber-50 group cursor-pointer",children:[c.jsx("span",{className:"font-black text-gray-900 truncate",children:D.patientName}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-[10px] text-gray-500 font-bold",children:D.time}),c.jsx("button",{onClick:I=>{I.stopPropagation(),y(D.id)},className:"text-gray-300 hover:text-rose-500",children:c.jsx("i",{className:"fas fa-times"})})]})]},D.id))})]})]})]}),c.jsx("div",{onMouseDown:qe,className:"absolute top-0 right-0 w-1 h-full cursor-col-resize hover:bg-blue-400 transition-colors z-20"})]}),c.jsx("div",{className:"flex-1 flex flex-col overflow-hidden bg-slate-200 p-1",children:F?c.jsx("div",{className:"flex-1 bg-white border border-slate-300 rounded flex flex-col overflow-hidden shadow-sm relative",children:c.jsx("div",{className:"flex-1 overflow-hidden p-1 bg-slate-100",children:c.jsx(mx,{patient:d?F:null,onUpdatePatient:async D=>{await g(F.id,D)}})})}):C?c.jsx("div",{className:"flex-1 bg-white border border-slate-300 rounded p-6 overflow-y-auto",children:c.jsxs("form",{onSubmit:Q,className:"max-w-xl mx-auto space-y-6",children:[c.jsxs("div",{className:"flex items-center gap-3 border-b pb-4",children:[c.jsx("div",{className:"w-10 h-10 bg-blue-600 text-white rounded-xl flex items-center justify-center",children:c.jsx("i",{className:`fas ${L?"fa-user-edit":"fa-user-plus"}`})}),c.jsx("h2",{className:"text-xl font-black text-gray-900 tracking-tight",children:L?"Edit Patient Info":"Register New Patient"})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsx("label",{className:"font-black text-[11px] text-gray-500 uppercase tracking-widest block",children:"Owner Information"}),c.jsx("input",{required:!0,value:x.owner,onChange:D=>H(I=>({...I,owner:D.target.value})),placeholder:"Owner Name *",className:"w-full bg-white border border-slate-300 p-2.5 rounded-lg text-[13px] text-gray-900 font-black outline-none focus:border-blue-600 focus:ring-1 focus:ring-blue-600 shadow-sm placeholder:text-gray-400"}),c.jsx("input",{required:!0,value:x.phone,onChange:D=>H(I=>({...I,phone:D.target.value})),placeholder:"Phone Number *",className:"w-full bg-white border border-slate-300 p-2.5 rounded-lg text-[13px] text-gray-900 font-black outline-none focus:border-blue-600 focus:ring-1 focus:ring-blue-600 shadow-sm placeholder:text-gray-400"})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("label",{className:"font-black text-[11px] text-gray-500 uppercase tracking-widest block",children:"Patient Information"}),c.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[c.jsx("div",{className:"col-span-2",children:c.jsx("input",{required:!0,value:x.name,onChange:D=>H(I=>({...I,name:D.target.value})),placeholder:"Animal Name *",className:"w-full bg-white border border-slate-300 p-2.5 rounded-lg text-[13px] text-gray-900 font-black outline-none focus:border-blue-600 focus:ring-1 focus:ring-blue-600 shadow-sm placeholder:text-gray-400"})}),c.jsx("div",{children:c.jsx("input",{value:x.chartNumber,onChange:D=>H(I=>({...I,chartNumber:D.target.value})),placeholder:"Chart No.",className:"w-full bg-slate-50 border border-slate-300 p-2.5 rounded-lg text-[13px] text-slate-700 font-mono font-black outline-none focus:border-blue-600 focus:ring-1 focus:ring-blue-600 shadow-sm placeholder:text-gray-400",title:"PACS Equipment Patient ID"})})]}),c.jsxs("div",{className:"flex flex-col gap-2",children:[c.jsxs("select",{value:x.species,onChange:D=>H(I=>({...I,species:D.target.value,breed:""})),className:"w-full bg-white border border-slate-300 p-2.5 rounded-lg text-[13px] text-gray-900 font-black outline-none focus:border-blue-600 focus:ring-1 focus:ring-blue-600",children:[c.jsx("option",{value:At.DOG,className:"text-gray-900",children:"Dog"}),c.jsx("option",{value:At.CAT,className:"text-gray-900",children:"Cat"}),c.jsx("option",{value:At.OTHER,className:"text-gray-900",children:"Other"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"font-black text-[10px] text-gray-400 uppercase tracking-widest ml-1",children:"Age (Years/Months)"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("div",{className:"flex-1 relative",children:[c.jsx("input",{required:!0,type:"number",min:"0",value:$,onChange:D=>J(D.target.value),placeholder:"0",className:"w-full bg-white border border-slate-300 p-2.5 rounded-lg text-[13px] text-gray-900 font-black text-center outline-none focus:border-blue-600 focus:ring-1 focus:ring-blue-600 shadow-sm"}),c.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-[9px] font-black text-slate-400 uppercase",children:"Y"})]}),c.jsxs("div",{className:"flex-1 relative",children:[c.jsx("input",{required:!0,type:"number",min:"0",max:"11",value:ce,onChange:D=>ve(D.target.value),placeholder:"0",className:"w-full bg-white border border-slate-300 p-2.5 rounded-lg text-[13px] text-gray-900 font-black text-center outline-none focus:border-blue-600 focus:ring-1 focus:ring-blue-600 shadow-sm"}),c.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-[9px] font-black text-slate-400 uppercase",children:"M"})]})]})]})]}),c.jsxs("div",{className:"relative group",children:[c.jsx("input",{value:x.breed,onChange:D=>{H(I=>({...I,breed:D.target.value})),oe(!0)},onFocus:()=>oe(!0),placeholder:"Breed (Search...)",className:"w-full bg-white border border-slate-300 p-2.5 rounded-lg text-[13px] text-gray-900 font-black outline-none focus:border-blue-600 focus:ring-1 focus:ring-blue-600 shadow-sm placeholder:text-gray-400"}),K&&(x.species===At.DOG||x.species===At.CAT)&&ye.length>0&&c.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 max-h-40 overflow-y-auto bg-white border border-slate-200 rounded-lg shadow-lg z-50",children:ye.map(D=>c.jsx("div",{onMouseDown:()=>{H(I=>({...I,breed:D.name})),oe(!1)},className:"px-3 py-2 text-xs font-bold text-slate-700 hover:bg-blue-50 cursor-pointer",children:D.name},D.id))}),K&&(x.species===At.DOG||x.species===At.CAT)&&ye.length===0&&x.breed&&c.jsxs("div",{className:"absolute top-full left-0 right-0 mt-1 p-2 bg-white border border-slate-200 rounded-lg shadow-lg z-50 text-[10px] text-slate-400 font-black text-center",onMouseDown:()=>oe(!1),children:['Use "',x.breed,'" (Custom)']}),K&&c.jsx("div",{className:"fixed inset-0 z-40 bg-transparent",onClick:()=>oe(!1)})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"font-black text-[11px] text-gray-500 uppercase tracking-widest block",children:"Gender"}),c.jsxs("select",{value:x.gender,onChange:D=>H(I=>({...I,gender:D.target.value})),className:"w-full bg-white border border-slate-300 p-2.5 rounded-lg text-[13px] text-gray-900 font-black outline-none focus:border-blue-600 focus:ring-1 focus:ring-blue-600",children:[c.jsx("option",{value:"Intact Male",children:"Intact Male ()"}),c.jsx("option",{value:"Castrated Male",children:"Castrated Male ( )"}),c.jsx("option",{value:"Intact Female",children:"Intact Female ()"}),c.jsx("option",{value:"Spayed Female",children:"Spayed Female ( )"})]})]})]})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-6 border-t",children:[c.jsx("button",{type:"button",onClick:()=>q(!1),className:"px-6 py-2.5 text-gray-500 font-black text-[12px] hover:text-gray-900 uppercase",children:"Cancel"}),c.jsx("button",{type:"submit",className:"px-10 py-2.5 bg-slate-900 text-white rounded-xl font-black text-[12px] uppercase shadow-lg active:scale-95 transition-all",children:L?"Save Changes":"Save & Register"})]})]})}):c.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-gray-400 bg-white border border-slate-300 rounded",children:[c.jsx("div",{className:"w-20 h-20 bg-slate-50 rounded-full flex items-center justify-center mb-6",children:c.jsx("i",{className:"fas fa-stethoscope text-3xl opacity-20 text-gray-400"})}),c.jsx("p",{className:"font-black uppercase tracking-[0.2em] text-gray-400 text-center",children:"Select a patient from the list (Double Click) to start consultation."})]})})]})},vx=["CONSULTATION","IMAGING","LABORATORY","PROCEDURE","PHARMACY","PREVENTION","FOOD","SUPPLIES","HOSPITALIZATION"],xx=({item:l,onAdd:s})=>c.jsxs("div",{onDoubleClick:()=>s(l),className:"px-4 py-2 border-b border-slate-100 hover:bg-blue-50 cursor-pointer flex justify-between items-center group transition-colors select-none bg-white",children:[c.jsx("div",{className:"flex flex-col min-w-0",children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-[11px] font-bold text-slate-700 group-hover:text-blue-700 truncate",children:l.name}),l.sku_code&&c.jsx("span",{className:"text-[9px] text-slate-400 font-medium px-1 bg-slate-100 rounded",children:l.sku_code})]})}),c.jsx("div",{className:"pl-4",children:c.jsxs("span",{className:"text-[11px] font-bold text-slate-500 group-hover:text-blue-600",children:["",l.default_price.toLocaleString()]})})]}),yx=({patients:l,vets:s,waitlist:i,onAddToWaitlist:r,onUpdateWaitlist:d,onRemoveFromWaitlist:f,selectedPatientId:h,onSelectPatient:g})=>{const[b,p]=N.useState(""),[y,S]=N.useState(""),[j,T]=N.useState(320),[C,q]=N.useState(!1),[L,W]=N.useState(null),[Z,k]=N.useState(null),[te,he]=N.useState(null),[fe,ae]=N.useState(null),[we,be]=N.useState(null),[ke,Te]=N.useState([]),[se,me]=N.useState([]),[je,ne]=N.useState(null),[A,R]=N.useState({card:0,cash:0,transfer:0}),[re,K]=N.useState({});N.useEffect(()=>{(async()=>{const{data:G}=await ue.from("service_catalog").select("*").eq("is_active",!0).order("name");G&&Te(G)})()},[]),N.useEffect(()=>{h?oe(h):(R({card:0,cash:0,transfer:0}),me([]),ne(null))},[h]);const oe=async Q=>{const{data:G}=await ue.from("billing_invoices").select("*").eq("patient_id",Q).eq("status","Unpaid").single();if(G){ne(G.id);const{data:w}=await ue.from("billing_items").select("*").eq("invoice_id",G.id).order("order_index",{ascending:!0});w&&me(w.map(M=>({id:M.id,invoice_id:M.invoice_id,name:M.item_name,category:M.category,unit_price:M.unit_price,quantity:M.quantity,total_price:M.total_price,performingVetId:M.performing_vet_id,order_index:M.order_index})))}else R({card:0,cash:0,transfer:0}),me([]),ne(null)},x=N.useMemo(()=>l.find(Q=>Q.id===h),[h,l]),H=N.useMemo(()=>{const Q=b.trim().toLowerCase();return Q?l.filter(G=>G.name.toLowerCase().includes(Q)||G.owner.toLowerCase().includes(Q)||G.phone.includes(Q)):[]},[b,l]),$=N.useMemo(()=>{const Q={unassigned:[]};return s.forEach(G=>Q[G.id]=[]),i.forEach(G=>{const w=G.vetId;w&&Q[w]?Q[w].push(G):Q.unassigned.push(G)}),Q},[i,s]),J=N.useMemo(()=>se.reduce((Q,G)=>Q+G.total_price,0),[se]),ce=A.card+A.cash+A.transfer,ve=J-ce,ye=(Q,G,w)=>{W(G),k(w),Q.dataTransfer.effectAllowed="move"},qe=async Q=>{if(!h)return;let G=je;if(!G){const{data:M}=await ue.from("billing_invoices").insert({patient_id:h,status:"Unpaid"}).select().single();if(!M)return;G=M.id,ne(M.id)}const{data:w}=await ue.from("billing_items").insert([{invoice_id:G,service_id:Q.id,item_name:Q.name,category:Q.category,unit_price:Q.default_price,quantity:1,total_price:Q.default_price,order_index:se.length}]).select().single();w&&me(M=>[...M,{id:w.id,invoice_id:G,name:w.item_name,category:w.category,unit_price:w.unit_price,quantity:w.quantity,total_price:w.total_price,order_index:w.order_index}])},Ue=async()=>{if(!h||!je)return;await ue.from("billing_invoices").update({total_amount:J,paid_amount:ce,status:ve<=0?"Paid":"Partial",payment_method:A}).eq("id",je);const Q=i.find(G=>G.patientId===h&&G.type==="Billing Queue");Q&&await f(Q.id),g("")},ie=Q=>{ae(Q),k("billing_item")},de=async(Q,G)=>{if(Q.preventDefault(),fe===null||fe===G){ae(null),be(null);return}const w=[...se],[M]=w.splice(fe,1);w.splice(G,0,M),me(w),await ue.from("billing_items").upsert(w.map((ge,Y)=>({id:ge.id,invoice_id:je,item_name:ge.name,category:ge.category,unit_price:ge.unit_price,quantity:ge.quantity,total_price:ge.total_price,order_index:Y}))),ae(null),be(null)};return c.jsxs("div",{className:`flex h-full bg-slate-100 overflow-hidden text-xs font-sans ${C?"cursor-col-resize select-none":""}`,children:[c.jsxs("div",{style:{width:`${j}px`},className:"relative border-r border-slate-300 flex flex-col bg-white z-10 flex-shrink-0 shadow-sm",children:[c.jsx("div",{className:"p-3 border-b border-slate-200 bg-slate-50 flex items-center justify-between",children:c.jsx("h2",{className:"font-bold text-gray-800",children:"Patient Search"})}),c.jsx("div",{className:"p-2 border-b border-slate-200",children:c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"text",placeholder:"Search...",value:b,onChange:Q=>p(Q.target.value),className:"w-full pl-8 pr-2 py-1.5 bg-white border border-slate-300 rounded text-[11px] outline-none"}),c.jsx("i",{className:"fas fa-search absolute left-2.5 top-1/2 -translate-y-1/2 text-gray-400"})]})}),c.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-1",children:[H.map(Q=>c.jsxs("div",{draggable:!0,onDragStart:G=>ye(G,Q.id,"patient"),onDoubleClick:()=>g(Q.id),className:`px-2 py-1.5 cursor-pointer border-b border-slate-100 flex items-center gap-2 hover:bg-blue-50 transition-colors ${h===Q.id?"bg-blue-50":""}`,children:[c.jsx("img",{src:Q.avatar,className:"w-8 h-8 rounded border border-slate-200",alt:""}),c.jsx("div",{className:"flex-1 min-w-0",children:c.jsx("span",{className:"font-black text-gray-900 truncate",children:Q.name})})]},Q.id)),s.map(Q=>{var G;return c.jsxs("div",{className:"mb-1",children:[c.jsxs("div",{onClick:()=>K(w=>({...w,[Q.id]:!w[Q.id]})),className:"px-2 py-1 bg-slate-50 border border-slate-200 flex justify-between items-center cursor-pointer",children:[c.jsx("span",{className:"font-black text-gray-700",children:Q.name}),c.jsx("span",{className:"text-[10px] text-blue-600",children:((G=$[Q.id])==null?void 0:G.length)||0})]}),!re[Q.id]&&$[Q.id].map(w=>c.jsxs("div",{draggable:!0,onDragStart:M=>ye(M,w.id,"waitlist"),onDoubleClick:()=>g(w.patientId),className:"px-2 py-1.5 border-b border-slate-100 flex justify-between items-center hover:bg-slate-50 group cursor-pointer",children:[c.jsx("span",{className:"font-black text-gray-900 truncate",children:w.patientName}),c.jsx("button",{onClick:M=>{M.stopPropagation(),f(w.id)},className:"text-gray-300 hover:text-rose-500",children:c.jsx("i",{className:"fas fa-times"})})]},w.id))]},Q.id)})]}),c.jsx("div",{onMouseDown:()=>q(!0),className:"absolute top-0 right-0 w-1 h-full cursor-col-resize hover:bg-blue-400 z-20"})]}),c.jsxs("div",{className:"w-[450px] border-r border-slate-300 flex flex-col bg-slate-50",children:[c.jsxs("div",{className:"p-3 bg-slate-50 border-b border-slate-200 sticky top-0 z-10",children:[c.jsx("h2",{className:"font-bold text-gray-700 mb-2 uppercase tracking-tighter",children:"Service Catalog"}),c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"text",placeholder:"Search...",value:y,onChange:Q=>S(Q.target.value),className:"w-full bg-white border border-slate-300 rounded pl-8 pr-4 py-1.5 text-xs font-bold outline-none"}),c.jsx("i",{className:"fas fa-search absolute left-2.5 top-1/2 -translate-y-1/2 text-gray-400"})]})]}),c.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar bg-white",children:vx.map(Q=>{const G=ke.filter(w=>w.category===Q&&w.name.toLowerCase().includes(y.toLowerCase()));return G.length?c.jsxs("div",{className:"border-b border-slate-100",children:[c.jsx("div",{className:"px-4 py-2 bg-slate-50 border-b border-slate-200 flex justify-between items-center sticky top-0 z-10",children:c.jsx("span",{className:"text-[10px] font-black uppercase",children:Q})}),G.map(w=>c.jsx(xx,{item:w,onAdd:qe},w.id))]},Q):null})})]}),c.jsx("div",{className:"flex-1 flex flex-col bg-white overflow-hidden relative",children:x?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"px-6 py-5 border-b border-slate-200 flex justify-between items-start bg-slate-50",children:c.jsxs("div",{children:[c.jsxs("h2",{className:"text-xl font-black text-slate-900 flex items-center gap-2 uppercase tracking-tight",children:[c.jsx("i",{className:"fas fa-file-invoice-dollar text-blue-600"}),"Invoice"]}),c.jsx("div",{className:"flex items-center gap-2 mt-1",children:c.jsx("span",{className:"text-xs font-bold text-slate-600",children:x.name})})]})}),c.jsx("div",{className:"flex-1 overflow-y-auto bg-white",children:c.jsxs("table",{className:"w-full text-left border-collapse",children:[c.jsx("thead",{className:"bg-slate-100/80 sticky top-0 z-10 shadow-sm",children:c.jsxs("tr",{className:"text-[10px] font-black text-slate-500 uppercase tracking-wider",children:[c.jsx("th",{className:"w-10"}),c.jsx("th",{className:"px-6 py-2",children:"Description"}),c.jsx("th",{className:"px-4 py-2 text-right",children:"Price"}),c.jsx("th",{className:"px-4 py-2 text-center",children:"Qty"}),c.jsx("th",{className:"px-4 py-2 text-right",children:"Amount"}),c.jsx("th",{className:"w-10"})]})}),c.jsx("tbody",{className:"divide-y divide-slate-100",children:se.map((Q,G)=>c.jsxs("tr",{draggable:!0,onDragStart:()=>ie(G),onDragEnd:()=>{ae(null),be(null)},onDragOver:w=>{w.preventDefault(),fe!==G&&be(G)},onDrop:w=>de(w,G),className:`group transition-all ${fe===G?"opacity-30":""} ${we===G?"border-t-2 border-t-blue-500 bg-blue-50":""}`,children:[c.jsx("td",{className:"px-2 py-3 text-center cursor-grab",children:c.jsx("i",{className:"fas fa-grip-vertical text-slate-300"})}),c.jsx("td",{className:"px-6 py-3",children:c.jsx("div",{className:"font-bold text-slate-800 text-[11px]",children:Q.name})}),c.jsxs("td",{className:"px-4 py-3 text-right text-xs",children:["",Q.unit_price.toLocaleString()]}),c.jsx("td",{className:"px-4 py-3 text-center",children:c.jsx("span",{className:"bg-slate-100 px-2 py-0.5 rounded text-[10px]",children:Q.quantity})}),c.jsxs("td",{className:"px-4 py-3 text-right font-bold text-xs",children:["",Q.total_price.toLocaleString()]}),c.jsx("td",{className:"px-4 py-3 text-center",children:c.jsx("button",{onClick:()=>{ue.from("billing_items").delete().eq("id",Q.id),me(w=>w.filter(M=>M.id!==Q.id))},className:"text-slate-300 hover:text-rose-500 opacity-0 group-hover:opacity-100",children:c.jsx("i",{className:"fas fa-times-circle"})})})]},Q.id))})]})}),c.jsxs("div",{className:"bg-slate-50 border-t border-slate-200 p-8 flex-shrink-0",children:[c.jsxs("div",{className:"flex justify-between items-end mb-8",children:[c.jsx("div",{children:c.jsxs("span",{className:"font-black text-3xl text-slate-900 italic",children:["",J.toLocaleString()]})}),c.jsx("div",{className:"text-right",children:c.jsxs("span",{className:"font-black text-2xl text-rose-600 italic",children:["",ve.toLocaleString()]})})]}),c.jsx("div",{className:"grid grid-cols-3 gap-4 mb-8",children:["card","cash","transfer"].map(Q=>c.jsxs("div",{className:"bg-white border border-slate-200 rounded-xl p-3 flex flex-col gap-1 focus-within:border-blue-500 shadow-sm",children:[c.jsx("span",{className:"text-[9px] uppercase font-black text-slate-400",children:Q}),c.jsx("input",{type:"number",className:"bg-transparent outline-none font-black text-slate-900 text-sm",value:A[Q],onChange:G=>R(w=>({...w,[Q]:Number(G.target.value)}))})]},Q))}),c.jsx("button",{disabled:se.length===0,onClick:Ue,className:"w-full py-5 bg-blue-600 text-white rounded-2xl font-black uppercase tracking-[0.2em] text-[11px] hover:bg-blue-700 transition-all shadow-lg shadow-blue-500/20 disabled:opacity-30",children:"Finalize Payment"})]})]}):c.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-slate-200",children:[c.jsx("i",{className:"fas fa-hand-pointer text-3xl mb-4"}),c.jsx("p",{className:"font-black uppercase tracking-[0.4em] text-[10px]",children:"Select Patient"})]})})]})},Ic=[{name:"Sky Blue",value:"#3b82f6"},{name:"Emerald",value:"#10b981"},{name:"Amber",value:"#f59e0b"},{name:"Rose",value:"#f43f5e"},{name:"Violet",value:"#8b5cf6"},{name:"Slate",value:"#64748b"}],wx=({isOpen:l,onClose:s,vets:i,patients:r,onSave:d,onDelete:f,initialAppointment:h,initialVetId:g,initialTime:b,initialEndTime:p,initialDate:y,activePatient:S})=>{const[j,T]=N.useState(""),[C,q]=N.useState(""),[L,W]=N.useState(""),[Z,k]=N.useState(""),[te,he]=N.useState("09:00"),[fe,ae]=N.useState("09:15"),[we,be]=N.useState(""),[ke,Te]=N.useState(!1),[se,me]=N.useState(Ic[0].value),je=N.useMemo(()=>{if(!L.trim())return[];const R=L.toLowerCase();return r.filter(re=>re.name.toLowerCase().includes(R)||re.owner.toLowerCase().includes(R)).slice(0,5)},[L,r]),ne=N.useMemo(()=>r.find(R=>R.id===C),[C,r]);if(N.useEffect(()=>{const R=re=>{re.key==="Escape"&&l&&s()};return window.addEventListener("keydown",R),()=>window.removeEventListener("keydown",R)},[l,s]),N.useEffect(()=>{if(l)if(h)T(h.vetId),q(h.patientId||""),W(""),k(h.date),he(h.startTime),ae(h.endTime),be(h.reason),Te(h.isRecurring),me(h.color);else{if(T(g||(i.length>0?i[0].id:"")),q((S==null?void 0:S.id)||""),W(""),k(y||new Date().toISOString().split("T")[0]),he(b||"09:00"),p)ae(p);else if(b){const[R,re]=b.split(":").map(Number),K=R*60+re+30,oe=Math.min(Math.floor(K/60),20),x=oe===20?0:K%60;ae(`${String(oe).padStart(2,"0")}:${String(x).padStart(2,"0")}`)}else ae("09:30");be(""),Te(!1),me(Ic[0].value)}},[l,h,g,b,p,y,i,S]),!l)return null;const A=R=>{if(R.preventDefault(),fe<=te){alert("      .");return}if(!C&&!we.trim()){alert("      .");return}d({vetId:j,patientId:C||void 0,date:Z,startTime:te,endTime:fe,reason:we,isRecurring:ke,color:se})};return c.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-slate-900/60 backdrop-blur-sm p-6 animate-in fade-in duration-300",onClick:s,children:c.jsxs("div",{className:"bg-white rounded-[40px] w-full max-w-xl shadow-2xl overflow-hidden animate-in zoom-in-95 duration-300",onClick:R=>R.stopPropagation(),children:[c.jsxs("div",{className:"p-8 border-b border-slate-100 flex justify-between items-center bg-slate-50/50",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:"w-12 h-12 bg-slate-900 rounded-2xl flex items-center justify-center text-white shadow-lg",children:c.jsx("i",{className:`fas ${h?"fa-edit":"fa-calendar-plus"} text-xl`})}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-xl font-black text-slate-900 tracking-tight",children:h?"Edit Reservation":"New Reservation"}),c.jsx("p",{className:"text-[10px] text-slate-500 font-black uppercase tracking-widest mt-1",children:"Clinical Scheduler"})]})]}),c.jsx("button",{onClick:s,className:"w-10 h-10 rounded-full hover:bg-slate-200 text-slate-400 transition-all",children:c.jsx("i",{className:"fas fa-times"})})]}),c.jsxs("form",{onSubmit:A,className:"p-8 space-y-6 max-h-[70vh] overflow-y-auto custom-scrollbar",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:"Patient Selection"}),ne?c.jsxs("div",{className:"flex items-center justify-between p-4 bg-blue-50 border border-blue-200 rounded-2xl",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("img",{src:ne.avatar,className:"w-10 h-10 rounded-xl object-cover",alt:""}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-black text-slate-900",children:ne.name}),c.jsxs("p",{className:"text-[10px] text-slate-500 font-bold",children:[ne.breed,"  ",ne.owner]})]})]}),c.jsx("button",{type:"button",onClick:()=>q(""),className:"text-slate-400 hover:text-rose-500 px-3 py-1",children:""})]}):c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"text",placeholder:"   ...",value:L,onChange:R=>W(R.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded-2xl px-5 py-4 text-slate-900 font-bold text-sm outline-none focus:border-blue-500 transition-all"}),je.length>0&&c.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white border border-slate-200 rounded-2xl shadow-xl z-20 overflow-hidden",children:je.map(R=>c.jsxs("div",{onClick:()=>{q(R.id),W("")},className:"p-3 hover:bg-slate-50 cursor-pointer flex items-center gap-3 border-b last:border-0",children:[c.jsx("img",{src:R.avatar,className:"w-8 h-8 rounded-lg object-cover",alt:""}),c.jsxs("div",{children:[c.jsx("p",{className:"text-xs font-black text-slate-900",children:R.name}),c.jsxs("p",{className:"text-[9px] text-slate-500 font-bold",children:[R.owner,"  ",R.breed]})]})]},R.id))})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:"Practitioner"}),c.jsx("select",{value:j,onChange:R=>T(R.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded-2xl px-5 py-4 text-slate-900 font-bold text-sm outline-none focus:border-blue-500 transition-all cursor-pointer",children:i.map(R=>c.jsx("option",{value:R.id,children:R.name},R.id))})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:"Date"}),c.jsx("input",{type:"date",value:Z,onChange:R=>k(R.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded-2xl px-5 py-4 text-slate-900 font-bold text-sm outline-none focus:border-blue-500 transition-all cursor-pointer"})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:"Starts At"}),c.jsx("input",{type:"time",step:"900",value:te,onChange:R=>he(R.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded-2xl px-5 py-4 text-slate-900 font-bold text-sm outline-none focus:border-blue-500 transition-all"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:"Ends At"}),c.jsx("input",{type:"time",step:"900",value:fe,onChange:R=>ae(R.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded-2xl px-5 py-4 text-slate-900 font-bold text-sm outline-none focus:border-blue-500 transition-all"})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:"Category Color"}),c.jsx("div",{className:"flex justify-between p-4 bg-slate-50 rounded-3xl border border-slate-200",children:Ic.map(R=>c.jsx("button",{type:"button",onClick:()=>me(R.value),className:`w-10 h-10 rounded-xl border-4 transition-all hover:scale-110 active:scale-90 ${se===R.value?"border-slate-900 scale-105 shadow-md":"border-white opacity-40"}`,style:{backgroundColor:R.value}},R.value))})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:"Appointment Reason / Notes"}),c.jsx("textarea",{value:we,onChange:R=>be(R.target.value),placeholder:"    ...",className:"w-full bg-slate-50 border border-slate-200 rounded-[28px] px-6 py-5 text-slate-950 font-bold text-sm outline-none focus:border-blue-500 transition-all min-h-[100px] resize-none placeholder:text-slate-300 shadow-inner"})]}),c.jsxs("div",{className:"flex gap-4 pt-4",children:[h&&c.jsx("button",{type:"button",onClick:R=>{R.stopPropagation(),f==null||f()},className:"px-8 text-rose-500 font-black text-[11px] uppercase tracking-widest hover:bg-rose-50 rounded-2xl transition-all",children:"Delete"}),c.jsx("button",{type:"submit",className:"flex-1 py-5 bg-slate-900 hover:bg-black text-white rounded-[24px] font-black text-[11px] uppercase tracking-widest shadow-xl transition-all active:scale-95",children:h?"Update Reservation":"Confirm Reservation"})]})]})]})})},_x=({vets:l,patients:s,appointments:i,clinicSettings:r,activePatient:d,onAddAppointment:f,onUpdateAppointment:h,onDeleteAppointment:g})=>{const[b,p]=N.useState(new Date().toISOString().split("T")[0]),[y,S]=N.useState(!1),[j,T]=N.useState(null),[C,q]=N.useState(!1),[L,W]=N.useState(null),[Z,k]=N.useState(null),[te,he]=N.useState(null),[fe,ae]=N.useState(void 0),[we,be]=N.useState(void 0),[ke,Te]=N.useState(void 0),se=N.useMemo(()=>l.filter(ie=>ie.id!=="ALL_VETS"),[l]),me=64,je=240,ne=80,A=15,R=N.useMemo(()=>{const ie=[];for(let de=9;de<=19;de++)for(let Q=0;Q<60;Q+=15)ie.push(`${String(de).padStart(2,"0")}:${String(Q).padStart(2,"0")}`);return ie.push("20:00"),ie},[]),re=ie=>{if(!ie)return-1;const[de,Q,G]=ie.split("-").map(Number);return new Date(de,Q-1,G).getDay()},K=N.useMemo(()=>{const ie=re(b);return i.filter(de=>{const Q=re(de.date);return de.date===b||de.isRecurring&&b>=de.date&&Q===ie})},[i,b]),oe=N.useMemo(()=>K.filter(ie=>ie.vetId!=="ALL_VETS"),[K]),x=ie=>{const[de,Q]=ie.split(":").map(Number);return de*60+Q},H=ie=>{const de=Math.floor(ie/60),Q=ie%60;return`${String(de).padStart(2,"0")}:${String(Q).padStart(2,"0")}`},$=(ie,de)=>(x(de)-x(ie))/15,J=ie=>(x(ie)-540)/15,ce=(ie,de)=>{q(!0),W({vetId:ie,time:de}),k({vetId:ie,time:de})},ve=(ie,de,Q)=>{ie.type!=="touchmove"&&C&&L&&L.vetId===de&&k({vetId:de,time:Q})},ye=()=>{if(C&&L&&Z){const ie=R.indexOf(L.time),de=R.indexOf(Z.time),Q=R[Math.min(ie,de)],G=R[Math.max(ie,de)],w=x(G)+15,M=Math.min(Math.floor(w/60),20),ge=M===20?0:w%60,Y=`${String(M).padStart(2,"0")}:${String(ge).padStart(2,"0")}`;Te(L.vetId),ae(Q),be(Y),T(null),S(!0)}q(!1),W(null),k(null)},qe=(ie,de,Q)=>{ie.stopPropagation();let G,w;"touches"in ie?(G=ie.touches[0].clientX,w=ie.touches[0].clientY):(G=ie.clientX,w=ie.clientY),he({type:Q,apptId:de.id,originalVetId:de.vetId,originalStartMinutes:x(de.startTime),originalEndMinutes:x(de.endTime),startX:G,startY:w,tempVetId:de.vetId,tempStartMinutes:x(de.startTime),tempEndMinutes:x(de.endTime)})};N.useEffect(()=>{const ie=Q=>{if(!te)return;Q.type==="touchmove"&&Q.preventDefault();let G,w;"touches"in Q?(G=Q.touches[0].clientX,w=Q.touches[0].clientY):(G=Q.clientX,w=Q.clientY);const M=G-te.startX,ge=w-te.startY,Y=Math.round(ge/me),F=Math.round(M/je);if(te.type==="move"){let D=se.findIndex(vt=>vt.id===te.originalVetId)+F;D=Math.max(0,Math.min(D,se.length-1));const I=se[D].id,pe=te.originalEndMinutes-te.originalStartMinutes;let ze=te.originalStartMinutes+Y*15;const Ye=x("09:00"),Xe=x("20:00")-pe;ze=Math.max(Ye,Math.min(ze,Xe));const Ie=ze+pe;he(vt=>vt?{...vt,tempVetId:I,tempStartMinutes:ze,tempEndMinutes:Ie}:null)}else if(te.type==="resize"){let le=te.originalEndMinutes+Y*15;le-te.originalStartMinutes<A&&(le=te.originalStartMinutes+A);const D=x("20:00");le=Math.min(le,D),he(I=>I?{...I,tempEndMinutes:le}:null)}},de=async Q=>{if(!te)return;const{apptId:G,tempVetId:w,tempStartMinutes:M,tempEndMinutes:ge,originalVetId:Y,originalStartMinutes:F,originalEndMinutes:le}=te;if(w!==Y||M!==F||ge!==le){const I=i.find(pe=>pe.id===G);I&&(await h(G,{...I,vetId:w,startTime:H(M),endTime:H(ge)})||alert("Failed to update appointment."))}he(null)};return te&&(window.addEventListener("mousemove",ie),window.addEventListener("mouseup",de),window.addEventListener("touchmove",ie,{passive:!1}),window.addEventListener("touchend",de)),()=>{window.removeEventListener("mousemove",ie),window.removeEventListener("mouseup",de),window.removeEventListener("touchmove",ie),window.removeEventListener("touchend",de)}},[te,se,i,h,me,je]);const Ue=(ie,de)=>{if(!L||!Z||L.vetId!==ie)return!1;const Q=R.indexOf(L.time),G=R.indexOf(Z.time),w=R.indexOf(de);return w>=Math.min(Q,G)&&w<=Math.max(Q,G)};return c.jsxs("div",{className:"flex flex-col h-full bg-slate-50 font-['Inter'] select-none",onMouseUp:ye,onTouchEnd:ye,children:[c.jsxs("header",{className:"h-16 bg-white border-b border-slate-200 flex items-center justify-between px-8 flex-shrink-0 z-[60] shadow-sm",children:[c.jsxs("div",{className:"flex items-center gap-6",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-9 h-9 bg-blue-600 rounded-xl flex items-center justify-center text-white shadow-md",children:c.jsx("i",{className:"fas fa-calendar-alt text-sm"})}),c.jsx("h1",{className:"text-lg font-black text-slate-900 tracking-tight uppercase",children:"Reservation Scheduler"})]}),c.jsxs("div",{className:"flex items-center bg-slate-100 rounded-xl p-0.5 border border-slate-200",children:[c.jsx("button",{onClick:()=>{const ie=new Date(b);ie.setDate(ie.getDate()-1),p(ie.toISOString().split("T")[0])},className:"w-8 h-8 flex items-center justify-center text-slate-400 hover:text-slate-900 rounded-lg hover:bg-white",children:c.jsx("i",{className:"fas fa-chevron-left text-[10px]"})}),c.jsx("div",{className:"px-4 flex flex-col items-center min-w-[100px]",children:c.jsx("span",{className:"text-[10px] font-black text-slate-900",children:b})}),c.jsx("button",{onClick:()=>{const ie=new Date(b);ie.setDate(ie.getDate()+1),p(ie.toISOString().split("T")[0])},className:"w-8 h-8 flex items-center justify-center text-slate-400 hover:text-slate-900 rounded-lg hover:bg-white",children:c.jsx("i",{className:"fas fa-chevron-right text-[10px]"})})]})]}),c.jsxs("button",{onClick:()=>{T(null),S(!0)},className:"px-6 py-2 bg-slate-900 hover:bg-black text-white rounded-xl font-black text-[11px] uppercase tracking-widest shadow-lg transition-all flex items-center gap-2",children:[c.jsx("i",{className:"fas fa-plus"})," New Appointment"]})]}),c.jsx("div",{className:"flex-1 overflow-auto custom-scrollbar relative bg-slate-50 flex flex-col",children:c.jsxs("div",{className:"min-w-max relative flex flex-col",children:[c.jsxs("div",{className:"flex sticky top-0 z-[55] bg-white border-b border-slate-200 shadow-sm",children:[c.jsx("div",{style:{width:`${ne}px`},className:"flex-shrink-0 bg-slate-50 border-r border-slate-200 flex items-center justify-center sticky left-0 z-[56]",children:c.jsx("i",{className:"fas fa-clock text-slate-300 text-[10px]"})}),se.map(ie=>c.jsxs("div",{style:{width:`${je}px`},className:"flex-shrink-0 border-r border-slate-100 p-4 flex items-center gap-3 bg-white",children:[c.jsx("img",{src:ie.avatar,className:"w-10 h-10 rounded-full object-cover border-2 border-slate-100",alt:""}),c.jsxs("div",{className:"min-w-0",children:[c.jsx("p",{className:"text-sm font-black text-slate-900 truncate",children:ie.name}),c.jsx("p",{className:"text-[9px] font-bold text-blue-600 uppercase tracking-tighter truncate",children:ie.specialty})]})]},ie.id))]}),c.jsxs("div",{className:"flex relative",children:[c.jsx("div",{className:"flex flex-col sticky left-0 z-50 bg-white border-r border-slate-200 shadow-sm",children:R.map((ie,de)=>{const Q=ie.endsWith(":00"),G=de===R.length-1;return c.jsx("div",{style:{height:G?"0px":`${me}px`,width:`${ne}px`},className:`flex-shrink-0 relative border-b border-slate-100 transition-colors ${Q?"bg-slate-50":""}`,children:c.jsx("span",{className:`absolute top-0 left-1/2 -translate-x-1/2 -translate-y-1/2 px-2 py-0.5 rounded text-[10px] font-black tracking-tighter z-10 ${Q?"text-slate-900 bg-white border border-slate-200 shadow-sm":"text-slate-300"}`,children:ie})},ie)})}),c.jsxs("div",{className:"flex relative flex-1",children:[se.map(ie=>c.jsxs("div",{style:{width:`${je}px`},className:"flex-shrink-0 border-r border-slate-100 relative bg-white",children:[R.slice(0,-1).map(de=>c.jsx("div",{style:{height:`${me}px`},className:`border-b border-slate-50 cursor-pointer transition-colors flex items-center justify-center group/cell ${Ue(ie.id,de)?"bg-blue-50":"hover:bg-slate-50"}`,onMouseDown:()=>ce(ie.id,de),onTouchStart:()=>ce(ie.id,de),onMouseEnter:Q=>ve(Q,ie.id,de),children:c.jsx("i",{className:`fas fa-plus text-[10px] ${Ue(ie.id,de)?"opacity-100":"opacity-0"} group-hover/cell:opacity-100 transition-opacity text-blue-400`})},de)),oe.filter(de=>de.vetId===ie.id||(te==null?void 0:te.apptId)===de.id&&te.tempVetId===ie.id).map(de=>{const Q=(te==null?void 0:te.apptId)===de.id;let G=de.startTime,w=de.endTime;if(Q){if(ie.id!==te.tempVetId)return null;G=H(te.tempStartMinutes),w=H(te.tempEndMinutes)}else if(ie.id!==de.vetId)return null;const M=$(G,w),ge=J(G)*me,Y=s.find(le=>le.id===de.patientId),F=M<=1.01;return c.jsxs("div",{onMouseDown:le=>qe(le,de,"move"),onTouchStart:le=>qe(le,de,"move"),onDoubleClick:le=>{le.stopPropagation(),T(de),S(!0)},className:`absolute left-1 right-1 rounded-lg border-l-4 shadow-sm transition-all flex group overflow-hidden ${F?"flex-row items-center px-2 py-1 gap-2":"flex-col p-3"} ${Q?"z-50 opacity-90 shadow-xl scale-[1.02] cursor-grabbing":"cursor-grab hover:shadow-md hover:scale-[1.01] hover:z-40"}`,style:{top:`${ge+2}px`,height:`${Math.max(M*me-4,30)}px`,backgroundColor:`${de.color}15`,borderLeftColor:de.color},children:[c.jsx("div",{className:`flex-shrink-0 ${F?"":"flex justify-between items-start mb-1 pointer-events-none"}`,children:c.jsxs("span",{className:`${F?"text-[10px]":"text-[9px] px-1.5 py-0.5 rounded bg-white/50 border border-white/80"} font-black uppercase tracking-tighter`,style:{color:de.color},children:[G,!F&&` - ${w}`]})}),c.jsxs("div",{className:`min-w-0 pointer-events-none flex-1 ${F?"flex items-baseline gap-2":""}`,children:[c.jsx("p",{className:`font-black text-slate-950 truncate ${F?"text-[11px]":"text-[12px] mb-0.5"}`,children:Y?`[${Y.name}]`:"[]"}),c.jsx("p",{className:`${F?"text-[10px] truncate":"text-[10px] leading-snug line-clamp-2"} font-bold text-slate-600 italic`,children:de.reason})]}),!F&&c.jsx("div",{className:"mt-auto opacity-0 group-hover:opacity-100 transition-opacity text-right pointer-events-none absolute bottom-2 right-2",children:c.jsx("i",{className:"fas fa-edit text-[9px] text-slate-400"})}),c.jsx("div",{onMouseDown:le=>qe(le,de,"resize"),onTouchStart:le=>qe(le,de,"resize"),className:"absolute bottom-0 left-0 right-0 h-6 cursor-ns-resize flex justify-center items-end pb-1 opacity-0 group-hover:opacity-100 transition-opacity z-10 touch-none",children:c.jsx("div",{className:"w-8 h-1 bg-slate-400/50 rounded-full"})})]},de.id)})]},ie.id)),c.jsx("div",{className:"absolute top-0 bottom-0 left-0 right-0 pointer-events-none z-30",children:r.isLunchEnabled&&c.jsx("div",{className:"absolute left-0 right-0 bg-amber-500/[0.03] border-y border-amber-500/10 flex items-center justify-center",style:{top:`${J(r.lunchStartTime)*me}px`,height:`${$(r.lunchStartTime,r.lunchEndTime)*me}px`},children:c.jsxs("div",{className:"bg-white/90 backdrop-blur-sm border border-amber-200 px-6 py-1.5 rounded-full flex items-center gap-3 shadow-sm pointer-events-auto",children:[c.jsx("i",{className:"fas fa-utensils text-amber-500 text-[10px]"}),c.jsx("span",{className:"text-[9px] font-black text-amber-700 uppercase tracking-widest",children:"Clinic Lunch Break"})]})})})]})]})]})}),c.jsx(wx,{isOpen:y,onClose:()=>{S(!1),T(null),be(void 0)},vets:l,patients:s,onSave:async ie=>{await(j?h(j.id,ie):f(ie))&&(S(!1),T(null),be(void 0))},onDelete:async()=>{j&&await g(j.id)&&(S(!1),T(null),be(void 0))},initialAppointment:j||void 0,initialDate:b,initialTime:fe,initialEndTime:we,initialVetId:ke,activePatient:d})]})},Sx=async l=>{const s=l.name.split(".").pop(),r=`orders/${`${Date.now()}_${Math.random().toString(36).substring(2,7)}.${s}`}`,{data:d,error:f}=await ue.storage.from("order_images").upload(r,l,{cacheControl:"3600",upsert:!1});if(f)return null;const{data:h}=ue.storage.from("order_images").getPublicUrl(r);return h.publicUrl},jx=async l=>{try{const s=l.split("/order_images/")[1];if(!s)return!1;const{error:i}=await ue.storage.from("order_images").remove([s]);return i?(console.error("Supabase storage delete error:",i),!1):!0}catch(s){return console.error("Supabase storage delete failed:",s),!1}},Nx=async l=>{try{const i=new URL(l).pathname.split("/uploads/")[1];if(!i)return!1;const r=await fetch(`http://localhost:3000/delete/${i}`,{method:"DELETE",headers:{"Content-Type":"application/json"}});return r.ok?(await r.json()).success:(console.error("NAS delete error:",r.status,r.statusText),!1)}catch(s){return console.error("NAS delete failed:",s),!1}},Ex=async l=>{const s=await Promise.allSettled([jx(l),Nx(l)]),i=s[0],r=s[1];console.log("Image deletion results:",{supabase:i.status==="fulfilled"?i.value:!1,nas:r.status==="fulfilled"?r.value:!1})},Tx=[{value:"Treatment",label:"",icon:"fa-briefcase-medical",color:"text-indigo-600"},{value:"Pharmacy",label:"",icon:"fa-pills",color:"text-emerald-600"},{value:"X-ray",label:"X-ray",icon:"fa-radiation",color:"text-slate-700"},{value:"Ultrasound",label:"",icon:"fa-wave-square",color:"text-blue-600"}],Ax=({item:l,onConfirm:s,onCancel:i})=>{const[r,d]=N.useState(1),[f,h]=N.useState(2),[g,b]=N.useState(1),p=r*f*g;return c.jsxs("div",{className:"absolute top-0 left-0 right-0 z-20 bg-slate-800 text-white p-3 rounded-lg shadow-xl animate-in fade-in zoom-in-95 duration-200",children:[c.jsx("h4",{className:"text-[10px] font-black uppercase tracking-widest text-blue-400 mb-2",children:l.name}),c.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-2",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-[9px] font-bold text-slate-400 block",children:"Days"}),c.jsx("input",{type:"number",min:"1",value:r,onChange:y=>d(Number(y.target.value)),className:"w-full bg-slate-700 rounded px-1 text-xs text-center outline-none"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-[9px] font-bold text-slate-400 block",children:"Freq"}),c.jsx("input",{type:"number",min:"1",value:f,onChange:y=>h(Number(y.target.value)),className:"w-full bg-slate-700 rounded px-1 text-xs text-center outline-none"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-[9px] font-bold text-slate-400 block",children:"Unit"}),c.jsx("input",{type:"number",min:"0.1",step:"0.1",value:g,onChange:y=>b(Number(y.target.value)),className:"w-full bg-slate-700 rounded px-1 text-xs text-center outline-none"})]})]}),c.jsxs("div",{className:"flex justify-between items-center mt-2",children:[c.jsxs("span",{className:"text-sm font-black text-emerald-400",children:["Total: ",p]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:i,className:"text-[9px] uppercase font-bold text-slate-400",children:"Cancel"}),c.jsx("button",{onClick:()=>s(p),className:"px-3 py-1 bg-blue-600 rounded text-[9px] font-black",children:"Confirm"})]})]})]})},Fm=({isOpen:l,onClose:s,onSave:i,onDelete:r,draftOrder:d,editingOrder:f,vets:h,isSubmitting:g,activeSoapId:b})=>{const[p,y]=N.useState("Treatment"),[S,j]=N.useState(""),[T,C]=N.useState(""),[q,L]=N.useState([]),[W,Z]=N.useState([]),[k,te]=N.useState(!1),[he,fe]=N.useState(""),[ae,we]=N.useState([]),[be,ke]=N.useState(null),Te=N.useRef(null);N.useEffect(()=>{var ne,A,R;l&&((async()=>{const{data:K}=await ue.from("service_catalog").select("*").eq("is_active",!0).order("name");K&&we(K)})(),f?(j(((ne=h.find(K=>K.name===f.vet_name))==null?void 0:ne.id)||((A=h[0])==null?void 0:A.id)||""),C(f.request_details),L(f.items||[]),y(f.department),Z(f.images||[])):(j(((R=h[0])==null?void 0:R.id)||""),C(""),L([]),Z([]),y((d==null?void 0:d.department)||"Treatment")))},[l,f,d,h]);const se=async ne=>{const A=ne.target.files;if(!(!A||A.length===0)){te(!0);try{const R=[];for(const re of Array.from(A)){const K=await Sx(re);K&&R.push({url:K,name:re.name})}Z(re=>[...re,...R])}catch(R){console.error("Image upload failed:",R)}finally{te(!1),Te.current&&(Te.current.value="")}}};if(!l)return null;const me=f?f.patient_name:d==null?void 0:d.patient_name,je=g||k||!S;return c.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-slate-900/60 backdrop-blur-sm",onClick:s,children:c.jsxs("div",{className:"bg-white rounded-xl w-full max-w-4xl shadow-2xl overflow-hidden flex flex-col max-h-[90vh]",onClick:ne=>ne.stopPropagation(),children:[c.jsxs("div",{className:"px-5 py-4 border-b border-slate-100 bg-slate-50 flex justify-between items-center",children:[c.jsx("h3",{className:"font-black text-slate-900 text-base",children:"Medical Order"}),c.jsx("button",{onClick:s,className:"w-6 h-6 rounded-full hover:bg-slate-200 text-slate-400 flex items-center justify-center",children:c.jsx("i",{className:"fas fa-times text-xs"})})]}),c.jsx("div",{className:"bg-white border-b border-slate-100 p-1.5 flex gap-1",children:Tx.map(ne=>c.jsxs("button",{onClick:()=>y(ne.value),className:`flex-1 py-2 px-2 rounded-lg flex items-center justify-center gap-2 border ${p===ne.value?"bg-slate-900 border-slate-900 text-white":"bg-slate-50 text-slate-400"}`,children:[c.jsx("i",{className:`fas ${ne.icon} text-[10px]`}),c.jsx("span",{className:"text-[11px] font-black uppercase",children:ne.label})]},ne.value))}),c.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[c.jsxs("div",{className:"w-1/3 p-5 border-r border-slate-100 flex flex-col bg-slate-50/50",children:[c.jsxs("div",{className:"relative mb-3",children:[c.jsx("input",{type:"text",placeholder:"Search catalog...",value:he,onChange:ne=>fe(ne.target.value),className:"w-full bg-white border border-slate-200 rounded-lg pl-8 pr-3 py-2 text-xs outline-none"}),c.jsx("i",{className:"fas fa-search absolute left-2.5 top-1/2 -translate-y-1/2 text-slate-400 text-xs"})]}),c.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar bg-white border border-slate-200 rounded-lg relative",children:[ae.filter(ne=>ne.name.toLowerCase().includes(he.toLowerCase())).map(ne=>c.jsxs("div",{onClick:()=>{ne.category==="PHARMACY"?ke(ne):L(A=>[...A,{id:Date.now().toString(),service_id:ne.id,name:ne.name,unit_price:ne.default_price,quantity:1,total_price:ne.default_price,category:ne.category,performingVetId:S}])},className:"px-3 py-2 border-b border-slate-50 hover:bg-blue-50 cursor-pointer flex justify-between items-center",children:[c.jsx("span",{className:"text-xs font-bold truncate",children:ne.name}),c.jsxs("span",{className:"text-[10px] text-slate-400 font-bold",children:["",ne.default_price.toLocaleString()]})]},ne.id)),be&&c.jsx(Ax,{item:be,onConfirm:ne=>{L(A=>[...A,{id:Date.now().toString(),service_id:be.id,name:be.name,unit_price:be.default_price,quantity:ne,total_price:be.default_price*ne,category:be.category,performingVetId:S}]),ke(null)},onCancel:()=>ke(null)})]})]}),c.jsxs("div",{className:"w-1/3 p-5 flex flex-col space-y-4 border-r border-slate-100 overflow-y-auto",children:[c.jsx("div",{className:"bg-blue-50/50 p-2.5 rounded-lg border border-blue-100",children:c.jsx("span",{className:"text-sm font-black text-slate-900 truncate block",children:me})}),c.jsxs("select",{value:S,onChange:ne=>j(ne.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded-lg px-3 py-2 text-xs font-bold outline-none",children:[c.jsx("option",{value:"",children:"Select Vet"}),h.map(ne=>c.jsx("option",{value:ne.id,children:ne.name},ne.id))]}),c.jsxs("div",{className:"flex-1 min-h-[200px] border border-slate-200 rounded-lg flex flex-col bg-white overflow-hidden",children:[c.jsx("div",{className:"bg-slate-100 px-3 py-1.5 border-b border-slate-200 flex justify-between",children:c.jsxs("span",{className:"text-[9px] font-black text-slate-500 uppercase",children:["Items (",q.length,")"]})}),c.jsx("div",{className:"flex-1 overflow-y-auto",children:q.map((ne,A)=>c.jsxs("div",{className:"flex justify-between items-center px-2 py-1.5 border-b border-slate-50 last:border-0 hover:bg-slate-50",children:[c.jsxs("span",{className:"text-[10px] font-bold text-slate-700 truncate flex-1",children:[ne.name," x",ne.quantity]}),c.jsx("button",{onClick:()=>L(R=>R.filter((re,K)=>K!==A)),className:"text-slate-300 hover:text-rose-500 ml-2",children:c.jsx("i",{className:"fas fa-times"})})]},ne.id))})]}),c.jsx("textarea",{value:T,onChange:ne=>C(ne.target.value),placeholder:"Instructions...",className:"w-full h-24 bg-slate-50 border border-slate-200 rounded-lg px-3 py-2 text-xs outline-none resize-none"})]}),c.jsxs("div",{className:"w-1/3 p-5 flex flex-col bg-slate-50/30",children:[c.jsxs("div",{className:"flex justify-between items-center mb-3",children:[c.jsx("h4",{className:"text-[10px] font-black uppercase text-slate-500",children:"Clinical Media"}),c.jsx("button",{onClick:()=>{var ne;return(ne=Te.current)==null?void 0:ne.click()},className:"px-3 py-1 bg-slate-900 text-white rounded text-[9px] font-black uppercase",children:"Add Media"}),c.jsx("input",{type:"file",ref:Te,hidden:!0,multiple:!0,accept:"image/*",onChange:se})]}),c.jsx("div",{className:"flex-1 overflow-y-auto border-2 border-dashed border-slate-200 rounded-xl p-2 bg-white",children:W.map((ne,A)=>c.jsxs("div",{className:"relative group bg-slate-50 border border-slate-200 rounded-lg overflow-hidden mb-2",children:[c.jsx("img",{src:ne.url,className:"w-full aspect-square object-cover",alt:""}),c.jsx("button",{onClick:async()=>{await Ex(ne.url),Z(R=>R.filter((re,K)=>K!==A))},className:"absolute top-1 right-1 w-5 h-5 bg-rose-500 text-white rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100",children:c.jsx("i",{className:"fas fa-times text-[10px]"})})]},A))})]})]}),c.jsxs("div",{className:"p-4 border-t border-slate-100 bg-slate-50 flex justify-end gap-2",children:[f&&r&&c.jsx("button",{onClick:r,className:"px-4 py-2 bg-rose-50 text-rose-500 rounded-lg font-black text-[10px] uppercase",children:"Delete"}),c.jsx("button",{onClick:s,className:"px-4 py-2 text-slate-500 font-black text-[10px] uppercase",children:"Cancel"}),f&&c.jsx("button",{disabled:je,onClick:()=>{var ne;return i(((ne=h.find(A=>A.id===S))==null?void 0:ne.name)||"",T,q,S,b||f.soap_id,p,W,"Completed")},className:"px-5 py-2 bg-emerald-600 text-white rounded-lg font-black text-[10px] uppercase",children:"Complete"}),c.jsx("button",{disabled:je,onClick:()=>{var ne;return i(((ne=h.find(A=>A.id===S))==null?void 0:ne.name)||"",T,q,S,b||(f==null?void 0:f.soap_id)||"",p,W,(f==null?void 0:f.status)||"Pending")},className:"px-5 py-2 bg-slate-900 text-white rounded-lg font-black text-[10px] uppercase",children:"Save"})]})]})})},El={Treatment:{icon:"fa-briefcase-medical",color:"text-indigo-600",label:"",bg:"bg-indigo-50"},Pharmacy:{icon:"fa-pills",color:"text-emerald-600",label:"",bg:"bg-emerald-50"},"X-ray":{icon:"fa-radiation",color:"text-slate-700",label:"X-ray",bg:"bg-slate-100"},Ultrasound:{icon:"fa-wave-square",color:"text-blue-600",label:"",bg:"bg-blue-50"}},Ox=({title:l,subTitle:s,department:i,icon:r,colorClass:d,items:f=[],onDropRoom:h,onOrderDragStart:g,onOrderDrop:b,onOrderDoubleClick:p,onRoomDoubleClick:y})=>{const[S,j]=N.useState(!1),[T,C]=N.useState(null),q=d.includes("indigo")?"text-indigo-600":d.includes("emerald")?"text-emerald-600":d.includes("slate")?"text-slate-600":"text-blue-600";return c.jsxs("div",{onDoubleClick:L=>{L.stopPropagation(),y==null||y(i)},className:`flex flex-col h-full bg-white border rounded-lg overflow-hidden shadow-[0_2px_8px_-4px_rgba(0,0,0,0.05)] transition-all group relative ${S?"border-blue-500 ring-2 ring-blue-500/10 z-10":"border-slate-200"}`,onDragOver:L=>{L.preventDefault(),j(!0)},onDragLeave:()=>j(!1),onDrop:L=>{L.preventDefault(),j(!1),h==null||h(i)},children:[c.jsxs("div",{className:"px-3 py-2 border-b border-slate-100 flex justify-between items-center min-h-[40px] pointer-events-none select-none bg-white",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("i",{className:`fas ${r} ${q} text-sm opacity-90`}),c.jsxs("div",{className:"flex flex-col leading-none",children:[c.jsx("span",{className:"font-black text-slate-800 text-[11px] uppercase tracking-tight",children:l}),c.jsx("span",{className:"text-[8px] text-slate-400 font-bold uppercase tracking-wider",children:s})]})]}),c.jsx("span",{className:"text-[10px] font-black px-1.5 py-0.5 rounded bg-slate-100 text-slate-600",children:f.length})]}),c.jsx("div",{className:"flex-1 bg-white/50 p-2 overflow-y-auto relative custom-scrollbar",children:f.length===0?c.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-slate-300 pointer-events-none select-none px-4 text-center",children:[c.jsx("i",{className:`fas ${r} text-2xl opacity-10 mb-2`}),c.jsx("p",{className:"text-[9px] font-black uppercase tracking-[0.2em] text-slate-300 opacity-60",children:"Empty"})]}):c.jsx("div",{className:"space-y-4",children:f.map((L,W)=>c.jsxs("div",{draggable:!0,onDragStart:Z=>g(Z,L.id),onDragOver:Z=>{Z.preventDefault(),Z.stopPropagation(),C(W)},onDragLeave:()=>C(null),onDrop:Z=>{Z.preventDefault(),Z.stopPropagation(),b(L.id),C(null)},onDoubleClick:Z=>{Z.stopPropagation(),p==null||p(L)},className:`bg-white p-2.5 rounded border shadow-sm flex flex-col gap-1.5 transition-all group/item relative cursor-move hover:border-blue-300 ${T===W?"border-blue-500 bg-blue-50 translate-y-0.5":"border-slate-200"}`,children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[c.jsx("span",{className:"font-black text-slate-800 text-xs truncate",children:L.patient_name}),c.jsx("span",{className:"text-[9px] text-slate-400 font-bold whitespace-nowrap",children:new Date(L.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),c.jsx("span",{className:`text-[8px] px-1.5 py-0.5 rounded font-black uppercase tracking-wider ${L.status==="In Progress"?"bg-blue-50 text-blue-600":"bg-amber-50 text-amber-600"}`,children:L.status})]}),c.jsx("div",{className:"text-[10px] font-medium leading-snug break-words text-slate-700",children:L.items&&L.items.length>0?c.jsx("div",{className:"space-y-1",children:L.items.map((Z,k)=>c.jsxs("div",{className:"flex justify-between items-center bg-slate-50 px-1.5 py-0.5 rounded",children:[c.jsx("span",{className:"truncate",children:Z.name}),c.jsxs("span",{className:"text-[8px] text-slate-400 font-bold",children:["x",Z.quantity]})]},k))}):L.request_details}),c.jsx("div",{className:"flex items-center justify-between mt-0.5 pt-1.5 border-t border-slate-50",children:c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("i",{className:"fas fa-user-md text-[8px] text-slate-300"}),c.jsx("span",{className:"text-[9px] text-slate-400 font-bold",children:L.vet_name})]})})]},L.id))})})]})},kx=({patients:l,selectedPatientId:s,activeSoapId:i,onSelectPatient:r,vets:d,waitlist:f,onAddToWaitlist:h,onUpdateWaitlist:g,onRemoveFromWaitlist:b})=>{const[p,y]=N.useState(""),[S,j]=N.useState(320),[T,C]=N.useState(!1),q=N.useRef(null),[L,W]=N.useState(null),[Z,k]=N.useState(null),[te,he]=N.useState(null),[fe,ae]=N.useState([]),[we,be]=N.useState(!1),[ke,Te]=N.useState(null),[se,me]=N.useState(null),[je,ne]=N.useState(!1),[A,R]=N.useState(null),[re,K]=N.useState({}),[oe,x]=N.useState(!1),[H,$]=N.useState(!0),J=N.useMemo(()=>l.find(G=>G.id===s)||null,[s,l]);N.useEffect(()=>{(async()=>{const{data:M,error:ge}=await ue.from("department_orders").select("*").order("order_index",{ascending:!0}).order("created_at",{ascending:!0});!ge&&M&&ae(M)})();const w=ue.channel("orders-sync-v10").on("postgres_changes",{event:"*",table:"department_orders",schema:"public"},M=>{M.eventType==="INSERT"?ae(ge=>[...ge,M.new].sort((Y,F)=>Y.order_index-F.order_index)):M.eventType==="UPDATE"?ae(ge=>ge.map(Y=>Y.id===M.new.id?M.new:Y).sort((Y,F)=>Y.order_index-F.order_index)):M.eventType==="DELETE"&&ae(ge=>ge.filter(Y=>Y.id!==M.old.id))}).subscribe();return()=>{ue.removeChannel(w)}},[]);const ce=N.useCallback(G=>{if(T){const w=G.clientX;w>=250&&w<=600&&j(w)}},[T]);N.useEffect(()=>(window.addEventListener("mousemove",ce),window.addEventListener("mouseup",()=>C(!1)),()=>{window.removeEventListener("mousemove",ce),window.removeEventListener("mouseup",()=>C(!1))}),[ce]);const ve=N.useMemo(()=>{const G={unassigned:[]};return d.forEach(w=>G[w.id]=[]),f.forEach(w=>{w.vetId&&G[w.vetId]?G[w.vetId].push(w):G.unassigned.push(w)}),G},[f,d]),ye=G=>{if(!L||Z==="order")return;let w="",M="";if(Z==="patient"){const ge=l.find(Y=>Y.id===L);ge&&(w=ge.id,M=ge.name)}else if(Z==="waitlist"){const ge=f.find(Y=>Y.id===L);ge&&(w=ge.patientId,M=ge.patientName)}w&&M&&(me(null),Te({patient_id:w,patient_name:M,department:G}),be(!0))},qe=async G=>{G.preventDefault(),G.stopPropagation();const w=G.dataTransfer.getData("text/plain")||L;if(w)try{const{error:M}=await ue.from("department_orders").update({status:"Completed"}).eq("id",w);if(M)throw M}catch(M){console.error("Failed to complete order:",M.message)}finally{he(null),W(null),k(null)}},Ue=async(G,w)=>{try{const M=fe.find(le=>le.id===G);if(!M)return;const ge=(M.images||[]).filter(le=>le.url!==w);let Y=M.attachment_url;M.attachment_url===w&&(Y=ge.length>0?ge[0].url:null);const{error:F}=await ue.from("department_orders").update({images:ge,attachment_url:Y}).eq("id",G);if(F)throw F;if(M.soap_id){const{data:le,error:D}=await ue.from("soap_records").select("images").eq("id",M.soap_id).single();if(!D&&le&&Array.isArray(le.images)){const I=le.images.filter(pe=>pe!==w);await ue.from("soap_records").update({images:I}).eq("id",M.soap_id)}}}catch(M){console.error("Image deletion failed:",M.message)}},ie=async(G,w,M,ge,Y,F,le,D)=>{ne(!0);try{const I=(se==null?void 0:se.patient_id)||(ke==null?void 0:ke.patient_id),pe=le&&le.length>0?le[0].url:null;let ze=se==null?void 0:se.id,Ye=Y||(se==null?void 0:se.soap_id);if(se)await ue.from("department_orders").update({vet_name:G,request_details:w,items:M,department:F,images:le,status:D,attachment_url:pe}).eq("id",se.id);else if(ke){const{data:Xe,error:Ie}=await ue.from("department_orders").insert([{patient_id:ke.patient_id,patient_name:ke.patient_name,soap_id:Ye||null,department:F,vet_name:G,request_details:w,status:D,items:M,images:le,attachment_url:pe}]).select().single();if(Ie)throw Ie;ze=Xe.id}if(Ye&&le&&le.length>0){const{data:Xe}=await ue.from("soap_records").select("images").eq("id",Ye).single(),Ie=(Xe==null?void 0:Xe.images)||[],vt=le.map(Cs=>Cs.url),Mt=Array.from(new Set([...Ie,...vt]));await ue.from("soap_records").update({images:Mt}).eq("id",Ye)}if(ze&&I&&M.length>0){await ue.from("billing_items").delete().eq("linked_order_id",ze);let{data:Xe}=await ue.from("billing_invoices").select("id").eq("patient_id",I).eq("status","Unpaid").single();if(!Xe){const{data:Ie}=await ue.from("billing_invoices").insert({patient_id:I,status:"Unpaid"}).select().single();Xe=Ie}Xe&&await ue.from("billing_items").insert(M.map(Ie=>({invoice_id:Xe.id,linked_order_id:ze,service_id:Ie.service_id,item_name:Ie.name,category:Ie.category,unit_price:Ie.unit_price,quantity:Ie.quantity,total_price:Ie.total_price,performing_vet_id:ge})))}be(!1),Te(null),me(null)}catch(I){console.error(I.message)}finally{ne(!1)}},de=async()=>{if(se)try{await ue.from("billing_items").delete().eq("linked_order_id",se.id),await ue.from("department_orders").delete().eq("id",se.id),be(!1),me(null)}catch(G){console.error(G.message)}},Q=N.useMemo(()=>{if(!s)return null;const G=fe.filter(M=>String(M.patient_id)===String(s)&&M.status==="Completed"),w={};return G.forEach(M=>{const ge=new Date(M.created_at).toISOString().split("T")[0];w[ge]||(w[ge]=[]),w[ge].push(M)}),Object.entries(w).sort((M,ge)=>ge[0].localeCompare(M[0]))},[fe,s]);return c.jsxs("div",{className:`flex h-full bg-slate-100 overflow-hidden text-xs font-sans ${T?"cursor-col-resize select-none":""}`,children:[c.jsxs("div",{ref:q,style:{width:`${S}px`},className:"relative border-r border-slate-300 flex flex-col bg-white z-10 flex-shrink-0 shadow-sm",children:[c.jsx("div",{className:"p-3 border-b border-slate-200 bg-slate-50 flex items-center justify-between",children:c.jsx("h2",{className:"font-bold text-gray-700",children:"Patient Search"})}),c.jsx("div",{className:"p-2 border-b border-slate-200",children:c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"text",placeholder:"Search...",value:p,onChange:G=>y(G.target.value),className:"w-full pl-8 pr-2 py-1.5 bg-white border border-slate-300 rounded text-[11px] font-bold outline-none"}),c.jsx("i",{className:"fas fa-search absolute left-2.5 top-1/2 -translate-y-1/2 text-gray-400"})]})}),c.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-1",children:d.map(G=>{var w;return c.jsxs("div",{className:`mb-1 border border-transparent rounded ${te===G.id?"bg-blue-50 border-blue-300":""}`,onDragOver:M=>{M.preventDefault(),he(G.id)},onDrop:()=>he(null),children:[c.jsxs("div",{onClick:()=>K(M=>({...M,[G.id]:!M[G.id]})),className:"px-2 py-1 bg-slate-50 border border-slate-200 flex justify-between items-center cursor-pointer hover:bg-slate-100",children:[c.jsx("span",{className:"font-black text-gray-700",children:G.name}),c.jsx("span",{className:"text-[10px] text-blue-600 font-black",children:((w=ve[G.id])==null?void 0:w.length)||0})]}),!re[G.id]&&ve[G.id].map(M=>c.jsxs("div",{draggable:!0,onDragStart:ge=>{W(M.id),k("waitlist")},onDoubleClick:()=>r(M.patientId),className:`px-2 py-1.5 border-b border-slate-100 flex justify-between items-center hover:bg-slate-50 group cursor-pointer ${s===M.patientId?"bg-blue-50/50":""}`,children:[c.jsx("span",{className:"font-black text-gray-900 truncate",children:M.patientName}),c.jsx("span",{className:"text-[10px] text-gray-500 font-bold",children:M.time})]},M.id))]},G.id)})}),c.jsx("div",{onMouseDown:()=>C(!0),className:"absolute top-0 right-0 w-1 h-full cursor-col-resize hover:bg-blue-400 z-20"})]}),c.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[c.jsx("div",{className:`${H?"flex-1":"w-10 bg-slate-200"} p-2 flex flex-col h-full border-r border-slate-300 gap-2 transition-all relative`,onClick:()=>!H&&$(!0),children:H?c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex items-center justify-between bg-white border border-slate-300 px-3 py-2 rounded-lg shadow-sm",children:[c.jsxs("h2",{className:"text-[11px] font-black uppercase tracking-tight flex items-center gap-2",children:[c.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500 animate-pulse"}),"Global Active Queue"]}),c.jsx("button",{onClick:G=>{G.stopPropagation(),$(!1)},className:"w-6 h-6 rounded hover:bg-slate-100 flex items-center justify-center text-slate-400",children:c.jsx("i",{className:"fas fa-chevron-left text-xs"})})]}),c.jsx("div",{className:"flex-1 grid grid-cols-4 gap-2 min-h-0",children:["Treatment","Pharmacy","X-ray","Ultrasound"].map(G=>c.jsx(Ox,{title:El[G].label,subTitle:G,department:G,icon:El[G].icon,colorClass:El[G].bg,items:fe.filter(w=>w.department===G&&w.status!=="Completed"),onDropRoom:ye,onOrderDragStart:(w,M)=>{w.dataTransfer.setData("text/plain",M),W(M),k("order")},onOrderDrop:w=>{},onOrderDoubleClick:w=>{me(w),be(!0)},onRoomDoubleClick:w=>{s&&(Te({patient_id:s,patient_name:J==null?void 0:J.name,department:w}),be(!0))}},G))})]}):c.jsx("div",{className:"flex flex-col h-full items-center justify-center gap-4 py-8",children:c.jsx("div",{className:"writing-mode-vertical-rl text-[10px] font-black text-slate-400 uppercase tracking-widest",style:{writingMode:"vertical-rl"},children:"Active Queue"})})}),c.jsxs("div",{className:`${oe?"flex-1":"w-10"} transition-all flex flex-col bg-slate-50/30 border-l border-white relative`,onClick:()=>!oe&&x(!0),onDragOver:G=>{G.preventDefault(),Z==="order"&&he("history-panel")},onDragLeave:()=>he(null),onDrop:qe,children:[te==="history-panel"&&c.jsx("div",{className:"absolute inset-0 z-50 bg-emerald-500/10 border-2 border-emerald-500 rounded-lg flex items-center justify-center pointer-events-none m-2",children:c.jsxs("div",{className:"bg-white px-4 py-2 rounded-full shadow-lg font-black text-emerald-600 text-[10px] uppercase tracking-widest animate-bounce flex items-center gap-2",children:[c.jsx("i",{className:"fas fa-check-double"})," Drop to Complete"]})}),oe?c.jsxs("div",{className:"flex flex-col h-full w-full p-2 gap-2 animate-in fade-in duration-300",children:[c.jsxs("div",{className:"flex items-center justify-between flex-shrink-0 bg-white border border-slate-200 px-3 py-2 rounded-lg shadow-sm",children:[c.jsxs("h2",{className:"text-[11px] font-black uppercase tracking-tight flex items-center gap-2",children:[c.jsx("i",{className:"fas fa-history text-slate-400"}),"Patient History"]}),c.jsx("button",{onClick:G=>{G.stopPropagation(),x(!1)},className:"w-6 h-6 rounded hover:bg-slate-200 flex items-center justify-center text-slate-400",children:c.jsx("i",{className:"fas fa-chevron-right text-xs"})})]}),c.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-1",children:Q==null?void 0:Q.map(([G,w])=>c.jsxs("div",{className:"relative pb-4",children:[c.jsxs("div",{className:"sticky top-0 z-20 flex items-center gap-2 py-2 bg-slate-50/90 backdrop-blur-sm",children:[c.jsx("span",{className:"bg-slate-700 text-white text-[9px] font-black px-2 py-0.5 rounded shadow-sm",children:G}),c.jsx("div",{className:"flex-1 h-px bg-slate-200"})]}),c.jsx("div",{className:"mt-3 space-y-3 pl-2 border-l-2 border-slate-200 ml-1.5",children:w.map(M=>c.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm p-3",children:[c.jsxs("div",{className:"flex justify-between items-center mb-2",children:[c.jsx("span",{className:`text-[10px] font-black uppercase ${El[M.department].color}`,children:El[M.department].label}),c.jsx("span",{className:"text-[9px] text-slate-400",children:new Date(M.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),M.items&&M.items.length>0?c.jsx("div",{className:"flex flex-wrap gap-1 mb-2",children:M.items.map((ge,Y)=>c.jsx("span",{className:"px-1.5 py-0.5 bg-slate-100 border border-slate-200 rounded text-[9px] font-bold text-slate-700 leading-none",children:ge.name},Y))}):c.jsx("div",{className:"text-[10px] font-bold text-slate-600 italic mb-2",children:M.request_details||"No details"}),M.images&&M.images.length>0&&c.jsx("div",{className:"flex gap-1.5 mb-2 overflow-x-auto pb-1 scrollbar-none",children:M.images.map((ge,Y)=>c.jsxs("div",{className:"relative w-10 h-10 flex-shrink-0 rounded-lg border border-slate-200 bg-slate-50 overflow-hidden shadow-sm group",children:[c.jsx("img",{src:ge.url,className:"w-full h-full object-cover cursor-zoom-in",alt:ge.name,onClick:()=>R(ge.url)}),c.jsx("button",{onClick:F=>{F.stopPropagation(),Ue(M.id,ge.url)},className:"absolute top-0 right-0 w-4 h-4 bg-rose-500 text-white flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity z-10 rounded-bl-lg",children:c.jsx("i",{className:"fas fa-trash-alt text-[8px]"})})]},Y))}),c.jsx("div",{className:"flex items-center gap-1.5",children:c.jsx("span",{className:"text-[9px] text-slate-500 font-bold",children:M.vet_name})})]},M.id))})]},G))})]}):c.jsx("div",{className:"flex flex-col h-full items-center justify-center gap-4 py-8",children:c.jsx("div",{className:"writing-mode-vertical-rl text-[10px] font-black text-slate-400 uppercase tracking-widest",style:{writingMode:"vertical-rl"},children:"Completed History"})})]})]}),c.jsx(Fm,{isOpen:we,onClose:()=>{be(!1),Te(null),me(null)},onSave:ie,onDelete:de,draftOrder:ke,editingOrder:se,vets:d,isSubmitting:je,activeSoapId:i}),A&&c.jsx(Mm,{src:A,onClose:()=>R(null)})]})},Cx=({width:l,searchTerm:s,onSearchChange:i,searchResults:r,selectedPatientId:d,onSelectPatient:f,waitlist:h,vets:g,waitlistByVet:b,collapsedVets:p,onToggleVet:y,onRemoveFromWaitlist:S,onDragStart:j,onDragEnd:T,onDrop:C,onStartResizing:q,dragOverId:L,setDragOverId:W})=>{var Z;return c.jsxs("div",{style:{width:`${l}px`},className:"relative border-r border-slate-300 flex flex-col bg-white z-10 flex-shrink-0 text-xs font-sans",children:[c.jsx("div",{className:"p-3 border-b border-slate-200 bg-slate-50 flex items-center justify-between",children:c.jsx("h2",{className:"font-bold text-gray-800 text-xs",children:"Patient Search"})}),c.jsx("div",{className:"p-2 border-b border-slate-200",children:c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"text",placeholder:"Name / Owner / Phone...",value:s,onChange:k=>i(k.target.value),className:"w-full pl-8 pr-2 py-1.5 bg-white border border-slate-300 rounded text-[11px] text-gray-900 outline-none focus:border-blue-500 font-bold placeholder:text-gray-400"}),c.jsx("i",{className:"fas fa-search absolute left-2.5 top-1/2 -translate-y-1/2 text-gray-400"})]})}),c.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:[s.trim().length>0&&c.jsxs("div",{className:"p-1",children:[c.jsx("div",{className:"px-2 py-1 bg-slate-100 text-[10px] font-bold text-gray-600 border-b border-slate-200 mb-1",children:"Search Results"}),r.map(k=>c.jsxs("div",{draggable:!0,onDragStart:te=>j(te,k.id,"patient"),onDragEnd:T,onDoubleClick:()=>f(k.id),className:`px-2 py-1.5 cursor-pointer border-b border-slate-100 flex items-center gap-2 hover:bg-blue-50 transition-colors group ${d===k.id?"bg-blue-50":""}`,children:[c.jsx("img",{src:k.avatar,className:"w-8 h-8 rounded border border-slate-200 flex-shrink-0",alt:""}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"font-black text-gray-900 truncate",children:k.name}),c.jsx("span",{className:"text-[10px] text-gray-600 font-bold",children:k.breed})]}),c.jsxs("div",{className:"text-[10px] text-gray-500 flex justify-between",children:[c.jsx("span",{className:"truncate font-bold",children:k.owner}),k.phone&&c.jsx("span",{className:"font-bold",children:k.phone.slice(-4)})]}),k.chartNumber&&c.jsxs("div",{className:"text-[9px] text-blue-600 font-mono mt-0.5",children:["#",k.chartNumber]})]})]},k.id))]}),c.jsxs("div",{className:"p-1",children:[c.jsxs("div",{className:"px-2 py-1 bg-slate-100 text-[10px] font-bold text-gray-500 border-b border-slate-200 mb-1 flex justify-between items-center",children:[c.jsx("span",{children:"Live Waitlist"}),c.jsxs("span",{className:"text-blue-600 font-bold",children:[h.length," cases"]})]}),g.map(k=>{var te;return c.jsxs("div",{className:`mb-1 border border-transparent rounded ${L===k.id?"bg-blue-50 border-blue-300":""}`,onDragOver:he=>{he.preventDefault(),W(k.id)},onDragLeave:()=>W(null),onDrop:he=>C(he,k.id),children:[c.jsxs("div",{onClick:()=>y(k.id),className:"px-2 py-1 bg-slate-50 border border-slate-200 flex justify-between items-center cursor-pointer hover:bg-slate-100",children:[c.jsx("span",{className:"font-black text-gray-700",children:k.name}),c.jsx("span",{className:"text-[10px] text-blue-600 font-black",children:((te=b[k.id])==null?void 0:te.length)||0})]}),!p[k.id]&&c.jsx("div",{className:"min-h-[10px]",children:b[k.id].map(he=>c.jsxs("div",{draggable:!0,onDragStart:fe=>j(fe,he.id,"waitlist"),onDragEnd:T,onDoubleClick:()=>f(he.patientId),className:`px-2 py-1.5 border-b border-slate-100 flex justify-between items-center hover:bg-slate-50 group cursor-pointer ${d===he.patientId?"bg-blue-50/30":""}`,children:[c.jsxs("div",{className:"flex-1 truncate",children:[c.jsx("span",{className:"font-black text-gray-900",children:he.patientName}),c.jsxs("span",{className:"ml-1 text-[10px] text-gray-400 font-bold",children:["[",he.type,"]"]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-[10px] text-gray-500 font-bold",children:he.time}),c.jsx("button",{onClick:fe=>{fe.stopPropagation(),S(he.id)},className:"text-gray-300 hover:text-rose-500 opacity-0 group-hover:opacity-100 transition-opacity",children:c.jsx("i",{className:"fas fa-times"})})]})]},he.id))})]},k.id)}),c.jsxs("div",{className:`mt-2 border border-transparent rounded ${L==="unassigned"?"bg-amber-50 border-amber-300":""}`,onDragOver:k=>{k.preventDefault(),W("unassigned")},onDragLeave:()=>W(null),onDrop:k=>C(k,""),children:[c.jsxs("div",{onClick:()=>y("unassigned"),className:"px-2 py-1 bg-[#fffbeb] border border-[#fde68a] flex justify-between items-center cursor-pointer",children:[c.jsx("span",{className:"font-black text-[#78350f] uppercase tracking-tighter",children:"UNASSIGNED QUEUE"}),c.jsx("span",{className:"text-[10px] text-[#78350f] font-black",children:((Z=b.unassigned)==null?void 0:Z.length)||0})]}),!p.unassigned&&c.jsx("div",{className:"min-h-[10px]",children:b.unassigned.map(k=>c.jsxs("div",{draggable:!0,onDragStart:te=>j(te,k.id,"waitlist"),onDragEnd:T,onDoubleClick:()=>f(k.patientId),className:"px-2 py-1.5 border-b border-slate-100 flex justify-between items-center bg-white hover:bg-[#fffbeb] group cursor-pointer",children:[c.jsx("span",{className:"font-black text-gray-900 truncate",children:k.patientName}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-[10px] text-gray-500 font-bold",children:k.time}),c.jsx("button",{onClick:te=>{te.stopPropagation(),S(k.id)},className:"text-gray-300 hover:text-rose-500 opacity-0 group-hover:opacity-100 transition-opacity",children:c.jsx("i",{className:"fas fa-times"})})]})]},k.id))})]})]})]}),c.jsx("div",{onMouseDown:q,className:"absolute top-0 right-0 w-1 h-full cursor-col-resize hover:bg-blue-400 transition-colors z-20"})]})},rr=({icon:l,title:s,colorClass:i,onQuickSave:r,isSaving:d})=>c.jsxs("div",{className:"flex items-center justify-between mb-3 border-b border-slate-300 pb-2",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:`w-8 h-8 rounded flex items-center justify-center text-white shadow ${i}`,children:c.jsx("i",{className:`fas ${l} text-sm`})}),c.jsx("h2",{className:"text-lg font-black text-slate-900 uppercase tracking-tight",children:s})]}),r&&c.jsxs("button",{onClick:f=>{f.preventDefault(),r()},disabled:d,className:"flex items-center gap-2 px-4 py-1.5 bg-blue-600 text-white rounded font-black text-[11px] uppercase tracking-wider hover:bg-blue-700 active:scale-95 disabled:opacity-50",children:[c.jsx("i",{className:`fas ${d?"fa-spinner fa-spin":"fa-save"}`}),d?"Saving...":"Save"]})]}),Rx=({activeStep:l,onStepChange:s,record:i,onUpdate:r,onSuggestTests:d,onSuggestDdx:f,onSuggestTx:h,onSuggestRx:g,onSuggestSummary:b,isSaving:p,onSave:y,onImageDoubleClick:S,clinicSettings:j})=>{const T=N.useRef(null),C=["S","O","A","P"],q=C.indexOf(l),[L,W]=N.useState(!1),[Z,k]=N.useState(null),[te,he]=N.useState(null),[fe,ae]=N.useState(""),[we,be]=N.useState([]),[ke,Te]=N.useState(!1),se=N.useRef(null),me=$=>k($),je=$=>{if(Z===null||Z===$)return;const J=[...i.assessmentDdx||[]],ce=J[Z];J.splice(Z,1),J.splice($,0,ce),r("assessmentDdx",J),k(null),he(null)},ne=$=>{const J=$.target.value;ae(J),se.current&&clearTimeout(se.current),J.trim().length>0?se.current=setTimeout(async()=>{const{data:ce}=await ue.from("reference_diagnoses").select("*").ilike("name",`%${J}%`).limit(10);ce&&(be(ce),Te(!0))},300):(be([]),Te(!1))},A=$=>{const J=i.assessmentDdx||[];J.includes($)||r("assessmentDdx",[...J,$]),ae(""),be([]),Te(!1)},R=async $=>{var ve;const J=(ve=$.target.files)==null?void 0:ve[0];if(!J)return;const ce=new FileReader;ce.onloadend=()=>r("images",[...i.images||[],ce.result]),ce.readAsDataURL(J)},re=$=>{const J=(i.images||[]).filter(ce=>ce!==$);r("images",J)},K=()=>c.jsxs("div",{className:"space-y-4",children:[c.jsx(rr,{icon:"fa-notes-medical",title:"Subjective (History)",colorClass:"bg-blue-600",onQuickSave:y,isSaving:p}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("div",{className:"flex items-center gap-2 px-2 py-1 bg-slate-100 rounded border border-slate-200",children:c.jsx("span",{className:"text-[10px] font-black text-blue-700 uppercase",children:"Chief Complaint"})}),c.jsx("input",{type:"text",value:i.cc||"",onChange:$=>r("cc",$.target.value),placeholder:"Chief Complaint...",className:"w-full px-3 py-2 text-base font-black text-slate-950 bg-white rounded border border-slate-400 outline-none focus:border-blue-600 shadow-sm"}),c.jsx("textarea",{value:i.subjective||"",onChange:$=>r("subjective",$.target.value),placeholder:"Record detailed history...",className:"w-full min-h-[400px] p-4 text-sm font-bold text-slate-950 bg-white rounded border border-slate-400 outline-none focus:border-blue-600 leading-relaxed shadow-sm"})]})]}),oe=()=>c.jsxs("div",{className:"space-y-4",children:[c.jsx(rr,{icon:"fa-heartbeat",title:"Objective (Clinical Exam)",colorClass:"bg-emerald-600",onQuickSave:y,isSaving:p}),c.jsxs("div",{className:"flex gap-2 mb-2",children:[c.jsxs("button",{onClick:()=>{var $;return($=T.current)==null?void 0:$.click()},disabled:L,className:"px-3 py-1.5 bg-slate-100 border border-slate-300 rounded text-[11px] font-bold hover:bg-slate-200 disabled:opacity-50",children:[c.jsx("i",{className:"fas fa-camera mr-1"})," Attach Photo"]}),c.jsxs("button",{onClick:d,className:"px-3 py-1.5 bg-slate-800 text-white rounded text-[11px] font-bold hover:bg-black",children:[c.jsx("i",{className:"fas fa-microscope mr-1"})," AI Diagnostics"]}),c.jsx("input",{type:"file",ref:T,hidden:!0,accept:"image/*",onChange:R})]}),c.jsx("textarea",{value:i.objective||"",onChange:$=>r("objective",$.target.value),placeholder:"Vitals, physical exam findings...",className:"w-full min-h-[500px] p-4 text-sm font-bold text-slate-950 bg-white rounded border border-slate-400 outline-none focus:border-emerald-600 shadow-sm"})]}),x=()=>{var $;return c.jsxs("div",{className:"space-y-4",children:[c.jsx(rr,{icon:"fa-list-check",title:"Assessment (Diagnosis)",colorClass:"bg-amber-500",onQuickSave:y,isSaving:p}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("span",{className:"text-[11px] font-black text-slate-600 uppercase tracking-wider",children:"Problem List"}),c.jsx("textarea",{value:i.assessmentProblems||"",onChange:J=>r("assessmentProblems",J.target.value),placeholder:"List clinical problems...",className:"w-full min-h-[300px] p-4 text-sm font-black text-slate-950 bg-white border border-slate-400 rounded outline-none focus:border-amber-500 shadow-sm"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{className:"text-[11px] font-black text-slate-600 uppercase tracking-wider",children:"DDx (Differential Diagnosis)"}),c.jsx("button",{onClick:f,className:"text-[10px] text-indigo-600 font-black underline",children:"AI Recommendations"})]}),c.jsxs("div",{className:"bg-slate-50 border border-slate-300 rounded p-2 min-h-[300px] space-y-1 relative",children:[($=i.assessmentDdx)==null?void 0:$.map((J,ce)=>c.jsxs("div",{draggable:!0,onDragStart:()=>me(ce),onDragOver:ve=>{ve.preventDefault(),he(ce)},onDrop:()=>je(ce),className:`flex justify-between items-center bg-white border px-2 py-1.5 rounded group shadow-sm cursor-move transition-all ${Z===ce?"opacity-30":""} ${te===ce?"border-indigo-500 bg-indigo-50":"border-slate-200"}`,children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("i",{className:"fas fa-grip-vertical text-slate-300 text-[10px]"}),c.jsx("span",{className:"text-xs font-black text-slate-950",children:J})]}),c.jsx("button",{onClick:()=>{const ve=[...i.assessmentDdx||[]];ve.splice(ce,1),r("assessmentDdx",ve)},className:"text-slate-300 hover:text-rose-600 opacity-0 group-hover:opacity-100 transition-opacity",children:c.jsx("i",{className:"fas fa-times"})})]},ce)),c.jsxs("div",{className:"relative mt-2",children:[c.jsx("input",{value:fe,onChange:ne,onKeyDown:J=>J.key==="Enter"&&A(fe),onFocus:()=>fe&&Te(!0),className:"w-full bg-white border border-slate-300 p-2 text-xs font-black text-slate-950 outline-none focus:border-indigo-500 rounded shadow-inner",placeholder:"+ Search or Type DDx..."}),ke&&we.length>0&&c.jsx("div",{className:"absolute top-full left-0 right-0 z-10 bg-white border border-slate-200 rounded-b shadow-lg max-h-48 overflow-y-auto",children:we.map(J=>c.jsx("div",{onMouseDown:()=>A(J.name),className:"px-3 py-2 text-xs font-bold text-slate-700 hover:bg-blue-50 cursor-pointer border-b last:border-0",children:J.name},J.id))})]})]})]})]})]})},H=()=>c.jsxs("div",{className:"space-y-4",children:[c.jsx(rr,{icon:"fa-clipboard-check",title:"Plan (Management)",colorClass:"bg-purple-600",onQuickSave:y,isSaving:p}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{className:"text-[11px] font-black text-slate-600 uppercase tracking-wider",children:"Tx (Treatment/Surgery)"}),c.jsx("button",{onClick:h,className:"text-[10px] text-blue-600 font-black underline",children:"AI Recommendations"})]}),c.jsx("textarea",{value:i.planTx||"",onChange:$=>r("planTx",$.target.value),className:"w-full min-h-[200px] p-3 text-sm font-bold text-slate-950 bg-white border border-slate-400 rounded outline-none focus:border-blue-500 shadow-sm",placeholder:"Treatment details..."})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{className:"text-[11px] font-black text-slate-600 uppercase tracking-wider",children:"Rx (Prescription)"}),c.jsx("button",{onClick:g,className:"text-[10px] text-emerald-600 font-black underline",children:"AI Recommendations"})]}),c.jsx("textarea",{value:i.planRx||"",onChange:$=>r("planRx",$.target.value),className:"w-full min-h-[200px] p-3 text-sm font-bold text-slate-950 bg-white border border-slate-400 rounded outline-none focus:border-emerald-500 shadow-sm",placeholder:"Prescription details..."})]})]}),c.jsxs("div",{className:"bg-slate-50 p-4 rounded-xl mt-4 border border-slate-200 shadow-sm",children:[c.jsxs("div",{className:"flex justify-between items-center mb-3",children:[c.jsx("span",{className:"text-[10px] font-black text-slate-600 uppercase tracking-widest",children:"Discharge Summary & Education"}),c.jsx("button",{onClick:b,className:"px-3 py-1.5 bg-slate-800 text-white rounded text-[10px] font-black hover:bg-black shadow-sm",children:"AI Summary"})]}),c.jsx("textarea",{value:i.planSummary||"",onChange:$=>r("planSummary",$.target.value),className:"w-full min-h-[400px] p-4 text-sm font-bold text-slate-950 bg-white border border-slate-400 rounded-lg outline-none focus:border-blue-500 leading-relaxed shadow-sm",placeholder:"Enter summary information for the owner..."})]})]});return c.jsxs("div",{className:"flex flex-col h-full bg-white p-4 relative",children:[c.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar pb-32",children:[l==="S"&&K(),l==="O"&&oe(),l==="A"&&x(),l==="P"&&H(),i.images&&i.images.length>0&&c.jsxs("div",{className:"mt-10 pt-6 border-t border-slate-200",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[c.jsx("i",{className:"fas fa-images text-blue-500 text-sm"}),c.jsx("h3",{className:"text-xs font-black text-slate-700 uppercase tracking-widest",children:"Linked Clinical Media"}),c.jsx("span",{className:"bg-slate-100 text-slate-400 text-[9px] px-1.5 py-0.5 rounded font-black",children:i.images.length})]}),c.jsx("div",{className:"flex flex-wrap gap-3",children:i.images.map(($,J)=>c.jsxs("div",{className:"relative w-28 h-28 bg-slate-50 rounded-xl border border-slate-200 overflow-hidden shadow-sm hover:shadow-md hover:border-blue-300 transition-all cursor-zoom-in group",children:[c.jsx("img",{src:$,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300",alt:"",onClick:()=>S($)}),c.jsx("button",{onClick:ce=>{ce.stopPropagation(),re($)},className:"absolute top-1 right-1 w-6 h-6 bg-rose-500 text-white rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity z-10 shadow-lg",children:c.jsx("i",{className:"fas fa-times text-[10px]"})}),c.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-white/90 backdrop-blur-sm px-2 py-1 border-t border-slate-100 flex items-center justify-between",children:[c.jsxs("span",{className:"text-[9px] font-black text-slate-600 truncate uppercase",children:["Asset ",J+1]}),c.jsx("i",{className:"fas fa-search-plus text-[8px] text-blue-500 opacity-0 group-hover:opacity-100 transition-opacity"})]})]},J))})]})]}),c.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-white/80 backdrop-blur-md px-6 py-4 border-t border-slate-200 z-10 flex justify-between shadow-[0_-10px_20px_rgba(0,0,0,0.02)]",children:[c.jsx("button",{onClick:()=>q>0&&s(C[q-1]),disabled:q===0,className:"px-6 py-2.5 bg-slate-100 border border-slate-300 rounded-xl font-black text-xs text-slate-500 disabled:opacity-20 hover:bg-slate-200 transition-all",children:"Previous"}),q<C.length-1?c.jsx("button",{onClick:()=>s(C[q+1]),className:"px-8 py-2.5 bg-slate-900 text-white rounded-xl font-black text-xs hover:bg-black shadow-lg shadow-slate-900/20 active:scale-95 transition-all",children:"Next Section"}):c.jsx("button",{onClick:y,disabled:p,className:"px-10 py-2.5 bg-blue-600 text-white rounded-xl font-black text-xs shadow-lg shadow-blue-500/20 disabled:opacity-50 uppercase tracking-widest hover:bg-blue-700 active:scale-95 transition-all",children:"Finish & Save Chart"})]})]})},Dx=({entry:l,isExpanded:s,onToggle:i,onLoadRecord:r,onImageDoubleClick:d,onDeleteImage:f})=>c.jsx("div",{className:`mb-3 transition-all duration-300 ${s?"scale-[1.01]":""}`,children:c.jsxs("div",{className:`bg-white border rounded-[20px] overflow-hidden transition-all duration-300 ${s?"border-blue-500 shadow-xl":"border-slate-200 hover:border-slate-300 hover:bg-slate-50"}`,children:[c.jsxs("div",{onClick:i,className:"p-4 cursor-pointer flex justify-between items-center group",children:[c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("span",{className:`text-[10px] font-black uppercase tracking-widest ${s?"text-blue-600":"text-slate-400"}`,children:l.date}),c.jsx("h4",{className:`font-black text-sm mt-1 leading-snug line-clamp-1 ${s?"text-slate-900":"text-slate-700"}`,children:l.cc||"No symptom recorded"})]}),c.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center transition-all duration-300 ${s?"rotate-180 bg-blue-600 text-white":"bg-slate-100 text-slate-400"}`,children:c.jsx("i",{className:"fas fa-chevron-down text-[10px]"})})]}),s&&c.jsxs("div",{className:"px-4 pb-5 space-y-4 animate-in fade-in slide-in-from-top-1 duration-300",onClick:h=>h.stopPropagation(),children:[c.jsx("div",{className:"pt-3 border-t border-slate-100 grid grid-cols-2 gap-2",children:[{label:"S",color:"bg-blue-50 text-blue-700",val:l.subjective},{label:"O",color:"bg-emerald-50 text-emerald-700",val:l.objective},{label:"A",color:"bg-amber-50 text-amber-700",val:l.assessmentProblems},{label:"P",color:"bg-purple-50 text-purple-700",val:l.planSummary}].map(h=>c.jsxs("div",{className:`p-2.5 rounded-xl border border-transparent ${h.color.split(" ")[0]}`,children:[c.jsxs("span",{className:`font-black text-[9px] block mb-1 tracking-widest ${h.color.split(" ")[1]}`,children:[h.label," SECTION"]}),c.jsx("p",{className:"text-[10px] font-bold text-slate-800 line-clamp-2 leading-relaxed",children:h.val||"No record"})]},h.label))}),l.images&&l.images.length>0&&c.jsxs("div",{className:"space-y-2",children:[c.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest",children:"Clinical Media"}),c.jsx("div",{className:"flex flex-wrap gap-1.5",children:l.images.map((h,g)=>c.jsxs("div",{className:"relative group w-12 h-12 rounded-lg overflow-hidden border border-slate-200 shadow-sm bg-slate-50 cursor-zoom-in hover:border-blue-500 transition-all",children:[c.jsx("img",{src:h,className:"w-full h-full object-cover",alt:`Clinical ${g}`,onClick:()=>d(h)}),f&&c.jsx("button",{onClick:b=>{b.stopPropagation(),f(l.id,h)},className:"absolute top-0 right-0 w-4 h-4 bg-rose-500 text-white flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity z-10 rounded-bl-lg",children:c.jsx("i",{className:"fas fa-trash-alt text-[7px]"})})]},g))})]}),c.jsx("button",{onClick:h=>{h.stopPropagation(),r(l)},className:"w-full py-3 bg-slate-900 hover:bg-black text-white text-[10px] font-black uppercase tracking-widest rounded-xl transition-all shadow-md active:scale-95",children:"Load to Chart Editor"})]})]})}),Ux=({patient:l,activeSoapId:s,onOpenOrder:i})=>c.jsxs("div",{className:"h-16 bg-white border-b border-slate-200 flex items-center justify-between px-6 flex-shrink-0 shadow-sm z-10",children:[c.jsxs("div",{className:"flex items-center gap-6",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("img",{src:l.avatar,alt:l.name,className:"w-10 h-10 rounded-xl object-cover border border-slate-200 shadow-sm"}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-lg font-black text-slate-900 leading-none",children:l.name}),c.jsxs("span",{className:"text-xs font-bold text-slate-500",children:[l.breed,"  ",l.gender]})]})]}),c.jsx("div",{className:"h-8 w-px bg-slate-100"}),c.jsxs("div",{className:"flex gap-6",children:[c.jsxs("div",{className:"flex flex-col",children:[c.jsx("span",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest",children:"Age"}),c.jsx("span",{className:"text-sm font-bold text-slate-700",children:l.age})]}),c.jsxs("div",{className:"flex flex-col",children:[c.jsx("span",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest",children:"Weight"}),c.jsxs("span",{className:"text-sm font-bold text-blue-600",children:[l.weight," kg"]})]})]})]}),c.jsx("div",{className:"flex items-center gap-3",children:c.jsxs("button",{onClick:i,className:"flex items-center gap-2 px-6 py-2 rounded-lg transition-all shadow-md active:scale-95 bg-blue-600 text-white hover:bg-blue-700",children:[c.jsx("i",{className:"fas fa-clipboard-list text-sm"}),c.jsx("span",{className:"text-xs font-black uppercase tracking-wide",children:"Place Order"})]})})]}),zx=l=>{var ke,Te;const[s,i]=N.useState(300),[r,d]=N.useState(!1),[f,h]=N.useState(""),[g,b]=N.useState({}),[p,y]=N.useState(null),[S,j]=N.useState(!0),[T,C]=N.useState(null),[q,L]=N.useState(!1),[W,Z]=N.useState(!1),k=N.useMemo(()=>l.patients.find(se=>se.id===l.selectedPatientId),[l.patients,l.selectedPatientId]),te=N.useMemo(()=>{const se=f.trim().toLowerCase();return se.length<1?[]:l.patients.filter(me=>me.name.toLowerCase().includes(se)||me.owner.toLowerCase().includes(se)||me.chartNumber&&me.chartNumber.toLowerCase().includes(se))},[f,l.patients]),he=N.useMemo(()=>{const se={unassigned:[]};return l.vets.forEach(me=>se[me.id]=[]),l.waitlist.forEach(me=>{const je=me.vetId;je&&se[je]?se[je].push(me):se.unassigned.push(me)}),se},[l.waitlist,l.vets]),fe=(se,me,je)=>{se.dataTransfer.setData("id",me),se.dataTransfer.setData("type",je)},ae=async(se,me)=>{se.preventDefault();const je=se.dataTransfer.getData("id"),ne=se.dataTransfer.getData("type");if(ne==="waitlist")await l.onUpdateWaitlist(je,{vetId:me});else if(ne==="patient"){const A=l.patients.find(R=>R.id===je);A&&await l.onAddToWaitlist({patientId:A.id,patientName:A.name,breed:A.breed,ownerName:A.owner,vetId:me,memo:"",type:"Consultation"})}y(null)},we=async(se,me)=>{var je;try{const{data:ne,error:A}=await ue.from("soap_records").select("images").eq("id",se).single();if(A)throw A;const re=(Array.isArray(ne.images)?ne.images:[]).filter(x=>x!==me),{error:K}=await ue.from("soap_records").update({images:re}).eq("id",se);if(K)throw K;const{data:oe}=await ue.from("department_orders").select("id, images, attachment_url").eq("soap_id",se);if(oe&&oe.length>0)for(const x of oe){const $=(Array.isArray(x.images)?x.images:[]).filter(ce=>ce.url!==me);let J=x.attachment_url;x.attachment_url===me&&(J=$.length>0?$[0].url:null),await ue.from("department_orders").update({images:$,attachment_url:J}).eq("id",x.id)}((je=l.currentSoap)==null?void 0:je.id)===se&&l.onUpdateSoap("images",re)}catch(ne){console.error("Image deletion failed:",ne.message)}},be=async(se,me,je,ne,A,R,re,K="Pending")=>{if(k){Z(!0);try{const oe=re&&re.length>0?re[0].url:null,{data:x,error:H}=await ue.from("department_orders").insert([{patient_id:k.id,patient_name:k.name,soap_id:A||null,department:R,vet_name:se,request_details:me,status:K,order_index:0,items:je,images:re,attachment_url:oe}]).select().single();if(H)throw H;if(A&&re&&re.length>0){const{data:$}=await ue.from("soap_records").select("images").eq("id",A).single(),J=Array.isArray($==null?void 0:$.images)?$.images:[],ce=re.map(ye=>ye.url),ve=Array.from(new Set([...J,...ce]));await ue.from("soap_records").update({images:ve}).eq("id",A),l.onUpdateSoap("images",ve)}if(je.length>0&&x){let{data:$}=await ue.from("billing_invoices").select("id").eq("patient_id",k.id).eq("status","Unpaid").single();if(!$){const{data:J}=await ue.from("billing_invoices").insert({patient_id:k.id,status:"Unpaid"}).select().single();$=J}if($){const J=je.map(ce=>({invoice_id:$.id,linked_order_id:x.id,service_id:ce.service_id,item_name:ce.name,category:ce.category,unit_price:ce.unit_price,quantity:ce.quantity||1,total_price:ce.total_price,performing_vet_id:ne||null}));await ue.from("billing_items").insert(J)}}L(!1)}catch(oe){console.error("Failed to send order:",oe.message)}finally{Z(!1)}}};return c.jsxs("div",{className:"flex h-full bg-slate-100 overflow-hidden",children:[c.jsx(Cx,{width:s,searchTerm:f,onSearchChange:h,searchResults:te,selectedPatientId:l.selectedPatientId,onSelectPatient:l.onSelectPatient,waitlist:l.waitlist,vets:l.vets,waitlistByVet:he,collapsedVets:g,onToggleVet:se=>b(me=>({...me,[se]:!me[se]})),onRemoveFromWaitlist:l.onRemoveFromWaitlist,onDragStart:fe,onDragEnd:()=>{},onDrop:ae,onStartResizing:()=>d(!0),dragOverId:p,setDragOverId:y}),c.jsx("main",{className:"flex-1 flex flex-col overflow-hidden relative min-w-0 bg-white",children:k?c.jsxs(c.Fragment,{children:[c.jsx(Ux,{patient:k,activeSoapId:(ke=l.currentSoap)==null?void 0:ke.id,onOpenOrder:()=>L(!0)}),c.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[c.jsx("div",{className:"flex-1 flex flex-col min-w-0",children:c.jsx(Rx,{activeStep:l.soapStep,onStepChange:l.setSoapStep,record:l.currentSoap,onUpdate:l.onUpdateSoap,isSaving:l.isSavingSoap,onSave:l.onSaveSoap,onSuggestTests:l.onSuggestTests,onSuggestDdx:l.onSuggestDdx,onSuggestTx:l.onSuggestTx,onSuggestRx:l.onSuggestRx,onSuggestSummary:l.onSuggestSummary,onImageDoubleClick:l.setViewingImage,clinicSettings:l.clinicSettings})}),c.jsx("div",{className:`${S?"w-[350px]":"w-10"} bg-white border-l border-slate-200 flex flex-col transition-all duration-300 shadow-xl z-20`,children:S?c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"p-4 border-b border-slate-100 bg-slate-50 flex items-center justify-between",children:[c.jsx("div",{children:c.jsx("h3",{className:"font-black text-slate-800 text-sm uppercase tracking-tight",children:"History Ledger"})}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:()=>l.onNewChart(l.selectedPatientId),className:"w-8 h-8 bg-blue-600 text-white rounded-lg flex items-center justify-center hover:bg-blue-700 transition-all",children:c.jsx("i",{className:"fas fa-plus text-xs"})}),c.jsx("button",{onClick:()=>j(!1),className:"w-8 h-8 text-slate-400 hover:bg-slate-100 rounded-lg flex items-center justify-center",children:c.jsx("i",{className:"fas fa-chevron-right text-xs"})})]})]}),c.jsx("div",{className:"flex-1 overflow-y-auto p-3 custom-scrollbar",children:l.history.length===0?c.jsx("div",{className:"text-slate-400 text-center py-20 font-black uppercase tracking-widest text-[9px]",children:"No records found"}):l.history.map(se=>c.jsx(Dx,{entry:se,isExpanded:T===se.id,onToggle:()=>C(T===se.id?null:se.id),onLoadRecord:l.onLoadHistory,onImageDoubleClick:l.setViewingImage,onDeleteImage:we},se.id))})]}):c.jsxs("div",{className:"flex flex-col h-full items-center py-6 gap-6 cursor-pointer hover:bg-slate-50 transition-colors",onClick:()=>j(!0),children:[c.jsx("i",{className:"fas fa-chevron-left text-slate-300"}),c.jsx("div",{className:"writing-mode-vertical-rl text-[10px] font-black text-slate-400 uppercase tracking-widest",style:{writingMode:"vertical-rl"},children:"History"})]})})]})]}):c.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-slate-300",children:[c.jsx("i",{className:"fas fa-user-md text-6xl mb-4 opacity-20"}),c.jsx("p",{className:"font-black uppercase tracking-[0.2em]",children:"Select a patient to start consultation"})]})}),q&&k&&c.jsx(Fm,{isOpen:q,onClose:()=>L(!1),onSave:be,vets:l.vets,isSubmitting:W,activeSoapId:(Te=l.currentSoap)==null?void 0:Te.id,draftOrder:{patient_id:k.id,patient_name:k.name}}),r&&c.jsx("div",{className:"fixed inset-0 z-[100] cursor-col-resize",onMouseMove:se=>{const me=se.clientX;me>=200&&me<=500&&i(me)},onMouseUp:()=>d(!1)})]})},Um="mindonesia0000@gmail.com",Mx=l=>{if(!l)return"-";const[s,i,r]=l.split("-").map(Number),d=new Date(s,i-1,r),f=new Date;f.setHours(0,0,0,0);let h=f.getFullYear()-d.getFullYear(),g=f.getMonth()-d.getMonth();return(g<0||g===0&&f.getDate()<d.getDate())&&(h--,g+=12),h===0?g===0?"Newborn":`${g}m`:g===0?`${h}y`:`${h}y ${g}m`},Lx=()=>{const[l,s]=N.useState(!1),[i,r]=N.useState(null),[d,f]=N.useState([]),[h,g]=N.useState(()=>{const w=localStorage.getItem("ikava_clinic_settings");return w?JSON.parse(w):{lunchStartTime:"13:00",lunchEndTime:"14:00",isLunchEnabled:!0,imageServerUrl:""}}),[b,p]=N.useState(!1),[y,S]=N.useState("Reception"),[j,T]=N.useState(""),[C,q]=N.useState(!1),[L,W]=N.useState("S"),[Z,k]=N.useState(null),[te,he]=N.useState(!1),[fe,ae]=N.useState({title:"",icon:"",options:[],isLoading:!1,onConfirm:()=>{}}),[we,be]=N.useState([]),[ke,Te]=N.useState([]),[se,me]=N.useState([]),[je,ne]=N.useState([]),[A,R]=N.useState(!1),[re,K]=N.useState(!1),[oe,x]=N.useState({assessmentDdx:[],images:[],labResults:{cbc:{},chemistry:{}}}),H=N.useCallback(w=>({id:String(w.id),chartNumber:w.chart_number||"",name:w.name||"Unknown",species:w.species||At.DOG,breed:w.breed||"-",birth_date:w.birth_date,age:Mx(w.birth_date),gender:w.gender||"-",weight:Number(w.weight||0),owner:w.owner||"Unknown Owner",phone:w.phone||"-",lastVisit:w.last_visit||w.created_at||new Date().toISOString(),avatar:w.avatar||`https://i.pravatar.cc/150?u=${w.id}`,notes:w.notes||"",chipNumber:w.chip_number||"",medical_memo:w.medical_memo}),[]),$=N.useCallback(w=>({id:String(w.id),patientId:String(w.patient_id),date:w.date||new Date(w.created_at).toISOString().split("T")[0],cc:w.cc||"",subjective:w.subjective||"",objective:w.objective||"",assessmentProblems:w.assessment_problems||"",assessmentDdx:w.assessment_ddx||[],planTx:w.plan_tx||"",planRx:w.plan_rx||"",planSummary:w.plan_summary||"",images:w.images||[],labResults:w.lab_results||{cbc:{},chemistry:{}}}),[]),J=N.useCallback(w=>({id:String(w.id),patientId:String(w.patient_id),patientName:w.patient_name,breed:w.breed,ownerName:w.owner_name,vetId:w.vet_id||"",time:new Date(w.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}),status:w.status||"Waiting",memo:w.memo,type:w.type}),[]),ce=N.useCallback(w=>({id:String(w.id),vetId:w.vet_id,patientId:w.patient_id,date:w.date,startTime:w.start_time.substring(0,5),endTime:w.end_time.substring(0,5),reason:w.reason||"",isRecurring:w.is_recurring||!1,color:w.color||"#3b82f6"}),[]),ve=async()=>{const{data:w}=await ue.from("patients").select("*").order("created_at",{ascending:!1});w&&be(w.map(H))},ye=async()=>{const{data:w}=await ue.from("waitlist").select("*").order("created_at",{ascending:!0});w&&Te(w.map(J))},qe=async()=>{const{data:w}=await ue.from("appointments").select("*");w&&me(w.map(ce))},Ue=async()=>{const{data:w}=await ue.from("veterinarians").select("*").order("name",{ascending:!0});w&&f(w.map(M=>({id:M.id,name:M.name,specialty:M.specialty,email:M.email,avatar:M.avatar||`https://i.pravatar.cc/150?u=${M.id}`})))},ie=async w=>{if(!w)return;const{data:M}=await ue.from("soap_records").select("*").eq("patient_id",w).order("created_at",{ascending:!1});if(M){let ge=M.map($);ne(ge);const Y=new Date().toISOString().split("T")[0],F=ge.find(le=>le.date===Y);F?x(F):de(w)}},de=w=>{x({id:void 0,patientId:w,date:new Date().toISOString().split("T")[0],cc:"",subjective:"",objective:"",assessmentProblems:"",assessmentDdx:[],planTx:"",planRx:"",planSummary:"",images:[],labResults:{cbc:{},chemistry:{}}}),W("S")};N.useEffect(()=>{if(Ue(),!l)return;R(!0),Promise.all([ve(),ye(),qe()]).finally(()=>R(!1));const w=ue.channel("global-sync-v10").on("postgres_changes",{event:"*",table:"veterinarians",schema:"public"},()=>Ue()).on("postgres_changes",{event:"*",table:"patients",schema:"public"},()=>ve()).on("postgres_changes",{event:"*",table:"waitlist",schema:"public"},()=>ye()).on("postgres_changes",{event:"*",table:"appointments",schema:"public"},()=>qe()).on("postgres_changes",{event:"*",table:"soap_records",schema:"public"},M=>{j&&M.new.patient_id===j&&ie(j)}).subscribe();return()=>{ue.removeChannel(w)}},[l,j]),N.useEffect(()=>{j&&ie(j)},[j]);const Q=async()=>{const w=j||oe.patientId;if(w){K(!0);try{const M={patient_id:w,date:oe.date||new Date().toISOString().split("T")[0],cc:oe.cc,subjective:oe.subjective,objective:oe.objective,assessment_problems:oe.assessmentProblems,assessment_ddx:oe.assessmentDdx,plan_tx:oe.planTx,plan_rx:oe.planRx,plan_summary:oe.planSummary,images:oe.images,lab_results:oe.labResults},ge=oe.id?ue.from("soap_records").update(M).eq("id",oe.id):ue.from("soap_records").insert([M]),{data:Y,error:F}=await ge.select();if(F)throw F;Y&&Y[0]&&x($(Y[0])),ie(w)}catch(M){console.error("Save failed:",M.message)}finally{K(!1)}}},G=N.useMemo(()=>we.find(w=>w.id===j)||null,[j,we]);return l?A?c.jsx("div",{className:"h-screen w-screen flex items-center justify-center bg-slate-950 text-white font-black animate-pulse",children:"VETPULSE INITIALIZING..."}):c.jsxs("div",{className:"flex flex-col h-screen bg-slate-100 overflow-hidden",children:[c.jsx(Cp,{activeView:y,onViewChange:S,onLogout:()=>s(!1),userName:i==null?void 0:i.name,isAdmin:i==null?void 0:i.isAdmin,onOpenSettings:()=>p(!0),activePatient:G,onClearPatient:()=>{T(""),q(!1)}}),c.jsxs("div",{className:"flex-1 overflow-hidden relative",children:[y==="Reception"&&c.jsx(bx,{patients:we,vets:d,waitlist:ke,selectedPatientId:j,showDashboard:C,onRegisterPatient:async w=>{const{data:M}=await ue.from("patients").insert([w]).select();return M?H(M[0]):null},onUpdatePatient:async(w,M)=>{const{data:ge}=await ue.from("patients").update(M).eq("id",w).select();return ge?H(ge[0]):null},onUpdateWaitlist:async(w,M)=>{await ue.from("waitlist").update({vet_id:M.vetId||null,status:M.status,memo:M.memo}).eq("id",w),ye()},onAddToWaitlist:async w=>{await ue.from("waitlist").insert([{...w,status:"Waiting"}]),ye()},onRemoveFromWaitlist:async w=>{await ue.from("waitlist").delete().eq("id",w),ye()},onSelectPatient:w=>{T(w),q(!0)}}),y==="Consultation"&&c.jsx(zx,{patients:we,vets:d,waitlist:ke,selectedPatientId:j,onSelectPatient:T,onUpdateWaitlist:async(w,M)=>{await ue.from("waitlist").update({vet_id:M.vetId||null}).eq("id",w),ye()},onAddToWaitlist:async w=>{await ue.from("waitlist").insert([w]),ye()},onRemoveFromWaitlist:async w=>{await ue.from("waitlist").delete().eq("id",w),ye()},soapStep:L,setSoapStep:W,currentSoap:oe,onUpdateSoap:(w,M)=>x(ge=>({...ge,[w]:M})),isSavingSoap:re,onSaveSoap:Q,history:je,onLoadHistory:x,setViewingImage:k,onNewChart:de,onSuggestTests:()=>{},onSuggestDdx:()=>{},onSuggestTx:()=>{},onSuggestRx:()=>{},onSuggestSummary:()=>{},clinicSettings:h}),y==="Examination"&&c.jsx(kx,{patients:we,selectedPatientId:j,activeSoapId:oe.id,onSelectPatient:T,vets:d,waitlist:ke,onAddToWaitlist:async w=>{await ue.from("waitlist").insert([w]),ye()},onUpdateWaitlist:async(w,M)=>{await ue.from("waitlist").update(M).eq("id",w),ye()},onRemoveFromWaitlist:async w=>{await ue.from("waitlist").delete().eq("id",w),ye()}}),y==="Billing"&&c.jsx(yx,{patients:we,vets:d,waitlist:ke,onAddToWaitlist:async w=>{await ue.from("waitlist").insert([w]),ye()},onUpdateWaitlist:async(w,M)=>{await ue.from("waitlist").update(M).eq("id",w),ye()},onRemoveFromWaitlist:async w=>{await ue.from("waitlist").delete().eq("id",w),ye()},selectedPatientId:j,onSelectPatient:T}),y==="Appointment"&&c.jsx(_x,{vets:d,patients:we,appointments:se,clinicSettings:h,activePatient:G,onAddAppointment:async w=>(await ue.from("appointments").insert([w]),qe(),!0),onUpdateAppointment:async(w,M)=>(await ue.from("appointments").update(M).eq("id",w),qe(),!0),onDeleteAppointment:async w=>(await ue.from("appointments").delete().eq("id",w),qe(),!0)})]}),b&&c.jsx(dx,{isOpen:b,onClose:()=>p(!1),vets:d,clinicSettings:h,onUpdateClinicSettings:w=>{g(w),localStorage.setItem("ikava_clinic_settings",JSON.stringify(w))},onAddVet:async w=>{await ue.from("veterinarians").insert([w]),Ue()},onRemoveVet:async w=>{await ue.from("veterinarians").delete().eq("id",w),Ue()}}),Z&&c.jsx(Mm,{src:Z,onClose:()=>k(null)})]}):c.jsx(Rp,{onLogin:w=>{(w.email===Um||d.some(M=>{var ge;return((ge=M.email)==null?void 0:ge.toLowerCase())===w.email.toLowerCase()}))&&(r({...w,isAdmin:w.email===Um}),s(!0))}})},e0=document.getElementById("root");if(!e0)throw new Error("Could not find root element to mount to");const qx=kp.createRoot(e0);qx.render(c.jsx(_p.StrictMode,{children:c.jsx(Lx,{})}));
